(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"2+Cz":function(e,t,n){"use strict";var a=n("ERkP"),r=n.n(a),s=n("lZoD"),i=n("kbI0"),o=n("RfuI");const c=Object(o.a)({id:"tNMe8",loader:()=>Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e(0),n.e(2),n.e(3),n.e(4),n.e(6),n.e(10),n.e(9),n.e(14),n.e(17),n.e(16),n.e(23),n.e(22),n.e(25),n.e(29),n.e(28),n.e("restrictions.dialog~b59ad437")]).then(n.bind(null,"uqKO")).then(({RestrictionsDialog:e})=>e),name:"RestrictionsDialogLoader"}),l=Object(o.a)({id:"6p3hN",name:"RestrictionsUpsellDialogLoader",loader:async()=>(await Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e(0),n.e(2),n.e(3),n.e(4),n.e(6),n.e(10),n.e(9),n.e(14),n.e(17),n.e(16),n.e(23),n.e(22),n.e(25),n.e(29),n.e(28),n.e("restrictions.dialog~b59ad437")]).then(n.bind(null,"YnqX"))).RestrictionsUpsellDialog});var d=n("gQ5V"),u=n("rc7/"),g=n("dIe6"),p=n("F4Ur"),m=n("TYX8"),h=n("AXlJ"),I=n("H5qd");const E=n.n(I).a`query IsUpsellQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id hasInheritedRestrictions hasRestrictions type}}tenant{editions{edition}}}`;function f(e){const t=Object(h.a)(e.contentId);return t?r.a.createElement(d.b,{query:E,variables:{contentId:t,status:m.a}},({data:t,error:n,loading:a})=>{var s,i,o;if(a)return null;if(n)return Object(u.b)(n)?(Object(p.a)(n),null):r.a.createElement(g.a,{error:n});const c=null!=(o=t)&&null!=(o=o.tenant)&&null!=(o=o.editions)?o.edition:o,l=Boolean(null!=(i=t)&&null!=(i=i.content)&&null!=(i=i.nodes)&&null!=(i=i[0])?i.hasRestrictions:i),d=Boolean(null!=(s=t)&&null!=(s=s.content)&&null!=(s=s.nodes)&&null!=(s=s[0])?s.hasInheritedRestrictions:s),m=l||d;return e.children({isUpsell:"FREE"===c&&!m})}):e.children({isUpsell:!1})}var b=n("CMz1");function O({contentId:e}){return r.a.createElement(s.c,{to:[b.a]},t=>r.a.createElement(f,{contentId:e},({isUpsell:n})=>{let a;if(t.getIsOpen()){const s=e=>{t.setIsOpen(!1,null,e)};a=n?r.a.createElement(l,{onClose:s}):r.a.createElement(c,{contentId:e,triggeredFrom:t.getTriggeredFrom(),onClose:s})}return r.a.createElement(i.b,null,a)}))}n.d(t,"a",(function(){return O}))},"5zZS":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n("Czhu"),r=n("HbGN"),s=n("ERkP"),i=n.n(s),o=n("KsTJ"),c=n("KcIU"),l=n.n(c);const d=Object(o.default)(e=>{let{shadowOffset:t}=e,n=Object(r.a)(e,["shadowOffset"]);return i.a.createElement("img",Object(a.a)({alt:""},n))})`
  ${e=>{const{shadowOffset:t={}}=e,{sides:n=0,bottom:a=0}=t;return o.css`
      margin: 0 ${n}px ${a}px ${n}px;
    `}}
`,u=i.a.createElement(d,{src:l.a,width:271,height:139})},ANgl:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("ERkP"),r=n.n(a),s=n("1U1M"),i=n("rc7/"),o=n("F4Ur"),c=n("t0Ff"),l=n("6n9r");function d({children:e}){const{data:t,loading:n,error:d}=Object(s.d)(c.a);let u;return d&&(Object(i.b)(d)?Object(o.a)(d):u=d),r.a.createElement(a.Fragment,null,e({edition:Object(l.a)(t),error:u,loading:n}))}},AXlJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("ERkP"),r=n("+mzV"),s=n("Ua4J"),i=n("DlIL");function o(e){const{contentId:t}=Object(a.useContext)(r.a),{getQueryParams:n}=Object(a.useContext)(s.a);return e||(t||Object(i.a)(n(),"draftId"))}},CMz1:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("zjfJ"),r=n("lZoD");class s extends r.a{constructor(...e){super(...e),Object(a.a)(this,"state",{isOpen:!1,triggeredFrom:null})}getIsOpen(){return this.state.isOpen}getTriggeredFrom(){return this.state.triggeredFrom}setIsOpen(e,t=null,n){this.setState({isOpen:e,triggeredFrom:t},()=>{n&&setTimeout(n,0)})}}},CZ5Z:function(e,t,n){"use strict";var a=n("ERkP"),r=n.n(a),s=n("L21V"),i=n("iqtt"),o=n("Czhu"),c=n("Gj0q"),l=n("qpwI"),d=n("5zZS"),u=n("dNjd"),g=n.n(u);const p=Object(s.g)({title:{id:"growth-experiment-enhanced-feature-gates.page-restrictions-modal-dialog.title",defaultMessage:"Get page restrictions",description:"Title for Page Restrictions Modal Dialog enhanced feature gate"},body:{id:"growth-experiment-enhanced-feature-gates.page-restrictions-modal-dialog.body",defaultMessage:"Upgrade your plan to control who can view and edit your pages.",description:"Message body for Page Restrictions Modal Dialog enhanced feature gate"},footer:{id:"growth-experiment-enhanced-feature-gates.page-restrictions-modal-dialog.footer",defaultMessage:"You’re on the Free plan, so anyone who's logged in can view and edit this page.",description:"Footer for Page Restrictions Modal Dialog enhanced feature gate"}}),m=({UpgradeEditionButton:e,onUpFlowOpen:t})=>{const n="pageRestrictionsModalDialog",{title:a,body:i,footer:u}=p;return r.a.createElement(l.a,{source:n,isGrandfathered:!1,title:r.a.createElement(s.c,Object(o.a)({},a)),body:r.a.createElement(s.c,Object(o.a)({},i)),footer:r.a.createElement(s.c,Object(o.a)({},u)),pictogram:r.a.createElement(d.a,{src:g.a,width:272,height:134,shadowOffset:{sides:-5,bottom:-8}}),upgradeEditionButton:r.a.createElement(c.b,{UpgradeEditionButton:e,source:n,targetEdition:c.a.STANDARD,isGrandfathered:!1,onUpFlowOpen:t})})};var h=n("KsTJ"),I=n("cBMx"),E=n.n(I);const f=Object(s.g)({title:{id:"growth-experiment-enhanced-feature-gates.page-restrictions-inline.title",defaultMessage:"Get page restrictions",description:"Title for Page Restrictions Inline enhanced feature gate"},body:{id:"growth-experiment-enhanced-feature-gates.page-restrictions-inline.body",defaultMessage:"Upgrade your plan to control who can view and edit your pages.",description:"Message body for Page Restrictions Inline enhanced feature gate"},footer:{id:"growth-experiment-enhanced-feature-gates.page-restrictions-inline.footer",defaultMessage:"You’re on the Free plan, so anyone who's logged in can view and edit this page.",description:"Footer for Page Restrictions Inline enhanced feature gate"}}),b=h.default.div`
  padding: 8px 0;
`,O=({UpgradeEditionButton:e,onUpFlowOpen:t})=>{const n="pageRestrictionsInline",{title:a,body:i,footer:u}=f;return r.a.createElement(b,null,r.a.createElement(l.a,{source:n,isGrandfathered:!1,title:r.a.createElement(s.c,Object(o.a)({},a)),body:r.a.createElement(s.c,Object(o.a)({},i)),footer:r.a.createElement(s.c,Object(o.a)({},u)),pictogram:r.a.createElement(d.a,{src:E.a,width:187,height:134,shadowOffset:{sides:-5,bottom:-8}}),upgradeEditionButton:r.a.createElement(c.b,{UpgradeEditionButton:e,source:n,targetEdition:c.a.STANDARD,isGrandfathered:!1,onUpFlowOpen:t})}))};var A=n("9ZX9"),y=n("mvtW"),R=n("mTU2"),T=n("+352"),C=n("46jh"),w=n("ZUFC");n.d(t,"a",(function(){return D}));const D=Object(s.h)(Object(C.a)(({isSiteAdmin:e=!1,intl:t,appearanceType:n,parentData:s,isChildPage:o=!1,onUpFlowOpen:c})=>{const{title:l,body:d}=function(e,t,n,a){if(t&&a){const{title:e,links:{webui:t}}=a,r=`<a href="${t}" target="_blank">${e}</a>`;return{title:n.formatMessage(R.a.grandfatheredChildContentRestrictionsTitle),body:""+n.formatMessage(R.a.grandfatheredChildContentRestrictionsBody,{parent:r})}}return{title:n.formatMessage(e?R.a.siteAdminContentRestrictionsTitle:R.a.nonSiteAdminContentRestrictionsTitle),body:n.formatMessage(e?R.a.siteAdminPageRestrictionsBody:R.a.nonSiteAdminPageRestrictionsBody)}}(e,o,t,s),{shouldShowEnhancedFeatureGates:u,triggerEnhancedFeatureGatesExposureEvent:g}=Object(i.a)({isSiteAdmin:e,autoFireExposureEvent:!1}),p=u&&!o;return Object(a.useEffect)(()=>{o||g()},[o,g]),p?r.a.createElement(r.a.Fragment,null,n===T.P.INLINE_MODAL?r.a.createElement(m,{UpgradeEditionButton:A.a,onUpFlowOpen:c}):r.a.createElement(O,{UpgradeEditionButton:A.a,onUpFlowOpen:c})):r.a.createElement(w.a,{appearanceType:n,title:l,body:d,source:"pageRestrictionsInline",canShowUpgradeButton:!o,onUpFlowOpen:c,targetEdition:y.a.STANDARD})}))},Efxu:function(e,t,n){"use strict";let a,r,s,i,o;n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),function(e){e.NO_RESTRICTIONS="NO_RESTRICTIONS",e.RESTRICT_EDIT="RESTRICT_EDIT",e.RESTRICT_VIEW="RESTRICT_VIEW"}(a||(a={})),function(e){e.DIRECT="DIRECT",e.MULTIPLE="MULTIPLE",e.NONE="NONE",e.PAGE_INHERITED="PAGE_INHERITED",e.SPACE="SPACE"}(r||(r={})),function(e){e.GROUP="GROUP",e.USER="USER"}(s||(s={})),function(e){e.EDIT="EDIT",e.VIEW="VIEW"}(i||(i={})),function(e){e.NO_ANCESTOR_VIEW="NO_ANCESTOR_VIEW",e.NO_SPACE_VIEW="NO_SPACE_VIEW",e.NO_SPACE_EDIT="NO_SPACE_EDIT"}(o||(o={}))},EhnY:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhMiAyIDAgMTAtNCAwdjNIMlY4YTQgNCAwIDExOCAwdjJoNmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem00IDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjNDI1MjZFIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},EufE:function(e,t,n){"use strict";var a=n("Czhu"),r=n("zjfJ"),s=n("ERkP"),i=n.n(s),o=n("gQ5V"),c=n("KsTJ"),l=n("lZoD"),d=n("RjSO"),u=(n("aWzz"),n("nnm9")),g=n.n(u),p=n("RKN0"),m=n("+352"),h=n("CZ5Z");const I=c.default.div`
  min-height: 136px;
  min-width: 352px;

  & div {
    white-space: initial;
    line-height: 20px;
  }
`;I.displayName="DialogContainer";const E=c.default.div`
  display: inline-block;
  position: relative;
`;E.displayName="DialogAnchor";class f extends s.Component{getContent(){const{parentData:e,isChildPage:t,onClose:n}=this.props;return i.a.createElement(I,null,i.a.createElement(h.a,{appearanceType:m.P.INLINE,parentData:e,isChildPage:t,onUpFlowOpen:n}))}render(){const{isOpen:e,children:t,onClose:n,placement:a}=this.props;return i.a.createElement(p.a,{isOpen:e,content:this.getContent(),onClose:n,placement:a||"bottom-start"},i.a.createElement(E,null,t))}}Object(r.a)(f,"defaultProps",{isOpen:!1,onClose:g.a,parentData:{},isChildPage:!1});var b=n("mvtW"),O=n("ANgl"),A=n("dIe6"),y=n("hpu0"),R=n("3VMZ"),T=n("U+B7"),C=n("A79P"),w=n("DlIL"),D=n("Ua4J"),M=n("TYX8"),j=n("zJ/j"),v=n("frZf"),S=n("qhEF"),N=n("+mzV"),P=n("WA38"),F=n("bR0+"),k=n("M/rd"),x=n("L21V"),G=n("H5qd"),L=n.n(G);const U=L.a`query ContentType($contentId:ID!){content(id:$contentId){nodes{id type}}}`,B=L.a`mutation experimentalGrantAccessMutation($contentId:String!$accessType:String!$accountId:String!)@experimental{experimentalGrantAccess(contentId:$contentId accessType:$accessType accountId:$accountId){responseStatus}}`;var _,z;const W=c.default.div`
  width: 350px;

  > h2 {
    font-size: 24px;
  }
`,Z=c.default.p`
  font-size: 14px;
  margin-top: 10px;
  margin-bottom: 15px;
`;Z.displayName="MessageContainer";const Y=c.default.div`
  font-size: 14px;
`,$=c.default.div`
  display: inline-block;
  position: relative;
`,V=Object(x.g)({successTitle:{id:"restrictions.grant-access.success.title",defaultMessage:"Access request granted",description:"For content permissions"},errorTitle:{id:"restrictions.grant-access.error.title",defaultMessage:"Access request error",description:"For content permissions"},noMailServer:{id:"restrictions.grant-access.error.no-mail-server",defaultMessage:"Access was granted, but there is not a mail server configured so the notification could not be sent.",description:"For content permissions"},sendEmailError:{id:"restrictions.grant-access.error.send-email",defaultMessage:"Access was granted, but an unexpected error happened while sending the notification.",description:"For content permissions"},genericError:{id:"restrictions.grant-access.error.generic",defaultMessage:"Sorry, there was an unexpected error while granting access.",description:"For content permissions"},alreadyGranted:{id:"restrictions.grant-access.success.already-granted",defaultMessage:"Access was already granted to the user.",description:"For content permissions"},genericSuccess:{id:"restrictions.grant-access.success.generic",defaultMessage:"Access was granted, a notification to the user will be sent.",description:"For content permissions"}});const H=Object(x.h)((z=_=class extends s.PureComponent{constructor(...e){super(...e),Object(r.a)(this,"generateGrantClickHandler",(e,t)=>{const{accessType:n,accountId:a,legacyInfo:r={username:void 0},onActionClick:s}=this.props;return()=>{e({variables:{contentId:t,accessType:n,accountId:a||r.username}}),s&&s()}}),Object(r.a)(this,"handleDenyClick",()=>{const{onActionClick:e}=this.props;e&&e()})}handleGrantAccessError(e){const{formatMessage:t}=this.props.intl,n=t(V.errorTitle);return a=>{var r;const s=null!=(r=a)&&null!=(r=r.graphQLErrors)&&null!=(r=r[0])?r.message:r;let i;i=t("412"===s?V.noMailServer:"502"===s?V.sendEmailError:V.genericError),e.showErrorFlag({title:n,description:i})}}handleGrantAccessSuccess(e){const{formatMessage:t}=this.props.intl,n=t(V.successTitle);return a=>{var r;const s=null!=(r=a)&&null!=(r=r.experimentalGrantAccess)?r.responseStatus:r;if(!s)return void e.showErrorFlag({title:n,description:t(V.genericError)});let i;i=t("202"===s?V.alreadyGranted:V.genericSuccess),e.showSuccessFlag({title:n,description:i})}}getContent(e,t,n){const{displayName:a,accessType:r,accountId:s,legacyInfo:c={username:void 0,userFullName:void 0}}=this.props;let l;var d;return l=s?i.a.createElement(P.a,{target:"_blank",href:Object(F.a)(s)},a):i.a.createElement(k.a,{target:"_blank",href:(d=c.username,d?`${v.a}/display/~${d}`:"")},c.userFullName," (",c.username,")"),i.a.createElement(W,null,i.a.createElement(x.c,{id:"restrictions.grant-access.dialog.title",defaultMessage:"Access request",description:"title for dialog to grant access to content when requested",tagName:"h2"}),i.a.createElement(Z,null,i.a.createElement(x.c,{id:"restrictions.grant-access.dialog.message",description:"Person trying to request type of access to page or blog post",defaultMessage:"{person} wants to {accessType} this {contentType, select, page {page} blogpost {blog post}}",values:{person:l,accessType:r,contentType:t}})),i.a.createElement(Y,null,i.a.createElement(o.a,{mutation:B,onError:this.handleGrantAccessError(n),onCompleted:this.handleGrantAccessSuccess(n)},t=>i.a.createElement(j.a,{onClick:this.generateGrantClickHandler(t,e),"data-test-id":"grant-button"},i.a.createElement(x.c,{id:"restrictions.grant-access.dialog.action.grant",defaultMessage:"Grant access",description:"Button label to grant access request to content"}))),i.a.createElement(j.a,{appearance:"link",onClick:this.handleDenyClick},i.a.createElement(x.c,{id:"restrictions.grant-access.dialog.action.deny",defaultMessage:"Deny",description:"Button label to deny access request to content"}))))}render(){const{children:e,isOpen:t}=this.props;return i.a.createElement(N.a.Consumer,null,({contentId:n})=>i.a.createElement(o.b,{query:U,variables:{contentId:n}},({data:a,loading:r})=>{var s;if(!a&&r)return null;const o=(null!=(s=a)&&null!=(s=s.content)&&null!=(s=s.nodes)&&null!=(s=s[0])?s.type:s)||"page";return i.a.createElement(l.c,{to:[S.a]},a=>i.a.createElement(p.a,{isOpen:t,content:this.getContent(n,o,a)},i.a.createElement($,{"data-test-id":"inline-dialog-anchor"},e)))}))}},Object(r.a)(_,"defaultProps",{accessType:"view",isOpen:!1,onActionClick:()=>{},legacyInfo:{username:"",userFullName:""}}),z));var q=n("MV18"),Q=n("cEjM"),J=n("amtX"),X=n("a8dO"),K=n("I4DW"),ee=n.n(K),te=n("EhnY"),ne=n.n(te),ae=n("GFFF"),re=n.n(ae),se=n("AXlJ");const ie=L.a`query RestrictionsButtonQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id hasInheritedRestrictions hasRestrictions hasViewRestrictions}}}`,oe=c.default.span`
  button {
    font-size: 14px;
  }
`,ce=Object(x.g)({noRestrictions:{id:"restrictions.button.no-restrictions.tooltip",defaultMessage:"No restrictions",description:"Tooltip explaining that the shown icon indicates absence of restrictions"},restrictionsApply:{id:"restrictions.button.restrictions-apply.tooltip",defaultMessage:"Restrictions apply",description:"Tooltip explaining that the shown icon indicates presence of restrictions"}});function le(e){const t=Object(se.a)(e.contentId),{className:n,onClick:r,markItemAsLoaded:c}=e,l=(...e)=>{const{content:t,icon:o}=function(e,t){if(e)return{content:i.a.createElement(x.c,Object(a.a)({},ce.restrictionsApply)),icon:i.a.createElement("img",{src:ee.a,"data-test-id":"locked-icon"})};if(t)return{content:i.a.createElement(x.c,Object(a.a)({},ce.restrictionsApply)),icon:i.a.createElement("img",{src:re.a,"data-test-id":"unlocked-restricted-icon"})};return{content:i.a.createElement(x.c,Object(a.a)({},ce.noRestrictions)),icon:i.a.createElement("img",{src:ne.a,"data-test-id":"unlocked-icon"})}}(...e);return c&&c(Q.a.PAGE_RESTRICTIONS),i.a.createElement(s.Fragment,null,i.a.createElement(oe,{className:n||"","data-testid":"restriction-button"},i.a.createElement(X.a,{content:t},i.a.createElement(J.a,{appearance:"subtle","data-test-id":"restrictions.dialog.button",onClick:r,iconBefore:o}))),i.a.createElement(q.a,{name:R.a.VIEW_PAGE_RESTRICTIONS_BUTTON}))};return t?i.a.createElement(o.b,{query:ie,variables:{contentId:t,status:M.a},fetchPolicy:"cache-and-network"},({data:e,loading:t})=>{var n,a;if(!e&&t)return i.a.createElement(J.a,{appearance:"subtle",style:{visibility:"hidden"},isDisabled:!0,iconBefore:i.a.createElement("span",{style:{width:24,height:24}})});const r=Boolean(null!=(a=e)&&null!=(a=a.content)&&null!=(a=a.nodes)&&null!=(a=a[0])?a.hasViewRestrictions:a),s=Boolean(null!=(n=e)&&null!=(n=n.content)&&null!=(n=n.nodes)&&null!=(n=n[0])?n.hasInheritedRestrictions:n);return l(r,s)}):null}const de=L.a`query HasRestrictionsQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id type hasInheritedRestrictions hasRestrictions ancestors{id title hasRestrictions links{webui}}}}}`;var ue=n("CMz1");n.d(t,"a",(function(){return me})),n.d(t,"b",(function(){return he}));const ge=c.default.div`
  display: inline-block;
  vertical-align: top;
`;class pe extends s.PureComponent{constructor(...e){super(...e),Object(r.a)(this,"state",{grantAccessClicked:!1,showFreeRestrictionDialog:!1,hasAutoOpenedRestrictionDialog:!1}),Object(r.a)(this,"makeHandleOpen",(e,t)=>()=>he(Object(a.a)(Object(a.a)({},this.props),{},{actionSubjectId:"restrictionsDialogButton",dialogStateContainer:e,edition:t}))),Object(r.a)(this,"handleGrantAccessActionClicked",()=>{this.setState({grantAccessClicked:!0})}),Object(r.a)(this,"handleFreeEditionPadlockClicked",()=>{this.setState({showFreeRestrictionDialog:!0})}),Object(r.a)(this,"onFreeDialogClosed",()=>{this.setState({showFreeRestrictionDialog:!1})})}hasRestrictions(e){var t,n;return Boolean((null!=(n=e)&&null!=(n=n.content)&&null!=(n=n.nodes)&&null!=(n=n[0])?n.hasRestrictions:n)||(null!=(t=e)&&null!=(t=t.content)&&null!=(t=t.nodes)&&null!=(t=t[0])?t.hasInheritedRestrictions:t))}hasInheritedRestrictionsOnly(e){var t,n;return Boolean((null!=(n=e)&&null!=(n=n.content)&&null!=(n=n.nodes)&&null!=(n=n[0])?n.hasInheritedRestrictions:n)&&!(null!=(t=e)&&null!=(t=t.content)&&null!=(t=t.nodes)&&null!=(t=t[0])?t.hasRestrictions:t))}getParentData(e){var t;const n=null!=(t=e)&&null!=(t=t.content)&&null!=(t=t.nodes)&&null!=(t=t[0])?t.ancestors:t;for(let a=n.length-1;a>=0;a--)if(n[a].hasRestrictions)return n[a]}shouldShowGrantAccessDialog({grantAccess:e,displayName:t,accountId:n,username:a}){return Boolean(e&&t&&n||a)}renderFreeEditionDialog(e,t){const{contentId:n}=this.props;return i.a.createElement(o.b,{query:de,variables:{contentId:n,status:M.a}},({data:a,loading:r,error:s})=>{var o;if(!a&&r||s)return null;const c=this.hasRestrictions(a),l=this.hasInheritedRestrictionsOnly(a),d=(null!=(o=a)&&null!=(o=o.content)&&null!=(o=o.nodes)&&null!=(o=o[0])&&null!=(o=o.ancestors)?o.length:o)-1>0;if(c){if(d&&l){const e=this.getParentData(a);return i.a.createElement(f,{isOpen:this.state.showFreeRestrictionDialog,onClose:this.onFreeDialogClosed,parentData:e,isChildPage:d,placement:"bottom-end"},i.a.createElement(le,{contentId:n,onClick:this.handleFreeEditionPadlockClicked}))}return t&&!this.state.hasAutoOpenedRestrictionDialog&&(this.makeHandleOpen(e,b.a.FREE)(),this.setState({hasAutoOpenedRestrictionDialog:!0})),i.a.createElement(le,{contentId:n,onClick:this.makeHandleOpen(e,b.a.FREE)})}return i.a.createElement(f,{isOpen:this.state.showFreeRestrictionDialog,onClose:this.onFreeDialogClosed,placement:"bottom-end"},i.a.createElement(le,{contentId:n,onClick:this.handleFreeEditionPadlockClicked}))})}renderGrantAccessDialogAndButton(e,t,n,a){const{contentId:r,markItemAsLoaded:s,headerItemsLoaded:o}=this.props,c=e(),l=i.a.createElement(le,{contentId:r,onClick:this.makeHandleOpen(t,a),markItemAsLoaded:s});return n&&o&&!this.state.grantAccessClicked?i.a.createElement(H,{isOpen:!0,onActionClick:this.handleGrantAccessActionClicked,accessType:"edit"===Object(w.a)(c,"accessType")?"edit":"view",accountId:Object(w.a)(c,"accountId"),displayName:Object(w.a)(c,"displayName"),legacyInfo:{username:Object(w.a)(c,"username")||"",userFullName:Object(w.a)(c,"userFullName")}},l):l}render(){return i.a.createElement(l.c,{to:[ue.a]},e=>i.a.createElement(ge,null,i.a.createElement(O.a,null,({error:t,edition:n})=>t?i.a.createElement(A.a,{error:t}):n?i.a.createElement(D.a.Consumer,null,({getQueryParams:t})=>{const{displayName:a,accountId:r,grantAccess:s,username:i}=t(),o=this.shouldShowGrantAccessDialog({grantAccess:s,displayName:a,accountId:r,username:i});return"FREE"===n?this.renderFreeEditionDialog(e,o):this.renderGrantAccessDialogAndButton(t,e,o,n)}):null)))}}function me(e){const t=Object(d.a)(),n=Object(se.a)(e.contentId);return i.a.createElement(pe,Object(a.a)(Object(a.a)(Object(a.a)({},e),t),{},{contentId:n}))}function he({actionSubjectId:e,createAnalyticsEvent:t,dialogStateContainer:n,edition:a,triggeredFrom:r}){const s=Object(y.b)();s.start({name:R.a.RESTRICTIONS_DIALOG,collect(e,t){t.stopOn(e.find(({action:e,name:t})=>"taskFail"===e&&t===R.a.RESTRICTIONS_DIALOG_LOAD)),t.stopOn(e.find(e=>Object(T.b)(e)&&e.name===R.a.RESTRICTIONS_DIALOG_APPLY))}}),s.start({name:R.a.RESTRICTIONS_DIALOG_LOAD,timeout:C.a.DEFAULT}),n.setIsOpen(!0,r),t({type:"sendUIEvent",data:{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:e,attributes:{source:"v2",triggeredFrom:r,edition:a}}}).fire()}},GFFF:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhMiAyIDAgMTAtNCAwdjNIMlY4YTQgNCAwIDExOCAwdjJoNmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem00IDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjREUzNTBCIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},I4DW:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhNCA0IDAgMTE4IDB2MmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem0yIDBoNFY4YTIgMiAwIDEwLTQgMHYyem0yIDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjREUzNTBCIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},KcIU:function(e,t,n){e.exports=n.p+"bE5oQaPsQ6.svg"},"M/rd":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("Czhu"),r=n("ERkP"),s=n.n(r),i=n("xBue"),o=n("Ua4J");const c=Object(r.forwardRef)(({children:e,className:t,target:n,testId:c,name:l,href:d=null,to:u=null,params:g={},onClick:p=(()=>{})},m)=>{const{matchSupportedRoute:h,onPageReload:I,preloadRoute:E,toUrl:f}=Object(r.useContext)(o.a),b=e=>{I(e.target.getAttribute("href"),!1),p(e)},O=a=>s.a.createElement("a",{href:a,className:t,onClick:b,target:n,rel:"_blank"===n?"noreferrer":void 0,"data-testid":c,ref:m},e),A=d||u;if(!A&&!l)return O("");const y=A&&{href:A},R=f(l,Object(a.a)(Object(a.a)({},g),y)),T=h(R);if(T){const n=async()=>E(T);return s.a.createElement(i.a,{to:`${T.pathname}${T.search}${T.hash}`,className:t,onClick:p,onMouseDownCapture:n,innerRef:m},e)}return O(R)})},MV18:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("ERkP"),r=n("hpu0");function s({name:e,attributes:t}){return Object(a.useEffect)(()=>Object(r.b)().succeed({name:e,attributes:t}),[e,t]),null}},TYX8:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d}));var a=n("ERkP"),r=n.n(a),s=n("L21V"),i=n("Efxu");const o=[{label:r.a.createElement(s.c,{id:"restrictions.dialog.permission-select.view",defaultMessage:"Can view",description:"User or group will be allowed to view content"}),value:i.d.VIEW},{label:r.a.createElement(s.c,{id:"restrictions.dialog.permission-select.edit",defaultMessage:"Can edit",description:"User or group will be allowed to edit content"}),value:i.d.EDIT}],c=r.a.createElement(s.c,{id:"restrictions.dialog.word.you",defaultMessage:"You",description:"current user label"}),l=["current","draft","archived"],d="confluence.frontend.restrictions-send-group-id"},W071:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("ERkP"),r=n("RjSO"),s=n("mTqE");const i=(e,t,n)=>{const{createAnalyticsEvent:i}=Object(r.a)(),o=Object(s.a)(e),c=Object(s.a)(t);return Object(a.useCallback)((...e)=>{const t="function"==typeof c.current?c.current(...e):c.current;i(t).fire(n),o.current(...e)},[i,o,c,n])}},WA38:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("Czhu"),r=n("HbGN"),s=n("ERkP"),i=n.n(s),o=(n("aWzz"),n("KIs4")),c=n("M/rd"),l=n("frZf");const d=e=>{const{href:t,to:n}=e,s=Object(r.a)(e,["href","to"]),d=n||t;return i.a.createElement(o.a,null,({featureFlags:t})=>{const n=d&&0!==d.indexOf("/")?"/"+d:d,r=t["confluence.frontend.people.directory"]&&!n.startsWith(l.a)?`${l.a}${n}`:n;return i.a.createElement(c.a,Object(a.a)(Object(a.a)({},e),{},{href:r},s))})}},cBMx:function(e,t,n){e.exports=n.p+"qQXXbLwsNC.svg"},cEjM:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={SHARE_PAGE:"share-page",PAGE_RESTRICTIONS:"page-restrictions",CONTENT_TOOLS:"content-tools",PAGE_FAVOURITE:"page-favourite",WATCH_PAGE:"watch-page",EDIT_PAGE:"edit-page",PAGE_COMMENTS:"page-comments"}},dNjd:function(e,t,n){e.exports=n.p+"qym67NaBz4.svg"},jLkM:function(e,t,n){var a=n("s+R0");e.exports=function(e){return e&&e.length?a(e):[]}}}]);
//# sourceMappingURL=42.KsBYpbosMP.js.map