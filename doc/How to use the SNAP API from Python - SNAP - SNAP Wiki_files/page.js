(window.webpackJsonp=window.webpackJsonp||[]).push([["page.fabriccomments~493df0b3","confluence-template-preview~4134d62c","page.editor-loader~04e538d5"],{"+CY+":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("zjfJ"),r=n("ERkP"),a=(n("aWzz"),n("+Aie")),i=n.n(a),c=n("5Asb");const s={},d=i.a.prototype.stopCallback;i.a.prototype.stopCallback=function(e,t,n){return!!!c.d.map(e=>t.classList.contains(e)).find(e=>e)&&d.call(this,e,t,n)};class l extends r.PureComponent{constructor(...e){super(...e),Object(o.a)(this,"listeners",{}),Object(o.a)(this,"lastFired",0),Object(o.a)(this,"_call",e=>{const t=+new Date;t-this.lastFired>=150&&(this.lastFired=t,this.props.listener(e))})}componentDidMount(){const{accelerator:e}=this.props;s[e],s[e]=!0,i.a.bind(e,this._call)}componentWillUnmount(){const{accelerator:e}=this.props;delete s[e],i.a.unbind(e)}render(){return null}}},"+Wce":function(e,t,n){"use strict";n.r(t);var o=n("Czhu"),r=n("zjfJ"),a=(n("aWzz"),n("ERkP")),i=n.n(a),c=n("sRL2"),s=n("gQ5V"),d=n("uDfI"),l=n("kD2R"),u=n("zr3P"),m=n.n(u),p=n("f6W2"),f=n("OC+J"),h=n("FdGg");const b=Object(a.createContext)({isLikesEnabled:!1});b.displayName="CommentContext";var g=n("Dsoe"),y=n("3VMZ"),E=n("jF39"),v=n("1N1n"),C=n("pclH"),O=n("6lDt"),w=n("Jn8G"),_=n("Iy7w"),j=n("EfWO"),I=n.n(j),k=n("nnRT"),A=n.n(k),x=n("lKOy"),T=n.n(x),S=n("uZih"),N=n.n(S),P=n("L21V"),M=n("u6In"),D=n("lZoD"),R=n("xsIe"),L=n("rhcL"),F=n("6z9Z"),H=n("J7sl"),B=n("A79P"),z=n("MV18"),$=n("o0lc"),U=n("daKX"),q=n("+CY+"),V=n("qhEF"),G=n("6OdC"),W=n.n(G),Y=(n("l1C2"),n("3IV/")),K=n("hATe"),Q=n("+e5P"),J=n("fLXQ");const X="addComment",Z="editComment",ee="replyComment",te=null,ne=409,oe=400,re=403,ae=404,ie="unhandled_error",ce="known_error";var se,de=n("Qdol"),le=n("EvIQ");const ue=Object(_.a)("div",{target:"e102he6i0"})({name:"1likia5",styles:"& > div > span{display:inline-block;width:100%;height:100%;}"}),me=Object(_.a)("div",{target:"e102he6i1"})("background-color:",e=>e.isStickyEditorEnabled?Y.N20:"inherit",";display:flex;border:",e=>e.isStickyEditorEnabled?"none":"1px #ccc solid;",";border-radius:3px;height:",e=>e.isStickyEditorEnabled?"40px":"42px",";color:#999;span{display:inline-flex;align-items:center;padding:10px;color:",e=>e.isStickyEditorEnabled?Y.N300:"inherit",";}:hover{cursor:text;}");let pe=Object(P.h)(se=class extends a.Component{render(){const{intl:{formatMessage:e},onClick:t,isStickyEditorEnabled:n}=this.props;return i.a.createElement(le.a,{target:"addCommentButton",tooltip:i.a.createElement(P.c,{id:"comment.add-prompt-nudge-tooltip",defaultMessage:"@mention someone to draw their attention to this page.",description:"nudge tooltip for comment box"}),wrapper:ue,source:de.a},o=>i.a.createElement(me,{isStickyEditorEnabled:n,id:"addCommentButton","data-test-id":"add-comment-button",title:o?null:e({id:"comment.name.tooltip"}),onClick:t},i.a.createElement(P.c,{id:"quick.comment.placeholder.message"})))}})||se;pe.displayName="CommentSpinner";var fe=n("lRcl");const he=Object(_.a)("div",{target:"ena6fes0"})("display:block;position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;border:1px solid ",Y.N40,";height:148px;width:100%;");class be extends a.Component{componentDidMount(){this.props.onDidMount()}render(){return i.a.createElement(he,null,i.a.createElement(fe.a,{size:"medium"}))}}be.displayName="CommentSpinner",be.defaultProps={onDidMount:()=>{}};var ge,ye,Ee,ve=n("E5Eb"),Ce=n("d8Ou"),Oe=n("EcEE"),we=n("gScn"),_e=n("hyqp"),je=n("O94r"),Ie=n.n(je),ke=n("RKN0"),Ae=n("IGvV"),xe=n("yLoQ"),Te=n("hpu0"),Se=n("jqY8"),Ne=n("JzH8"),Pe=n("v45N"),Me=n.n(Pe);var De,Re,Le=Object(Ae.a)(Me.a)(ge=Object(P.h)((Ee=ye=class extends a.Component{constructor(){super(),Object(r.a)(this,"_handleDialogClose",()=>{this.setState({dialogShown:!1})}),Object(r.a)(this,"_handleDialogLinkClick",()=>{const{comment:{id:e},replyToComment:t}=this.props;this.setState({dialogShown:!1}),t(e)}),this._onDeleteClick=this._onDeleteClick.bind(this),this._onReplyClick=this._onReplyClick.bind(this),this._onEditClick=this._onEditClick.bind(this),this.state={dialogShown:!1}}shouldComponentUpdate(e,t){return!A()(this.props,e)||!A()(this.state,t)}_onReplyClick(e){e.preventDefault();const{comment:t,replyToComment:n}=this.props;n(t.id)}_onEditClick(e){e.preventDefault();const{comment:{id:t},editComment:n,restrictEdit:o}=this.props;o?this.setState({dialogShown:!0}):n(t)}_onDeleteClick(){const{formatMessage:e}=this.props.intl;if(Object(Te.b)().start({name:y.a.DELETE_PAGE_COMMENT}),Object(Se.b)(e({id:"remove.comment.confirmation.message"}))){const{deleteComment:e,comment:{id:t}}=this.props;e(t).then(()=>{Object(Te.b)().succeed({name:y.a.DELETE_PAGE_COMMENT})},e=>{Object(Te.c)(y.a.DELETE_PAGE_COMMENT,e)})}else Object(Te.b)().abort({name:y.a.DELETE_PAGE_COMMENT,reason:"Delete Comment dialog closed"})}_renderEditDialogContent(){return i.a.createElement("div",{className:Me.a.editDisabledDialogWrapper},i.a.createElement("a",{onClick:this._handleDialogLinkClick,className:Me.a.editDisabledDialogLink},i.a.createElement(P.c,{id:"comment.edit.disable.link",defaultMessage:"Add a new comment "})),i.a.createElement(P.c,{id:"comment.edit.disable.explanation",defaultMessage:"since this one can't be edited; it contains content created in a legacy version of Confluence."}))}_renderLikesAction(e,t,n,o){return i.a.createElement("li",{key:e.id,className:Ie()("comment-action-like",t.actionItem,t.noDot)},i.a.createElement(xe.a,{contentId:e.id,containerId:n,containerType:o,isForComment:!0}))}render(){var e,t;const{contentId:n,contentType:o,comment:r,restrictEdit:a,canReplyToComment:c}=this.props,{dialogShown:s}=this.state,d=!!r.operations.find(e=>"update"===e.operation),l=!!r.operations.find(e=>"delete"===e.operation);return i.a.createElement("div",{className:Me.a.actions},i.a.createElement("ul",{className:Me.a.actionsList},c?i.a.createElement("li",{className:Ie()(Me.a.actionItem,"action-reply-comment")},i.a.createElement("a",{className:"comment-reply-link",onClick:this._onReplyClick},i.a.createElement(P.c,{id:"comment.reply"}))):null,d?i.a.createElement(ke.a,{onClose:this._handleDialogClose,content:this._renderEditDialogContent(),isOpen:s},i.a.createElement("li",{className:Ie()(Me.a.actionItem,"comment-action-edit")},i.a.createElement("a",{className:"comment-edit-link",onClick:this._onEditClick},a?i.a.createElement(P.c,{id:"comment.edit.not.available",defaultMessage:"Edit is not available",description:"Disabling Edit for Legacy comments with Unsupported content"}):i.a.createElement(P.c,{id:"comment.edit"})))):null,l?i.a.createElement("li",{className:Me.a.actionItem},i.a.createElement("a",{"data-test-id":"comment-delete-link",onClick:this._onDeleteClick,id:"remove-comment-"+r.id},i.a.createElement(P.c,{id:"comment.remove"}))):null,i.a.createElement(b.Consumer,null,({isLikesEnabled:e})=>e?this._renderLikesAction(r,Me.a,n,o):null),i.a.createElement("li",{className:Me.a.actionItem},i.a.createElement(Ne.a,{href:null!=(t=r)?t.linkWebui:t},null!=(e=r)?e.createdFriendly:e))))}},Object(r.a)(ye,"displayName","CommentActions"),ge=Ee))||ge)||ge;const Fe=Object(_.a)("div",{target:"e1y3tiqo0"})("&:first-of-type{margin-top:10px;}background:",({isFocused:e})=>e?Y.B50:"inherit",";padding:",({isFocused:e})=>e?"9px 0 9px 10px":0,";margin:",({isFocused:e,level:t})=>e?`-9px 0px 13px ${40*t-10}px`:`0px 0px 24px ${40*t}px`,";.right-shadow{z-index:7;}");Fe.displayName="CommentContainer";const He=Object(_.a)("div",{target:"e1y3tiqo1"})({name:"1wm4age",styles:"margin-top:-4px;"}),Be=Object(_.a)("div",{target:"e1y3tiqo2"})({name:"1uiq0nz",styles:"width:32px;height:32px;margin-right:10px;float:left;"});Be.displayName="AvatarContainer";const ze=Object(_.a)("div",{target:"e1y3tiqo3"})({name:"1gynfmi",styles:"margin-left:50px;margin-top:-12px;"});ze.displayName="ActionContainer";const $e=Object(_.a)("div",{target:"e1y3tiqo4"})({name:"zyk0it",styles:"font-size:16px;line-height:1.428;font-weight:700;"});$e.displayName="AuthorContainer";var Ue=Object(we.a)(Object(P.h)((Re=De=class extends a.Component{constructor(...e){super(...e),Object(r.a)(this,"state",{_root:void 0,isFallbackContent:!1}),Object(r.a)(this,"checkForFallbackContent",()=>{const{isFallbackContent:e}=this.state;e||this.setState({isFallbackContent:!0})}),Object(r.a)(this,"getCommentAuthorProps",()=>{const{comment:{createdBy:e}}=this.props;return e?{userId:e.accountId,displayName:e.displayName,src:e.avatarUrl,isAnonymous:!e.accountId}:{displayName:"Anonymous",isAnonymous:!0}}),Object(r.a)(this,"_setRoot",e=>this.setState({_root:e}))}renderAuthor(){const{userId:e,displayName:t,isAnonymous:n}=this.getCommentAuthorProps();return i.a.createElement($e,null,i.a.createElement(Oe.a,{userId:e,fullName:t,isAnonymous:n},i.a.createElement(ve.a,null,n?"Anonymous":t)))}renderAvatar(){const{canViewProfile:e}=this.props,{userId:t,src:n,isAnonymous:o}=this.getCommentAuthorProps();return i.a.createElement(Be,null,i.a.createElement(K.a,{canViewProfile:e,userId:t,src:n,isAnonymous:o}))}renderCommentContent(){const{comment:{id:e,adf:t}}=this.props;return i.a.createElement(He,{className:"wiki-content"},i.a.createElement(_e.a,{commentId:e,adf:t,onContentFallback:this.checkForFallbackContent,type:"pageComment"}))}render(){const{comment:e,isFocused:t,showAuthorLabel:n,commentActions:o,canReplyToComment:r,contentId:a,contentType:c,isStickyEditorEnabled:s}=this.props,{isFallbackContent:d}=this.state,{deleteComment:l,editComment:u,replyToComment:m}=o;return i.a.createElement(Fe,{key:e.id,id:"comment-"+(e.id?e.id:"new"),"data-test-id":"comment-"+(e.id?e.id:"new"),className:"fabric-comment",isFocused:t,level:e.ancestors?e.ancestors.length:0,isStickyEditorEnabled:s},i.a.createElement(Ce.a,{author:this.renderAuthor(),avatar:this.renderAvatar(),content:this.renderCommentContent(),type:e.createdByAuthor&&n?"author":""}),o&&i.a.createElement(ze,null,i.a.createElement(Le,{comment:e,contentId:a,contentType:c,deleteComment:l,editComment:u,replyToComment:m,canReplyToComment:r,restrictEdit:d})))}},Object(r.a)(De,"defaultProps",{canViewProfile:!1,isFocused:!1,showAuthorLabel:!1,isStickyEditorEnabled:!1}),Re)));const qe=Object(_.a)("div",{target:"e1bpsedq0"})({name:"zu44bz",styles:"margin-left:51px;"}),Ve=Object(_.a)("a",{target:"e1bpsedq1"})({name:"4g6ai3",styles:"cursor:pointer;"}),Ge=()=>{window.location.reload()},We=({value:e})=>i.a.createElement(Ve,{onClick:Ge},i.a.createElement(P.c,{id:"comment.refresh-link",description:"Reload browser",defaultMessage:e},e=>e)),Ye=({errorMessage:e})=>i.a.createElement(qe,{"data-cy":"save-comment-warning"},i.a.createElement(R.a,{appearance:"warning"},i.a.createElement(P.c,Object(o.a)(Object(o.a)({},e),{},{tagName:"p",values:{refresh:i.a.createElement(We,{value:"refresh"}),Refresh:i.a.createElement(We,{value:"Refresh"})}}))));var Ke,Qe,Je;const Xe=()=>{},Ze=(e,t,n,o)=>{if("editor"===n)return"view"===o.mode||e.isEditorLoaded===t.isEditorLoaded};var et={name:"1dvqcrr",styles:"position:relative;padding:0;margin-bottom:24px;overflow-y:visible;min-height:35px;overflow-wrap:break-word;"};const tt=Object(_.a)("div",{target:"e2juydw0"})(()=>et," margin-left:",e=>40*e.comment.depthLevel,"px;padding-top:20px;"),nt=Object(_.a)("div",{target:"e2juydw1"})({name:"1uiq0nz",styles:"width:32px;height:32px;margin-right:10px;float:left;"}),ot=Object(_.a)("div",{target:"e2juydw2"})('position:sticky;bottom:0px;width:100%;background:white !important;padding-bottom:16px;border-radius:3px;margin-left:-10px;padding-left:10px;&:before{content:" ";display:block;margin-bottom:16px;border-bottom:1px solid ',Y.N30,";}z-index:8;"),rt=Object(_.a)("div",{target:"e2juydw3"})({name:"1do3hbd",styles:"position:relative;margin-left:51px;"});let at=Object(M.a)()((Je=Qe=class extends a.Component{constructor(...e){super(...e),Object(r.a)(this,"_editorSaveHandler",e=>{const t={},{editorSaveHandler:n,contentId:r,comment:{id:a},editor:{mode:i}}=this.props;if("editComment"===i){const{comment:{version:{number:e}}}=this.props;t.number=e+1}return n(Object(o.a)({contentId:r,commentId:a,version:t},e))}),this._editorCancelHandler=this._editorCancelHandler.bind(this),this._editorAfterActivate=this._editorAfterActivate.bind(this)}shouldComponentUpdate(e){const t=this.props.mode===e.mode&&this.props.editor.errorType===e.editor.errorType?Ze:Xe;return!W()(this.props,e,t)}_editorCancelHandler(e){return this.props.editorCancelHandler(e)}_editorAfterActivate(e){const{mode:t,isStickyEditorEnabled:n}=this.props;"add"===t&&n&&window.scrollTo(0,document.body.scrollHeight),Object(J.g)(e,{topGap:60,bottomGap:10,duration:100})}_renderCommentEditor(){const{comment:e,onEditorLoaded:t,contentId:n,contentType:o,editor:r,spaceId:a,mode:c}=this.props;return"edit"!==c||"replyComment"===r.mode||e.adf?i.a.createElement(Q.a,{contentId:n,contentType:o,mode:"edit"===c&&"replyComment"!==r.mode?"edit":"create",spaceId:a,saveHandler:this._editorSaveHandler,content:e.adf,cancelHandler:this._editorCancelHandler,onEditorLoaded:t,afterActivate:this._editorAfterActivate}):null}render(){const{comment:e,contentId:t,contentType:n,onClickCommentAddPrompt:r,editor:a,isEditorEnabled:c,mode:s,isFocused:d,isHighlighted:l,commentActions:u,canViewProfile:m,userInfo:p,showAuthorLabel:f,isStickyEditorEnabled:h,canReplyToComment:b}=this.props,g={};"view"!==s&&"edit"!==s||(g.id="comment-"+e.id,g["data-test-id"]="comment-"+(e&&e.id?e.id:"new")),"add"===s&&(g.id="addcomment");"replyComment"===a.mode&&(g["data-parent-comment-id"]=e.id);const y="add"===s&&c&&!a.isEditorLoaded,E="edit"===s&&(!a.isEditorLoaded||!e.adf&&"editComment"===a.mode),v=y||E,C=h&&"add"===s?ot:tt;return"view"===s?i.a.createElement(Ue,{contentId:t,contentType:n,comment:e,commentActions:u,canReplyToComment:b,canViewProfile:m,isFocused:d||l,showAuthorLabel:f,isStickyEditorEnabled:h}):i.a.createElement(C,Object(o.a)(Object(o.a)({},g),{},{comment:e}),i.a.createElement(nt,null,i.a.createElement(K.a,{canViewProfile:m,src:p.avatarUrl,userId:p.accountId,isAnonymous:!p.accountId})),i.a.createElement(rt,null,"edit"===s?this._renderCommentEditor():null,"add"!==s?null:c?this._renderCommentEditor():i.a.createElement(pe,{onClick:r,isStickyEditorEnabled:h}),v?i.a.createElement(be,{onDidMount:this._editorAfterActivate}):null),a.errorType!==ce||a.commentId!==e.id&&"newComment"!==a.commentId?null:i.a.createElement(Ye,{errorMessage:a.formattedErrorMessage}))}},Object(r.a)(Qe,"defaultProps",{comment:{},canViewProfile:!1,isFocused:!1,isHighlighted:!1,showAuthorLabel:!1,userInfo:{},isEditorEnabled:!1,commentActions:{},editor:{},editorSaveHandler:()=>{},editorCancelHandler:()=>{},onClickCommentAddPrompt:()=>{},onEditorLoaded:()=>{},isStickyEditorEnabled:!1,canReplyToComment:!1}),Ke=Je))||Ke;const it=Object(_.a)("div",{target:"e9xvevt0"})({name:"odz94x",styles:"margin-top:5px;"});class ct extends a.Component{shouldComponentUpdate(e){return!A()(this.props,e)}render(){const{contentType:e,editor:t,userInfo:n,canViewProfile:r,contentId:a,editorSaveHandler:c,editorCancelHandler:s,comments:d,highlightedComments:l,commentActions:u,focusOnCommentId:m,showAuthorLabel:p,onEditorLoaded:f,spaceId:h,canReplyToComment:b,isStickyEditorEnabled:g}=this.props,y=[],E={contentId:a,contentType:e,commentActions:u,canViewProfile:r,showAuthorLabel:p,editor:t,editorSaveHandler:c,editorCancelHandler:s,onEditorLoaded:f,spaceId:h,isStickyEditorEnabled:g,canReplyToComment:b};return d.forEach(e=>{const r=Object(o.a)(Object(o.a)({},E),{},{comment:e,userInfo:e.createdBy,isFocused:m===e.id,isHighlighted:l.indexOf(e.id)>-1,mode:t.commentId===e.id&&"editComment"===t.mode?"edit":"view"});if(y.push(i.a.createElement(at,Object(o.a)({key:e.id},r))),t.commentId===e.id&&"replyComment"===t.mode){const t=Object(o.a)(Object(o.a)({},E),{},{userInfo:n,mode:"edit",isEditorEnabled:!0,comment:{id:e.id,depthLevel:e.depthLevel+1}});y.push(i.a.createElement(at,Object(o.a)({key:e.id+"-reply"},t)))}}),i.a.createElement(it,{className:"comment-threads top-level",id:"page-comments","data-test-id":"page-comments"},y)}}Object(r.a)(ct,"defaultProps",{highlightedComments:[],onEditorLoaded:()=>{}});var st=ct,dt=n("Xzcx"),lt=n("utTn"),ut=n("F4Ur"),mt=n("rc7/");const pt=Object(P.g)({emptyComment:{id:"comment-section.empty",description:"Message to be displayed when user tries to comment without any content",defaultMessage:"Comment text is empty. Cannot create empty comments."},errorTitle:{id:"comment-section.title",defaultMessage:"We couldn’t save your comment",description:"Generic title for all Error messages for Page comments"},deleteErrorTitle:{id:"comment-section-delete.title",defaultMessage:"We couldn’t delete your comment",description:"Title to display when Delete page comment fails"},genericError:{id:"comment-section.generic-error",description:"Generic Error displayed when saving or deleting comment fails for unhandled cases",defaultMessage:"If the problem persists, contact {atlassianSupportLink} or your space admin so they can troubleshoot the issue."},editVersionError:{id:"comment-section.edit-version-warning",description:"Message displayed to User when they Edit a comment thats outdated",defaultMessage:"You aren't editing the latest version of your comment. Copy your text, {refresh} the page, and save your comment again."},editNotFoundError:{id:"comment-section.edit-not-found-warning",description:"Message displayed to User when they Edit a comment thats deleted",defaultMessage:"You're editing a comment that’s recently been deleted. {Refresh} the page to see the latest page comments."},replyError:{id:"comment-section.reply-warning",description:"Message displayed to User when they Reply to a comment thats deleted",defaultMessage:"You're replying to a comment that’s recently been deleted. {Refresh} the page to see the latest page comments."},permissionsError:{id:"comment-section.permission-warning",description:"Message displayed to User when they get an error indicating they don't have permissions to add the comment",defaultMessage:"You don’t have permission to comment here."},editCommentNotFound:{id:"comment-section-edit.not.found",defaultMessage:"The comment you are trying to edit cannot be found. It may have been deleted.",description:"User visits a page/blog through an email or link to edit comment and comment does not exist"},editCommentPermission:{id:"comment-section.edit.permission",defaultMessage:"Permissions settings don’t allow you to edit this comment.",description:"User visits a page/blog through email or link to edit comment and does not have edit comment permissions"},userUnauthorizedError:{id:"comment-section.user-unauthorized",description:"Message displayed to User when they get an error indicating their session has expired",defaultMessage:"Your session expired, and you need to {refresh} the page before continuing."}});var ft=n("8TdO"),ht=n("H5qd"),bt=n.n(ht);const gt=bt.a`query CommentPermissionsQuery($contentId:ID!){content(id:$contentId){nodes{id operations{operation targetType}}}}`,yt=bt.a`query CommentVersionQuery($contentId:ID!){content(id:$contentId){nodes{id version{number}}}}`,Et=bt.a`query CommentQuery($contentId:ID!){content(id:$contentId){nodes{id}}}`,vt=async e=>{var t;return(null!=(t=await Object(ft.getApolloClient)().query({query:Et,variables:{contentId:e},fetchPolicy:"network-only"}))&&null!=(t=t.data)&&null!=(t=t.content)&&null!=(t=t.nodes)?t[0]:t)||null},Ct=({callAnalyticsEvent:e,attributes:t})=>{e({data:{source:"viewPage",action:"failed",actionSubject:"commentCreation",actionSubjectId:"pageComment",attributes:t},type:"sendOperationalEvent"})},Ot=async({error:e,canAddComments:t,callAnalyticsEvent:n,contentId:o,mode:r,commentId:a,version:i})=>{var c;let s=ie,d=pt.genericError,l={};const u=(null!=(c=e)&&null!=(c=c.graphQLErrors)&&null!=(c=c[0])&&null!=(c=c.originalError)&&null!=(c=c.response)?c.status:c)||"";switch(u){case ne:if(r===Z){const t=await(async e=>{var t;const n=await Object(ft.getApolloClient)().query({query:yt,variables:{contentId:e},fetchPolicy:"network-only"}),{version:o}=(null!=(t=n)&&null!=(t=t.data)&&null!=(t=t.content)&&null!=(t=t.nodes)?t[0]:t)||null;return o})(a);t&&i.number<=t.number&&(s=ce,d=pt.editVersionError,Object(ut.a)(e)),l={commentVersionInPayload:i.number,commentVersionInServer:t&&t.number,errorCode:u},Ct({callAnalyticsEvent:n,attributes:l})}break;case oe:if(r===ee){const t=await vt(a);t||(s=ce,d=pt.replyError,Object(ut.a)(e)),l={originalReplyToCommentId:a,latestReplyToCommentId:t?t.id:"",errorCode:u},Ct({callAnalyticsEvent:n,attributes:l})}break;case re:let c,p,f;try{p=await(async e=>{var t;const n=await Object(ft.getApolloClient)().query({query:gt,variables:{contentId:e},fetchPolicy:"network-only"}),{operations:o}=(null!=(t=n)&&null!=(t=t.data)&&null!=(t=t.content)&&null!=(t=t.nodes)?t[0]:t)||[];return Boolean(o.find(e=>"create"===e.operation&&"comment"===e.targetType))})(o),t&&!p&&(s=ce,d=pt.permissionsError,Object(ut.a)(e))}catch(m){Object(mt.b)(m)&&(s=ce,d=pt.userUnauthorizedError,c=!0,Object(ut.a)(m)),f=m}l={originalPermission:t,latestPermission:p,errorCode:u,isUserUnauthorized:c,errorMessage:f},Ct({callAnalyticsEvent:n,attributes:l});break;case ae:if(r===Z){const t=await vt(a);t||(s=ce,d=pt.editNotFoundError,Object(ut.a)(e)),l={originalEditCommentId:a,latestEditCommentId:t?t.id:"",errorCode:u},Ct({callAnalyticsEvent:n,attributes:l})}}return{errorType:s,formattedErrorMessage:d}};var wt=n("/MSF");const _t=({flags:e,errorTitle:t,errorMessage:n,onCloseFlag:r})=>(Object(a.useEffect)(()=>{e.showErrorFlag({onClose:r,title:i.a.createElement(P.c,Object(o.a)({},t)),description:i.a.createElement(P.c,Object(o.a)(Object(o.a)({},n),{},{values:{atlassianSupportLink:i.a.createElement(wt.b,null)}}))})},[]),null);var jt,It;const kt={formattedErrorMessage:{},errorType:null,errorDetails:""},At=Object(U.a)("comments-section"),xt=Object(_.a)("div",{target:"e1xamcc80"})({name:"1x2gd0h",styles:"list-style:none;padding-top:1px;"}),Tt=Object(F.b)((jt=Object(M.a)(),Object(P.h)(It=jt(It=class extends a.Component{constructor(...e){super(...e),Object(r.a)(this,"state",{commentsIds:this.props.commentsIds,updatedCommentsIds:[],hasNextPage:this.props.hasNextPage,editorState:{commentId:null,mode:te,formattedErrorMessage:{},errorType:null,isEditorLoaded:!1,errorDetails:""}}),Object(r.a)(this,"_showEditor",e=>{Object(H.b)({name:y.a.ADD_PAGE_COMMENT,attributes:{editor:w.a.FABRIC,mode:e.mode}},{name:y.a.ADD_PAGE_COMMENT_LOAD},{name:y.a.ADD_PAGE_COMMENT_PUBLISH}),this.setState({editorState:Object(o.a)(Object(o.a)(Object(o.a)({},this.state.editorState),e),kt)})}),Object(r.a)(this,"_hideEditor",()=>{const e=Object(o.a)({commentId:null,mode:te,isEditorLoaded:!1},kt);this.setState({editorState:Object(o.a)(Object(o.a)({},this.state.editorState),e)})}),Object(r.a)(this,"_onEditorLoaded",()=>{const{experienceTracker:e}=this.props;e.succeed({name:y.a.ADD_PAGE_COMMENT_LOAD}),this.setState({editorState:Object(o.a)(Object(o.a)({},this.state.editorState),{},{isEditorLoaded:!0})})}),Object(r.a)(this,"_replyCommentAction",e=>{this._showEditor({commentId:e,mode:ee})}),Object(r.a)(this,"_editCommentAction",e=>{this._showEditor({mode:Z,commentId:e})}),Object(r.a)(this,"_showAddCommentEditor",e=>{e&&e.preventDefault(),this._warnCommentLost(()=>{this._showEditor({mode:X,commentId:"newComment"})})}),Object(r.a)(this,"_triggerShowAddCommentEditor",e=>{setTimeout(()=>this.scrollToElement("addcomment"),0),this._showAddCommentEditor(e)}),Object(r.a)(this,"_warnCommentLost",e=>{const{formatMessage:t}=this.props.intl;this.state.editorState&&this.state.editorState.isEditorLoaded&&!Object(Se.b)(t({id:"unsaved.comment.lost"}))||e()}),Object(r.a)(this,"_callAnalyticsEvent",e=>{this.props.createAnalyticsEvent(e).fire()}),Object(r.a)(this,"_getCommentAnalyticsObject",e=>{const{id:t,spaceId:n,ownerId:o,requestType:r,contentType:a,parentId:i}=e;return{containerType:"space",containerId:n,source:"viewPageScreen",objectType:"page",objectId:o.toString(),action:"editComment"===r?"updated":"created",actionSubject:"comment",actionSubjectId:t,attributes:{commentType:"page",pageType:a,parentCommentId:i.toString(),editor:"v2"}}}),Object(r.a)(this,"handleSuccess",e=>{const{onRefetchComments:t,spaceId:n,contentType:o,experienceTracker:r}=this.props,{editorState:a}=this.state,{data:{experimentalSaveFabricComment:{id:i,ancestors:c,container:s}}}=e,d=c[0]&&c[0].id||0,l=s&&s.id,u=this._getCommentAnalyticsObject({id:i,spaceId:n,parentId:d,contentType:o,ownerId:l,requestType:a.mode});this._callAnalyticsEvent({data:u,type:"sendTrackEvent"});t({commentId:i,threadLastCommentId:this._getThreadLastCommentId(a.commentId),parentId:d,mode:a.mode}).then(()=>{this._hideEditor(),this.state.editorState.mode===te&&r.succeed({name:y.a.ADD_PAGE_COMMENT_PUBLISH})})}),Object(r.a)(this,"handleError",async(e,t)=>{const{canAddComments:n,contentId:r}=this.props,{editorState:{mode:a,commentId:i}}=this.state;let c,s;try{({errorType:c,formattedErrorMessage:s}=await Ot({error:e,canAddComments:n,callAnalyticsEvent:this._callAnalyticsEvent,contentId:r,mode:a,commentId:i,version:t}))}catch(l){At.error`An error occurred while processing Comment Errors - ${l}`}c===ce&&this._abortExperience(e);const d={errorType:c||ie,formattedErrorMessage:s||pt.genericError,errorDetails:e};return this.setState({editorState:Object(o.a)(Object(o.a)({},this.state.editorState),d)}),Promise.reject()}),Object(r.a)(this,"_editorSaveHandler",e=>{const{saveComment:t,experienceTracker:n}=this.props,{editorState:r}=this.state;if(Object(L.e)(e.adf)){const e={formattedErrorMessage:pt.emptyComment,errorType:ce};return this.setState({editorState:Object(o.a)(Object(o.a)({},this.state.editorState),e)}),Promise.reject()}const{mode:a}=r;return e.requestType=a,a===ee&&(e.showCommentAfter=this._getThreadLastCommentId(r.commentId)),a!==te&&n.start({name:y.a.ADD_PAGE_COMMENT_PUBLISH,timeout:B.a.EDITOR_PUBLISH,attributes:{editor:w.a.FABRIC,mode:a}}),t(e).then(this.handleSuccess).catch(t=>{const{version:n}=e;return this.handleError(t,n)}).finally(this._removeSlowCommentURLParams)}),Object(r.a)(this,"_editorCancelHandler",({isEditorAborted:e})=>{const{experienceTracker:t}=this.props;this._hideEditor(),e&&(this._removeSlowCommentURLParams(),t.abort({name:y.a.ADD_PAGE_COMMENT,reason:"CommentsSectionFabricComponent _editorCancelHandler"}))}),Object(r.a)(this,"_removeSlowCommentURLParams",()=>{const{replace:e,location:t}=this.props,n=t.query,r=["showCommentArea","showComments","editComment","commentId"];if(!r.map(e=>void 0!==n[e]).filter(e=>e).length)return;const a=N()(t.query,r);e(Object(o.a)(Object(o.a)({},t),{},{query:a,search:I.a.format({query:a})}))}),Object(r.a)(this,"_onDeleteComment",e=>this.props.deleteComment(e)),Object(r.a)(this,"_onReplyToComment",e=>{this._warnCommentLost(()=>this._replyCommentAction(e))}),Object(r.a)(this,"_onEditComment",e=>{this._warnCommentLost(()=>this._editCommentAction(e))}),Object(r.a)(this,"_getCommentActions",()=>({deleteComment:this._onDeleteComment,replyToComment:this._onReplyToComment,editComment:this._onEditComment})),Object(r.a)(this,"_closeEditorError",()=>{this.setState({editorState:Object(o.a)(Object(o.a)({},this.state.editorState),{errorType:"",formattedErrorMessage:{}})})}),Object(r.a)(this,"_abortExperience",e=>{const{experienceTracker:t}=this.props;t.abort({name:y.a.ADD_PAGE_COMMENT,reason:"A warning is displayed to User on how to recover for the error -  "+e})}),Object(r.a)(this,"_openCommentEditor",e=>{e.stopPropagation(),this._triggerShowAddCommentEditor(),this._callAnalyticsEvent({data:{source:"viewPage",action:"pressed",actionSubject:"keyboardShortcut",actionSubjectId:"createComment",attributes:{key:"m"}},type:"sendUIEvent"})})}static getDerivedStateFromProps(e,t){return!A()(t.commentsIds,e.commentsIds)&&!1===t.hasNextPage&&!1===e.hasNextPage&&e.hasFetchedComments?{commentsIds:e.commentsIds,hasNextPage:e.hasNextPage,updatedCommentsIds:T()(e.commentsIds,t.commentsIds)}:Object(o.a)(Object(o.a)({},t),{},{commentsIds:e.commentsIds,hasNextPage:e.hasNextPage})}componentDidMount(){const{replyToCommentId:e,shouldOpenAddComment:t,openEditCommentId:n,isEditCommentFound:o,focusOnCommentId:r,readyToScrollToElement:a,canAddComments:i,isEditCommentAllowed:c}=this.props,{editorState:s}=this.state;n&&o&&(this.scrollToElement("comment-"+n),c&&this._editCommentAction(n)),e&&s.commentId!==e&&i&&this._replyCommentAction(e),t&&i&&this._triggerShowAddCommentEditor(),r&&a&&this.scrollToElement("comment-"+r),t&&a&&this.scrollToElement("addcomment")}componentDidUpdate(){Object(lt.d)()}componentWillUnmount(){this._hideEditor()}scrollToElement(e){const t=Object(dt.d)(e);t&&this.scrollElementIntoView&&this.scrollElementIntoView(t)}_getThreadLastCommentId(e){const{commentsData:t}=this.props;let n,o,r,a;return t.forEach(t=>{n||(void 0!==o&&(o>=t.depthLevel?n=r:a=t.id),t.id===e&&(o=t.depthLevel),r=t.id)}),n||(n=a||e),n}_canViewProfile(){const{isAnonymous:e,currentUserCanViewProfile:t}=this.props.currentUserInfo;return e?!0===t:!1!==t}_isAddCommentEditorEnabled(){const{editorState:e}=this.state;return"newComment"===e.commentId&&e.mode===X}_renderHeadLine(){const{totalComments:e}=this.props;return e?i.a.createElement("h2",{"data-test-id":"comments-count"},1===e?i.a.createElement(P.c,{id:"comment.singular",values:{0:e}}):i.a.createElement(P.c,{id:"comment.plural",values:{0:e}})):null}_renderEditCommentErrorFlag(){const{openEditCommentId:e,isEditCommentFound:t,isEditCommentAllowed:n}=this.props;return e&&!t?i.a.createElement(R.a,{appearance:"warning"},i.a.createElement(P.c,Object(o.a)({},pt.editCommentNotFound))):t&&!n?i.a.createElement(R.a,{appearance:"warning"},i.a.createElement(P.c,Object(o.a)({},pt.permissionsError))):null}_renderAddCommentErrorFlag(){const{canAddComments:e,replyToCommentId:t,shouldOpenAddComment:n}=this.props;return(t||n)&&!e?i.a.createElement(R.a,{appearance:"warning"},i.a.createElement(P.c,Object(o.a)({},pt.permissionsError))):null}_renderCommentsList(){const{contentId:e,currentUserInfo:t,commentsData:n,contentType:r,focusOnCommentId:a,editedCommentsIds:c,atlToken:s,spaceId:d,isStickyEditorEnabled:l,canAddComments:u}=this.props,{updatedCommentsIds:m,commentsIds:p,editorState:f}=this.state,h={atlToken:s,commentsIds:p,contentType:r,contentId:e,comments:n,commentActions:this._getCommentActions(),showAuthorLabel:"blogpost"===r,focusOnCommentId:a,highlightedComments:c.length>0?c:m,userInfo:t,editor:f,canViewProfile:this._canViewProfile(),editorSaveHandler:this._editorSaveHandler,editorCancelHandler:this._editorCancelHandler,onEditorLoaded:this._onEditorLoaded,spaceId:d,isStickyEditorEnabled:l,canReplyToComment:u};return i.a.createElement(st,Object(o.a)({},h))}_renderAddCommentField(){const{contentId:e,canAddComments:t,currentUserInfo:n,atlToken:r,contentType:a,spaceId:c,isStickyEditorEnabled:s}=this.props,{editorState:d}=this.state;if(!t&&!d.errorType)return null;const l="replyComment"===d.mode||"editComment"===d.mode;if(s&&l)return null;const u={contentId:e,atlToken:r,mode:"add",userInfo:n,isEditorEnabled:this._isAddCommentEditorEnabled(),onClickCommentAddPrompt:this._showAddCommentEditor,editor:d,canViewProfile:this._canViewProfile(),editorSaveHandler:this._editorSaveHandler,editorCancelHandler:this._editorCancelHandler,onEditorLoaded:this._onEditorLoaded,contentType:a,spaceId:c,isStickyEditorEnabled:s};return i.a.createElement(at,Object(o.a)({},u))}_renderErrorFlag(e){const{editorState:t}=this.state,{experienceTracker:n}=this.props;return n.stopOnError({name:y.a.ADD_PAGE_COMMENT,error:t.errorDetails}),i.a.createElement(_t,{flags:e,errorTitle:pt.errorTitle,errorMessage:pt.genericError,onCloseFlag:this._closeEditorError})}_renderDeleteCommentErrorMessage(e){return i.a.createElement(_t,{flags:e,errorTitle:pt.deleteErrorTitle,errorMessage:pt.genericError,onCloseFlag:this._closeEditorError})}render(){const{deleteCommentError:e,totalComments:t,hasNextPage:n,isStickyEditorEnabled:o}=this.props,{editorState:r}=this.state;return i.a.createElement(D.c,{to:[V.a]},a=>i.a.createElement(xt,{isStickyEditorEnabled:o,id:"comments-section-fabric","data-test-id":"comments-section-fabric-new"},this._renderHeadLine(),this._renderEditCommentErrorFlag(),this._renderAddCommentErrorFlag(),e?this._renderDeleteCommentErrorMessage(a):null,this._renderCommentsList(),this._renderAddCommentField(),r.errorType===ie?this._renderErrorFlag(a):null,n?null:i.a.createElement(z.a,{name:y.a.VIEW_PAGE_COMMENTS,attributes:{totalComments:t}}),i.a.createElement($.a,null,({scrollToElement:e})=>(this.scrollElementIntoView=e,null)),i.a.createElement(q.a,{accelerator:"m",listener:this._openCommentEditor})))}})||It)||It)),St=bt.a`fragment authorFragment on AtlassianUser{displayName photos{isPrimary value}id}`,Nt=bt.a`fragment commentDataFragment on Content{id ancestors{id}history{createdBy{type profilePicture{path}displayName ...on KnownUser{accountId}...on User{accountId}}}links{webui}operations{operation}version{number friendlyWhen when by{type displayName ...on KnownUser{accountId}...on User{accountId}}}status}`,Pt=bt.a`fragment commentListFragment on PaginatedContentList{count pageInfo{hasNextPage endCursor}}`,Mt=bt.a`fragment contentFragment on Content{id operations{operation targetType}space{id homepageId}type history{createdBy{...on KnownUser{accountId}...on User{accountId}}}}`,Dt=bt.a`query CommentsSectionFabricQuery($offset:Int$first:Int$contentId:ID!){content(id:$contentId){child{comment(offset:$offset first:$first location:["footer"]depth:"all"){...commentListFragment edges{cursor node{...commentDataFragment body{atlas_doc_format{value}view{value webresource{keys}}}}}}}nodes{...contentFragment}}user(current:true){...authorFragment}}${St}${Mt}${Pt}${Nt}`,Rt=bt.a`mutation CommentsSectionFabricQuerySaveComment($params:ExperimentalFabricCommentInput)@experimental@SLA{experimentalSaveFabricComment(params:$params){id ancestors{id}container{id}extensions{location}}}`,Lt=bt.a`mutation CommentsSectionQueryDeleteComment($contentId:ID!)@experimental{experimentalDeleteComment(contentId:$contentId){contentId statusCode}}`,Ft=bt.a`query CommentsSectionGetSingleFabricCommentQuery($contentId:ID!){content(id:$contentId){nodes{...commentDataFragment body{atlas_doc_format{value}view{value webresource{keys}}}}}}${Nt}`;class Ht extends Error{constructor(...e){super(...e);const t=e[0];this.message=t.message,this.graphQLErrors=t.graphQLErrors}}const Bt=Object(d.connect)((function(e,t){const{commentsData:n,hasFetchedComments:o}=t,r=n.map(e=>e.id),a=Object(p.a)(e),{focusedCommentId:i,replyToComment:c,showCommentArea:s,editComment:d,commentId:l}=a.query,u=i||c,m="true"===d&&l||"",f=!!m&&-1!==r.indexOf(m),h=!(!f||!n.find(e=>e.id===m).operations.find(e=>"update"===e.operation));return{focusOnCommentId:u,replyToCommentId:c,shouldOpenAddComment:"true"===s,openEditCommentId:m,isEditCommentFound:f,readyToScrollToElement:o,hasFetched:o,commentsData:n,commentsIds:r,location:a,isEditCommentAllowed:h}}),(function(e){return{replace:t=>e(Object(l.replace)(t))}}))(Tt);let zt=[];const $t=Object(c.a)(class extends a.Component{constructor(...e){super(...e),Object(r.a)(this,"state",{webPanels:null}),Object(r.a)(this,"_loadedCursor",{}),Object(r.a)(this,"fetchWebPanels",()=>{const{contentId:e,client:t}=this.props,n={contentId:e,location:O.a.ATL_PAGE_CONTENT_FOOTER_ACTIONS};t.query({query:C.a,variables:n,fetchPolicy:"cache-first"}).then(e=>{var t;const{data:n}=e,o=null!=(t=n)?t.webPanels:t;this.setState({webPanels:o})})}),Object(r.a)(this,"_getCommentVersion",e=>{var t,n,o,r;return{id:null!=(r=e)&&null!=(r=r.node)?r.id:r,by:null!=(o=e)&&null!=(o=o.node)&&null!=(o=o.version)?o.by:o,when:null!=(n=e)&&null!=(n=n.node)&&null!=(n=n.version)?n.when:n,number:null!=(t=e)&&null!=(t=t.node)&&null!=(t=t.version)?t.number:t}}),Object(r.a)(this,"_buildUserInfo",e=>{var t,n,o,r;return{displayName:null!=(r=e)?r.displayName:r,avatarUrl:(null!=(o=e)&&null!=(o=o.photos)?o.length:o)&&(null!=(n=e)?n.photos:n).find(e=>e.isPrimary).value,accountId:null!=(t=e)?t.id:t}}),Object(r.a)(this,"_saveComment",(e,t,n)=>o=>{const{contentId:r,commentId:a="",adf:i,requestType:c,version:s}=o;return n({variables:{params:{location:"footer",contentId:r||e,contentType:t,adfContent:JSON.stringify(i),commentId:a,requestType:c,version:s}}})}),Object(r.a)(this,"_deleteComment",(e,t)=>e=>t({variables:{contentId:e}})),Object(r.a)(this,"_onRefetchComments",(e,t)=>{const{commentId:n}=e;return t({variables:{contentId:n},query:Ft,updateQuery:(t,{fetchMoreResult:o})=>{var r;const a=null!=(r=o)&&null!=(r=r.content)&&null!=(r=r.nodes)?r[0]:r;if(!a)return t;const i=m()(t);let c=[];const{threadLastCommentId:s,parentId:d,mode:l}=e;if("editComment"===l){const e=t.content.child.comment.edges.findIndex(e=>e.node.id===n);c=[...i.content.child.comment.edges.slice(0,e),...[{cursor:e.toString(),node:a,__typename:"ContentEdge"}],...i.content.child.comment.edges.slice(e+1)],zt=[n]}else if("replyComment"===l){const e=s||d,n=t.content.child.comment.edges.findIndex(t=>t.node.id===e);c=[...i.content.child.comment.edges.slice(0,n+1),...[{cursor:(n+1).toString(),node:a,__typename:"ContentEdge"}],...i.content.child.comment.edges.slice(n+1)],zt=[]}else"addComment"!==l&&"0"!==d||(c=i.content.child.comment.edges.concat([{cursor:t.content.child.comment.count.toString(),node:a,__typename:"ContentEdge"}]),zt=[]);return Object.assign({},t,{content:{child:{comment:{count:c.length,pageInfo:{endCursor:(c.length-1).toString(),hasNextPage:!1,__typename:i.content.child.comment.pageInfo.__typename},edges:c,__typename:i.content.child.comment.__typename},__typename:i.content.child.__typename},nodes:[...i.content.nodes],__typename:i.content.__typename}})}})})}componentDidMount(){this.fetchWebPanels()}_getADF(e){if(e)try{return JSON.parse(e)}catch(t){console.error("Invalid adf document",t)}return null}_buildCommentsData(e){var t;const n=null!=(t=e)&&null!=(t=t.content)&&null!=(t=t.child)&&null!=(t=t.comment)?t.edges:t;return n&&0!==n.length?n.map(t=>{var n,o,r,a,i,c,s,d,l,u,m,p,h,b,g;const y=(null!=(g=t)&&null!=(g=g.node)?g.ancestors:g)||[],E=(null!=(b=y)?b.length:b)||0,v=(null!=(h=y)&&null!=(h=h.ancestors)&&null!=(h=h[0])?h.id:h)||null;return{adf:this._getADF(null!=(p=t)&&null!=(p=p.node)&&null!=(p=p.body)&&null!=(p=p.atlas_doc_format)?p.value:p),ancestors:y,depthLevel:E,parentId:v,bodyExportView:(null!=(m=t)&&null!=(m=m.node)&&null!=(m=m.body)&&null!=(m=m.view)?m.value:m)||"",version:this._getCommentVersion(t),webResourceKeys:(null!=(u=t)&&null!=(u=u.node)&&null!=(u=u.body)&&null!=(u=u.view)&&null!=(u=u.webresource)?u.key:u)||[],createdBy:Object(f.a)(null!=(l=t)&&null!=(l=l.node)&&null!=(l=l.history)?l.createdBy:l),createdByAuthor:Boolean((null!=(d=e)&&null!=(d=d.content)&&null!=(d=d.nodes)&&null!=(d=d[0])&&null!=(d=d.history)&&null!=(d=d.createdBy)?d.accountId:d)&&(null!=(s=t)&&null!=(s=s.node)&&null!=(s=s.version)&&null!=(s=s.by)?s.accountId:s)&&(null!=(c=e)&&null!=(c=c.content)&&null!=(c=c.nodes)&&null!=(c=c[0])&&null!=(c=c.history)&&null!=(c=c.createdBy)?c.accountId:c)===(null!=(i=t)&&null!=(i=i.node)&&null!=(i=i.version)&&null!=(i=i.by)?i.accountId:i)),id:(null!=(a=t)&&null!=(a=a.node)?a.id:a)||"",linkWebui:(null!=(r=t)&&null!=(r=r.node)&&null!=(r=r.links)?r.webui:r)||"",operations:(null!=(o=t)&&null!=(o=o.node)?o.operations:o)||[],createdFriendly:(null!=(n=t)&&null!=(n=n.node)&&null!=(n=n.version)?n.friendlyWhen:n)||""}}):[]}_fetchMore(e,t){return e({variables:t,updateQuery:(e,{fetchMoreResult:t})=>{if(!t)return e;return Object.assign({},e,{content:{child:{comment:{count:e.content.child.comment.count+t.content.child.comment.count,pageInfo:Object(o.a)(Object(o.a)({},t.content.child.comment.pageInfo),{},{__typename:t.content.child.comment.pageInfo.__typename}),edges:[...e.content.child.comment.edges,...t.content.child.comment.edges],__typename:t.content.child.comment.__typename},__typename:t.content.child.__typename},nodes:[...t.content.nodes],__typename:t.content.__typename}})}})}render(){const{contentId:e,isStickyEditorEnabled:t}=this.props;return e?i.a.createElement(h.a,{attribution:"fabric-comment"},i.a.createElement(g.a,{id:e,name:y.a.VIEW_PAGE_COMMENTS,attributes:{editor:w.a.FABRIC}}),i.a.createElement(s.b,{query:Dt,variables:{contentId:e,offset:0,first:100},fetchPolicy:"cache-and-network",errorPolicy:"all"},({data:n,refetch:r,loading:c,error:d,fetchMore:l,networkStatus:u})=>i.a.createElement(s.a,{mutation:Rt},(m,{data:p})=>i.a.createElement(s.a,{mutation:Lt,update:(t,{data:{experimentalDeleteComment:{contentId:n}}})=>{const r=t.readQuery({query:Dt,variables:{contentId:e,offset:0,first:100}}),a=r.content.child.comment.edges.filter(e=>e.node.id!==n).map(e=>{const t=e.node.ancestors.filter(e=>e.id!==n),{container:r,body:a,history:i,id:c,links:s,operations:d,version:l}=e.node,u={container:r,body:a,history:i,id:c,links:s,operations:d,version:l},{cursor:m}=e;return Object.assign({},e,{cursor:m,node:Object(o.a)(Object(o.a)({ancestors:t},u),{},{__typename:e.node.__typename}),__typename:e.__typename})}),i=r.user;t.writeQuery({query:Dt,variables:{contentId:e,offset:0,first:100},data:{content:{child:{comment:{count:a.length,pageInfo:{endCursor:(a.length-1).toString(),hasNextPage:!1,__typename:r.content.child.comment.pageInfo.__typename},edges:a,__typename:r.content.child.comment.__typename},__typename:r.content.child.__typename},nodes:[...r.content.nodes],__typename:r.content.__typename},user:i}})}},(o,{error:s,data:f})=>{var h,g,y,C,O;if(d)throw new Ht(d);if(!(null!=(O=n)&&null!=(O=O.content)&&null!=(O=O.nodes)?O[0]:O)||!(null!=(C=n)&&null!=(C=C.content)&&null!=(C=C.child)?C.comment:C))return null;const{count:w,pageInfo:{hasNextPage:_,endCursor:j}}=null!=(y=n)&&null!=(y=y.content)&&null!=(y=y.child)?y.comment:y,{operations:I,space:{homepageId:k,id:A},type:x}=null!=(g=n)&&null!=(g=g.content)&&null!=(g=g.nodes)?g[0]:g,T=this._buildUserInfo(null!=(h=n)?h.user:h),{webPanels:S}=this.state,N=k===e,P=Boolean(I.find(e=>"create"===e.operation&&"comment"===e.targetType)&&Boolean(!N||w>0));return!_||c||this._loadedCursor[j]||(this._loadedCursor[j]=!0,this._fetchMore(l,{contentId:e,offset:Number(j)+1})),i.a.createElement(b.Provider,{value:{isLikesEnabled:!!S}},i.a.createElement(a.Fragment,null,i.a.createElement(Bt,{onRefetchComments:e=>this._onRefetchComments(e,l),canAddComments:P,currentUserInfo:T,canViewProfile:!!T,commentsData:this._buildCommentsData(n),contentId:e,contentType:x,spaceId:A,currentUserCanViewProfile:!!T,isAnonymous:!T,totalComments:_?0:w,hasFetchedComments:!c,hasNextPage:_,networkStatus:u,saveComment:this._saveComment(e,x,m),deleteComment:this._deleteComment(e,o),saveCommentData:p,deleteCommentData:f,deleteCommentError:s,editedCommentsIds:zt,isStickyEditorEnabled:t}),i.a.createElement(E.a,{name:"commentsPage",types:[v.e.comment],reload:r})))})))):null}});t.default=$t},"/MSF":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var o=n("EfWO"),r=n("ERkP"),a=n.n(r),i=n("L21V");const c="https://support.atlassian.com/contact/#/";function s({showHostname:e}){const t=c;return a.a.createElement("a",{href:t,target:"_blank"},e?Object(o.parse)(t).hostname:a.a.createElement(i.c,{id:"error-boundary.description.support-link",description:"The text of the link which will lead the user to the Atlassian Support web site",defaultMessage:"Atlassian Support"},e=>e))}},"/yy9":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));const o=100,r=350,a=700},"03Pf":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return d}));var o=n("daKX");const r=Object(o.a)("scroll-to-element"),a=new Set;function i(e){return a.add(e),()=>a.delete(e)}function c(){a.forEach(e=>{try{e()}catch(t){Promise.all([n.e("monitoring~60420017").then(n.bind(null,"fFmz")),Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e("error-boundary~b59ad437")]).then(n.bind(null,"fEZm"))]).then(([{getMonitoringClient:e},{Attribution:n}])=>{e().submitError(t,{attribution:n.CONTENT_EXPERIENCE})}).catch(()=>{})}})}function s(){c(),window.scrollTo(0,0)}function d(e,t){let n=0,o=e.offsetParent;for(;o instanceof HTMLElement;)n+=o.offsetTop,o=o.offsetParent;const a=e.offsetTop+(t||0)+n;c();try{window.scroll({top:a,behavior:"auto"})}catch(i){r.error`window.scroll() is not supported`}}},"0gjq":function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.bindAll=void 0;var r=n("FzbR");function a(e){if(void 0!==e)return"boolean"==typeof e?{capture:e}:e}t.bindAll=function(e,t,n){var i=t.map((function(t){var i=function(e,t){return null==t?e:o(o({},e),{options:o(o({},a(t)),a(e.options))})}(t,n);return r.bind(e,i)}));return function(){i.forEach((function(e){return e()}))}}},"1jzs":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("ERkP");const r="undefined"==typeof window?o.useEffect:o.useLayoutEffect},"4LHq":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o="confluence.frontend.global-perms-view-user-profile"},"5Asb":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i}));const o={PUBLISH:"mod+enter",PUBLISH_WITH_COMMENT:"mod+shift+enter",EDIT:"e",PREVIEW:"mod+shift+e"},r="mod+s",a="shortcuts-are-allowed",i=["ProseMirror-focused",a]},"6OdC":function(e,t,n){var o=n("NYSw");e.exports=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?o(e,t,void 0,n):!!r}},"6lDt":function(e,t,n){"use strict";t.a={TOOLS_MENU_CONTAINER:"system.content.action",TOOLS_MENU_MARKER:"system.content.action/marker",TOOLS_MENU_LEADING:"system.content.action/leading",TOOLS_MENU_PRIMARY:"system.content.action/primary",TOOLS_MENU_SECONDARY:"system.content.action/secondary",TOOLS_MENU_MODIFY:"system.content.action/modify",PAGE_BUTTONS:"system.content.button",SYSTEM_DASHBOARD:"system.dashboard",SYSTEM_DASHBOARD_BUTTON:"system.dashboard.button",SYSTEM_CONTENT_BYLINE:"system.content.byline",SYSTEM_CONTENT_METADATA:"system.content.metadata",PAGE_METADATA_BANNER:"page.metadata.banner",SYSTEM_HEADER_LEFT:"system.header/left",SYSTEM_HEADER_LEFT_BUTTON_GROUP:"system.header/left.button.group",SYSTEM_HELP:"system.help/pages",SYSTEM_USER_ANONYMOUS:"system.user/anonymous",SYSTEM_USER:"system.user",SYSTEM_ADMIN_SITE_SECTION:"system.admin.site/site_admin_section",SPACE_SIDEBAR:"system.space.sidebar/main-links",SYSTEM_ADMIN:"system.admin",SYSTEM_EDITOR_LINK_BROWSER_TABS:"system.editor.link.browser.tabs",SYSTEM_EDITOR_PRECURSOR_BUTTONS:"system.editor.precursor.buttons",CREATE_DIALOG:"system.create.dialog/content",DASHBOARD_LEFT:"atl.dashboard.left",DASHBOARD_SECONDARY:"atl.dashboard.secondary",ATL_GENERAL:"atl.general",ATL_FOOTER:"atl.footer",ATL_PAGE_METADATA:"atl.page.metadata.banner",ATL_PAGE_CONTENT_FOOTER_ACTIONS:"atl.page.content.footer.actions",ATL_EDITOR_SAVEBAR:"atl.editor.savebar",SYSTEM_ADMIN_SITE_ADMINISTRATION:"system.admin/siteadministration"}},A46D:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));const o="cubic-bezier(0.15,1,0.3,1)",r="cubic-bezier(0.2,0,0,1)",a="cubic-bezier(0.8,0,0,0.8)"},AqZj:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("daKX");Object(o.a)("wrm");function r(e,t){if(!t.length)return Promise.resolve();const n=window.document.createDocumentFragment(),o=t.map(e=>new Promise((t,o)=>{const r=window.document.createElement("script");r.async=!1,r.src=e,r.onload=t,r.onerror=o,n.appendChild(r)}));return e.appendChild(n),Promise.all(o).catch((...e)=>{0})}},Cwwk:function(e,t,n){"use strict";var o=n("+6Tk"),r=n("4LHq"),a=n("Czhu"),i=n("1U1M"),c=n("b/OQ");const s=e=>e&&e.globalOperations&&e.globalOperations.length>0?e.globalOperations:[];n.d(t,"a",(function(){return d}));const d=()=>{if(!Object(o.a)(r.a))return!0;const{data:e,error:t}=(()=>{const{loading:e,data:t,error:n}=Object(i.d)(c.a,{errorPolicy:"all",fetchPolicy:"cache-first"});if(n)return{data:[],error:n};const o={data:[],error:null};return e?o:Object(a.a)(Object(a.a)({},o),{},{data:s(t)})})();return!!t||!!(e&&e.length>0&&e.some(e=>e&&"read"===e.operation&&"userProfile"===e.targetType))}},DSvr:function(e,t){e.exports=function(e,t){t=t||{};var n,o,r,a=e.ownerDocument||e,i=[],c=[],s=function(e){var t=[];return function(n){if(n===e.documentElement)return!1;var o=e.defaultView.getComputedStyle(n);return!!function n(o,r){if(o===e.documentElement)return!1;for(var a=0,i=t.length;a<i;a++)if(t[a][0]===o)return t[a][1];var c=!1;return"none"===(r=r||e.defaultView.getComputedStyle(o)).display?c=!0:o.parentNode&&(c=n(o.parentNode)),t.push([o,c]),c}(n,o)||"hidden"===o.visibility}}(a),d=["input","select","a[href]","textarea","button","[tabindex]"],l=e.querySelectorAll(d.join(","));if(t.includeContainer){var u=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;d.some((function(t){return u.call(e,t)}))&&(l=Array.prototype.slice.apply(l)).unshift(e)}for(var m=0,p=l.length;m<p;m++)n=l[m],o=parseInt(n.getAttribute("tabindex"),10),(r=isNaN(o)?n.tabIndex:o)<0||"INPUT"===n.tagName&&"hidden"===n.type||n.disabled||s(n,a)||(0===r?i.push(n):c.push({index:m,tabIndex:r,node:n}));var f=c.sort((function(e,t){return e.tabIndex===t.tabIndex?e.index-t.index:e.tabIndex-t.tabIndex})).map((function(e){return e.node}));return Array.prototype.push.apply(f,i),f}},E5Eb:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),a=n("z3D9"),i=n("nvpc"),c=n("u6In"),s=n("TO58"),d=n("lCiX");class l extends o.Component{render(){const{children:e,href:t,onClick:n,onFocus:o,onMouseOver:a}=this.props;return r.a.createElement(d.a,{hasAuthor:!0,href:t,onClick:n,onFocus:o,onMouseOver:a},e)}}const u=Object(a.a)("atlaskit");t.a=Object(i.a)({componentName:"commentAuthor",packageName:s.a,packageVersion:s.b})(Object(c.a)({onClick:u({action:"clicked",actionSubject:"commentAuthor",attributes:{componentName:"commentAuthor",packageName:s.a,packageVersion:s.b}})})(l))},FzbR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bind=void 0,t.bind=function(e,t){var n=t.type,o=t.listener,r=t.options;return e.addEventListener(n,o,r),function(){e.removeEventListener(n,o,r)}}},Hi6d:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("ERkP")),r=a(n("4KTy"));function a(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var c=function(e){return o.default.createElement(r.default,i({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M11 8.002v4.002c0 .28.116.53.301.712l2.47 2.47a1.003 1.003 0 0 0 1.414 0 1.003 1.003 0 0 0 0-1.415L13 11.586V8.004A1.009 1.009 0 0 0 13 8V6a1 1 0 0 0-2 0v2.002zM12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};c.displayName="RecentIcon";var s=c;t.default=s},IGvV:function(e,t,n){"use strict";var o=n("Czhu"),r=n("aWzz"),a=n.n(r),i=n("ERkP"),c=n.n(i);var s=function(...e){return t=>{class n extends c.a.Component{UNSAFE_componentWillMount(){this.removeCss=this.context.insertCss.apply(void 0,e)}componentWillUnmount(){this.removeCss()}render(){return c.a.createElement(t,Object(o.a)({},this.props))}}return n.displayName=`WithStyles(${t.displayName||t.name||""})`,n.contextTypes={insertCss:a.a.func.isRequired},n}};var d=function(e){return t=>{class n extends i.Component{constructor(){super(),this.state={hasFetched:!1}}componentDidMount(){e().then(e=>{this.setState({hasFetched:!0}),this.removeCss=this.context.insertCss.apply(void 0,[e])})}componentWillUnmount(){this.removeCss&&this.removeCss()}render(){return this.state.hasFetched?c.a.createElement(t,Object(o.a)({},this.props)):null}}return n.displayName=`WithStylesAsync(${t.displayName||t.name||""})`,n.contextTypes={insertCss:a.a.func.isRequired},n}};n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}))},Iops:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),a=n("l1C2"),i=n("NI0Q"),c=n("RLdS"),s=n("bLpi"),d=n("PEqI"),l=n("BMbf");const u=({children:e,update:t,content:n})=>(Object(o.useLayoutEffect)(()=>{t()},[n,t]),r.a.createElement(o.Fragment,null,e));var m=n("3IV/");const p=`0 4px 8px -2px ${m.N50A}, 0 0 1px ${m.N60A};`,f={backgroundColor:m.N0,borderRadius:Object(l.c)()+"px",boxShadow:p,boxSizing:"border-box",display:"block",flex:"1 1 auto",overflow:"auto",zIndex:l.i.layer(),":focus":{outline:"none"}};var h=n("XaRy"),b=n.n(h);const g=()=>{},y=Object(o.forwardRef)((e,t)=>Object(a.f)("div",Object.assign({css:f,ref:t},e))),E=Object(o.memo)(({isOpen:e,id:t,offset:n,testId:r,content:m,trigger:p,onClose:f,boundary:h,rootBoundary:E="viewport",placement:v="auto",shouldFlip:C=!0,popupComponent:O=y,zIndex:w=l.i.layer(),autoFocus:_=!0})=>{const[j,I]=Object(o.useState)(null),[k,A]=Object(o.useState)(null),[x,T]=Object(o.useState)(null);return(({popupRef:e,initialFocusRef:t})=>{Object(o.useEffect)(()=>{if(!e)return g;const n={clickOutsideDeactivates:!0,escapeDeactivates:!0,initialFocus:t||e,fallbackFocus:e,returnFocusOnDeactivate:!0},o=b()(e,n);return requestAnimationFrame(()=>{o.activate()}),()=>{o.deactivate()}},[e,t])})({initialFocusRef:x,popupRef:j}),(({isOpen:e,onClose:t,popupRef:n,triggerRef:r})=>{Object(o.useEffect)(()=>{const o=()=>{t&&t()},a=({target:e})=>{if(!document.body.contains(e))return;const t=n&&n.contains(e),a=r&&r.contains(e);t||a||o()},i=e=>{const{key:t}=e;"Escape"!==t&&"Esc"!==t||o()};return e&&n&&(window.addEventListener("click",a),window.addEventListener("keydown",i)),()=>{window.removeEventListener("click",a),window.removeEventListener("keydown",i)}},[e,t,n,r])})({isOpen:e,onClose:f,popupRef:j,triggerRef:k}),Object(a.f)(i.a,null,Object(a.f)(c.a,null,({ref:n})=>p({ref:e=>{e&&("function"==typeof n?n(e):n.current=e,A(e))},"aria-controls":t,"aria-expanded":e,"aria-haspopup":!0})),e&&Object(a.f)(d.a,{zIndex:w},Object(a.f)(s.a,{placement:v,offset:n,modifiers:[{name:"flip",enabled:C,options:{rootBoundary:E,boundary:h}}]},({ref:n,style:o,placement:i,update:c})=>Object(a.f)(O,{id:t,"data-placement":i,"data-testid":r,ref:e=>{"function"==typeof n?n(e):n.current=e,I(e)},style:o,tabIndex:_?0:void 0},Object(a.f)(u,{content:m,update:c},m({update:c,isOpen:e,onClose:f,setInitialFocusRef:T}))))))});t.a=E},Jn8G:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o={FABRIC:"FABRIC",TINY_MCE:"TINY_MCE"}},JzH8:function(e,t,n){"use strict";var o=n("Czhu"),r=n("HbGN"),a=(n("aWzz"),n("ERkP")),i=n.n(a),c=n("7LQG");class s extends a.Component{render(){const e=this.props,{children:t,href:n}=e,a=Object(r.a)(e,["children","href"]);return n?i.a.createElement("a",Object(o.a)(Object(o.a)({},a),{},{href:0===n.indexOf(c.a)?n:`${c.a}${n}`}),t):i.a.createElement("span",Object(o.a)({},a),t)}}s.displayName="ContextAwareLink",t.a=s},"M/rd":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("Czhu"),r=n("ERkP"),a=n.n(r),i=n("xBue"),c=n("Ua4J");const s=Object(r.forwardRef)(({children:e,className:t,target:n,testId:s,name:d,href:l=null,to:u=null,params:m={},onClick:p=(()=>{})},f)=>{const{matchSupportedRoute:h,onPageReload:b,preloadRoute:g,toUrl:y}=Object(r.useContext)(c.a),E=e=>{b(e.target.getAttribute("href"),!1),p(e)},v=o=>a.a.createElement("a",{href:o,className:t,onClick:E,target:n,rel:"_blank"===n?"noreferrer":void 0,"data-testid":s,ref:f},e),C=l||u;if(!C&&!d)return v("");const O=C&&{href:C},w=y(d,Object(o.a)(Object(o.a)({},m),O)),_=h(w);if(_){const n=async()=>g(_);return a.a.createElement(i.a,{to:`${_.pathname}${_.search}${_.hash}`,className:t,onClick:p,onMouseDownCapture:n,innerRef:f},e)}return v(w)})},M2LZ:function(e,t,n){"use strict";var o=n("S2j0");var r={require:(e,t)=>new Promise(n=>{Object(o.a)(e,e=>{n(e),t&&t(e)},()=>{0})})},a=n("zjfJ"),i=n("Czhu"),c=n("ERkP"),s=n.n(c);var d=function(e,t){const n=Object(i.a)({isBlocking:!0},t);return t=>{class r extends c.Component{constructor(...e){super(...e),Object(a.a)(this,"state",{dependenciesLoaded:!1}),Object(a.a)(this,"markAsLoaded",()=>{this.mounted&&this.setState({dependenciesLoaded:!0})})}componentDidMount(){this.mounted=!0,e&&e.length>0?Object(o.a)(e,this.markAsLoaded,()=>{0}):this.markAsLoaded()}componentWillUnmount(){this.mounted=!1}render(){const{dependenciesLoaded:e}=this.state;return e||!n.isBlocking?s.a.createElement(t,Object(i.a)(Object(i.a)({},this.props),{},{wrmDependenciesLoaded:e})):null}}return r.displayName=`WRMComponent(${t.displayName||t.name})`,r}};n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return d}))},MV18:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("ERkP"),r=n("hpu0");function a({name:e,attributes:t}){return Object(o.useEffect)(()=>Object(r.b)().succeed({name:e,attributes:t}),[e,t]),null}},"NK/E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("ERkP")),r=a(n("4KTy"));function a(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var c=function(e){return o.default.createElement(r.default,i({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path fill="currentColor" fill-rule="evenodd" d="M8 10V8.002A4.004 4.004 0 0 1 12 4a4 4 0 0 1 4 4.002V10a2 2 0 0 1 2 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 0 1 6 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0 0 12 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>'},e))};c.displayName="LockFilledIcon";var s=c;t.default=s},NU1A:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("ERkP")),r=a(n("4KTy"));function a(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var c=function(e){return o.default.createElement(r.default,i({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M6.744 8.744a1.053 1.053 0 0 0 0 1.49l4.547 4.557a1 1 0 0 0 1.416 0l4.55-4.558a1.051 1.051 0 1 0-1.488-1.488l-3.77 3.776-3.768-3.776a1.051 1.051 0 0 0-1.487 0z" fill="currentColor"/></svg>'},e))};c.displayName="HipchatChevronDownIcon";var s=c;t.default=s},PLaw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("ERkP")),r=a(n("4KTy"));function a(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var c=function(e){return o.default.createElement(r.default,i({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M8.292 10.293a1.009 1.009 0 0 0 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955a1.01 1.01 0 0 0 0-1.419.987.987 0 0 0-1.406 0l-2.298 2.317-2.307-2.327a.99.99 0 0 0-1.406 0z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};c.displayName="ChevronDownIcon";var s=c;t.default=s},RLdS:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("ERkP"),r=n("lEaq"),a=n.n(r),i=n("NI0Q"),c=n("3eOh");function s(e){var t=e.children,n=e.innerRef,r=o.useContext(i.c),s=o.useCallback((function(e){Object(c.c)(n,e),Object(c.b)(r,e)}),[n,r]);return o.useEffect((function(){return function(){return Object(c.c)(n,null)}})),o.useEffect((function(){a()(Boolean(r),"`Reference` should not be used outside of a `Manager` component.")}),[r]),Object(c.d)(t)({ref:s})}},TO58:function(e){e.exports=JSON.parse('{"a":"@atlaskit/comment","b":"10.0.2"}')},WA38:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("Czhu"),r=n("HbGN"),a=n("ERkP"),i=n.n(a),c=(n("aWzz"),n("KIs4")),s=n("M/rd"),d=n("frZf");const l=e=>{const{href:t,to:n}=e,a=Object(r.a)(e,["href","to"]),l=n||t;return i.a.createElement(c.a,null,({featureFlags:t})=>{const n=l&&0!==l.indexOf("/")?"/"+l:l,r=t["confluence.frontend.people.directory"]&&!n.startsWith(d.a)?`${d.a}${n}`:n;return i.a.createElement(s.a,Object(o.a)(Object(o.a)({},e),{},{href:r},a))})}},WCbN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("ERkP")),r=a(n("4KTy"));function a(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var c=function(e){return o.default.createElement(r.default,i({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M15.185 7.4l-3.184 3.185-3.186-3.186a.507.507 0 0 0-.712.003l-.7.701a.496.496 0 0 0-.004.712l3.185 3.184L7.4 15.185a.507.507 0 0 0 .004.712l.7.7c.206.207.516.2.712.004l3.186-3.185 3.184 3.185a.507.507 0 0 0 .712-.004l.701-.7a.496.496 0 0 0 .003-.712l-3.186-3.186 3.186-3.184a.507.507 0 0 0-.003-.712l-.7-.7a.508.508 0 0 0-.36-.153.5.5 0 0 0-.353.15z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};c.displayName="EditorCloseIcon";var s=c;t.default=s},"X+YX":function(e,t,n){var o=n("JBn+"),r=n("OfKG"),a=n("sCL+"),i=n("H87J"),c=n("SU8Q"),s=n("S0iI");e.exports=function(e,t,n,d){var l=-1,u=r,m=!0,p=e.length,f=[],h=t.length;if(!p)return f;n&&(t=i(t,c(n))),d?(u=a,m=!1):t.length>=200&&(u=s,m=!1,t=new o(t));e:for(;++l<p;){var b=e[l],g=null==n?b:n(b);if(b=d||0!==b?b:0,m&&g==g){for(var y=h;y--;)if(t[y]===g)continue e;f.push(b)}else u(t,g,d)||f.push(b)}return f}},XaRy:function(e,t,n){var o=n("DSvr"),r=null;function a(e){e&&e.focus&&e!==document.activeElement&&(e.focus(),"input"===e.tagName.toLowerCase()&&e.select())}e.exports=function(e,t){var n=[],i=null,c=null,s=null,d=!1,l=!1,u=null,m="string"==typeof e?document.querySelector(e):e,p=t||{};p.returnFocusOnDeactivate=!t||void 0===t.returnFocusOnDeactivate||t.returnFocusOnDeactivate,p.escapeDeactivates=!t||void 0===t.escapeDeactivates||t.escapeDeactivates;var f={activate:function(e){if(d)return;var t={onActivate:e&&void 0!==e.onActivate?e.onActivate:p.onActivate};d=!0,l=!1,s=document.activeElement,t.onActivate&&t.onActivate();return b(),f},deactivate:h,pause:function(){if(l||!d)return;l=!0,g()},unpause:function(){if(!l||!d)return;l=!1,b()}};return f;function h(e){if(d){var t={returnFocus:e&&void 0!==e.returnFocus?e.returnFocus:p.returnFocusOnDeactivate,onDeactivate:e&&void 0!==e.onDeactivate?e.onDeactivate:p.onDeactivate};return g(),t.onDeactivate&&t.onDeactivate(),t.returnFocus&&setTimeout((function(){a(s)}),0),d=!1,l=!1,this}}function b(){if(d)return r&&r.pause(),r=f,w(),setTimeout((function(){a(function(){var e;e=null!==y("initialFocus")?y("initialFocus"):m.contains(document.activeElement)?document.activeElement:n[0]||y("fallbackFocus");if(!e)throw new Error("You can't have a focus-trap without at least one focusable element");return e}())}),0),document.addEventListener("focus",C,!0),document.addEventListener("click",v,!0),document.addEventListener("mousedown",E,!0),document.addEventListener("touchstart",E,!0),document.addEventListener("keydown",O,!0),f}function g(){if(d&&r===f)return document.removeEventListener("focus",C,!0),document.removeEventListener("click",v,!0),document.removeEventListener("mousedown",E,!0),document.removeEventListener("touchstart",E,!0),document.removeEventListener("keydown",O,!0),r=null,f}function y(e){var t=p[e],n=t;if(!t)return null;if("string"==typeof t&&!(n=document.querySelector(t)))throw new Error("`"+e+"` refers to no known node");if("function"==typeof t&&!(n=t()))throw new Error("`"+e+"` did not return a node");return n}function E(e){p.clickOutsideDeactivates&&!m.contains(e.target)&&h({returnFocus:!1})}function v(e){p.clickOutsideDeactivates||m.contains(e.target)||(e.preventDefault(),e.stopImmediatePropagation())}function C(e){m.contains(e.target)||(e.preventDefault(),e.stopImmediatePropagation(),"function"==typeof e.target.blur&&e.target.blur(),u&&function(e){if(e.shiftKey)return a(c);a(i)}(u))}function O(e){"Tab"!==e.key&&9!==e.keyCode||function(e){if(w(),e.target.hasAttribute("tabindex")&&Number(e.target.getAttribute("tabindex"))<0)return u=e;e.preventDefault();var t=n.indexOf(e.target);if(e.shiftKey)return e.target===i||-1===n.indexOf(e.target)?a(c):a(n[t-1]);if(e.target===c)return a(i);a(n[t+1])}(e),!1!==p.escapeDeactivates&&function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e)&&h()}function w(){n=o(m),i=n[0],c=n[n.length-1]}}},Xcdj:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ERkP"),a=n.n(r),i=n("l1C2"),c=n("bhMQ"),s=n("/yy9"),d=n("ZIFe"),l=n("pwfR");n("1jzs");const u=Object(r.createContext)(()=>({isReady:!0,delay:0,ref:()=>{}})),m=()=>{const e=function(){const e=Object(r.useRef)("");return e.current||(e.current="_"+(Number(String(Math.random()).slice(2))+Date.now()+Math.round(performance.now())).toString(36)),e.current}();return Object(r.useContext)(u)(e)};t.a=({children:e,animationTimingFunction:t,enteringAnimation:n,exitingAnimation:u,isPaused:p,onFinish:f,duration:h=s.a})=>{const b=m(),{isExiting:g,onFinish:y,appear:E}=Object(l.b)(),v=Object(d.b)(),C=p||!b.isReady,O=g?0:b.delay,w=g?"exiting":"entering",[_,j]=Object(r.useState)(E);return Object(r.useEffect)(()=>{let e=!1;if(!C){if(E)return j(!0),v(()=>{"exiting"===w&&y&&y(),e||j(!1),f&&f(w)},g?.5*h:h+O),()=>{e=!0};f&&f(w)}},[y,w,g,h,O,C,v]),a.a.createElement(i.b,null,({css:r})=>e({ref:b.ref,className:_?r(Object(o.a)({animationName:""+Object(i.g)(g&&u||n),animationTimingFunction:t(w),animationDelay:O+"ms",animationFillMode:g?"forwards":"backwards",animationDuration:(g?.5*h:h)+"ms",animationPlayState:C?"paused":"running"},Object(c.b)())):""},w))}},ZIFe:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var o=n("ERkP");const r=e=>{switch(e.cleanup){case"next-effect":return;case"unmount":default:return[]}},a=(e={cleanup:"unmount"})=>{const t=Object(o.useRef)([]);return Object(o.useEffect)(()=>()=>{t.current.length&&(t.current.forEach(e=>cancelAnimationFrame(e)),t.current=[])},r(e)),Object(o.useCallback)(e=>{const n=requestAnimationFrame(o=>{t.current=t.current.filter(e=>e!==n),e(o)});t.current.push(n)},[])},i=(e={cleanup:"unmount"})=>{const t=Object(o.useRef)([]);return Object(o.useEffect)(()=>()=>{t.current.length&&(t.current.forEach(e=>clearTimeout(e)),t.current=[])},r(e)),Object(o.useCallback)((e,n,...o)=>{const r=setTimeout(()=>{t.current=t.current.filter(e=>e!==r),e()},n,...o);t.current.push(r)},[])}},a8dO:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ERkP"),a=n.n(r),i=n("l1C2"),c=n("bES6"),s=n("pwfR"),d=n("b6XK"),l=n("bLpi"),u=n("PEqI"),m=n("BMbf");let p=null;function f(){null!=p&&(window.clearTimeout(p),p=null)}function h(e,t){f(),p=window.setTimeout(()=>{p=null,e()},t)}let b=null;var g=n("3IV/"),y=n("EFzz"),E=n("uvkf");const v=Object(i.e)("border-radius:",Object(m.c)(),"px;box-sizing:border-box;font-size:12px;left:0;line-height:1.3;max-width:240px;padding:2px 6px;top:0;word-wrap:break-word;overflow-wrap:break-word;"),C={name:"v0nulc",styles:"max-width:420px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"},O=Object(r.forwardRef)((function({style:e,className:t,children:n,truncate:o,placement:r,testId:a},c){return Object(i.f)(y.a.Consumer,null,({mode:s})=>Object(i.f)(E.a,{ref:c,style:e,className:t,placement:r,testId:a,css:[v,o?C:null,Object(i.e)("background-color:","light"===s?g.N800:g.DN0,";color:","light"===s?g.N0:g.DN600,";")]},n))}));O.displayName="TooltipContainer";var w=O,_=n("RjSO");function j({fn:e,action:t,componentName:n,packageName:a,packageVersion:i,analyticsData:c}){const{createAnalyticsEvent:s}=Object(_.a)(),d=Object(r.useRef)(c);Object(r.useEffect)(()=>{d.current=c},[c]);return Object(r.useCallback)((function(r){const c=s({action:t,actionSubject:n,attributes:{componentName:n,packageName:a,packageVersion:i}}),l=Object(o.a)({componentName:n,packageName:a,packageVersion:i},d.current);c.context.push(l);const u=c.clone();u&&u.fire("atlaskit"),e(r,c)}),[e,t,n,a,i,s])}function I(e){const t=e||{top:0,left:0};return{getBoundingClientRect:()=>({top:t.top,left:t.left,bottom:t.top,right:t.left,width:0,height:0}),clientWidth:0,clientHeight:0}}var k=n("jYB6");const A=m.i.tooltip(),x={componentName:"tooltip",packageName:k.a,packageVersion:k.b};function T(){}function S({children:e,position:t="bottom",mousePosition:n="bottom",content:m,truncate:p=!1,component:g=w,tag:y="div",testId:E,delay:v=300,onShow:C=T,onHide:O=T,hideTooltipOnClick:_=!1,hideTooltipOnMouseDown:k=!1,analyticsContext:S}){const N="mouse"===t?n:t,P=j(Object(o.a)({fn:C,action:"displayed",analyticsData:S},x)),M=j(Object(o.a)({fn:O,action:"hidden",analyticsData:S},x)),D=Object(r.useRef)(null),[R,L]=Object(r.useState)("hide"),F=Object(r.useRef)(null),H=Object(r.useRef)(null),B=Object(r.useCallback)(e=>{e&&null!==e.firstChild&&(H.current=e,F.current=e.firstChild)},[]),z=Object(r.useRef)(R),$=Object(r.useRef)(v),U=Object(r.useRef)({onShowHandler:P,onHideHandler:M}),q=Object(r.useRef)(!1);Object(r.useEffect)(()=>{z.current=R,$.current=v,U.current={onShowHandler:P,onHideHandler:M}},[v,M,P,R]);const V=Object(r.useCallback)(e=>{D.current=e,q.current=!1},[]),G=Object(r.useCallback)(()=>{D.current&&(q.current&&U.current.onHideHandler(),D.current=null,q.current=!1,L("hide"))},[]),W=Object(r.useCallback)(()=>{D.current&&(D.current.abort(),q.current&&U.current.onHideHandler(),D.current=null)},[]);Object(r.useEffect)((function(){return function(){D.current&&W()}}),[W]);const Y=Object(r.useCallback)(e=>{if(D.current&&!D.current.isActive()&&W(),D.current&&D.current.isActive())return void D.current.keep();const t=function(e){let t="waiting-to-show";function n(){return Boolean(b&&b.entry===e)}function o(){n()&&(f(),b=null)}function r(){n()&&e.done(),t="done",o()}function a(){n()&&e.hide({isImmediate:!0}),r()}function i(){return"shown"===t||"waiting-to-hide"===t||"hide-animating"===t}return function(){const n=Boolean(b&&b.isVisible());function o(){t="shown",e.show({isImmediate:n})}b&&(f(),b.entry.hide({isImmediate:!0}),b.entry.done(),b=null),b={entry:e,isVisible:i},n?o():(t="waiting-to-show",h(o,e.delay))}(),{keep:function(){if(n())return"waiting-to-hide"===t?(t="shown",void f()):"hide-animating"===t?(t="shown",f(),void e.show({isImmediate:!1})):void 0},abort:o,isActive:n,requestHide:function({isImmediate:o}){n()&&("waiting-to-show"!==t?"waiting-to-hide"!==t&&(o?a():(t="waiting-to-hide",h(()=>{t="hide-animating",e.hide({isImmediate:!1})},e.delay))):a())},finishHideAnimation:function(){n()&&"hide-animating"===t&&r()},getInitialMouse:function(){return"mouse"===e.source.type?e.source.mouse:null}}}({source:e,delay:$.current,show:({isImmediate:e})=>{q.current||(q.current=!0,U.current.onShowHandler()),L(e?"show-immediate":"show-fade-in")},hide:({isImmediate:e})=>{L(t=>"hide"!==t?e?"hide":"fade-out":t)},done:G});V(t)},[W,G,V]);Object(r.useEffect)(()=>{if("hide"===R)return T;return Object(c.bind)(window,{type:"scroll",listener:()=>{D.current&&D.current.requestHide({isImmediate:!0})},options:{capture:!0,passive:!0,once:!0}})},[R]);const K=Object(r.useCallback)(()=>{k&&D.current&&D.current.requestHide({isImmediate:!0})},[k]),Q=Object(r.useCallback)(()=>{_&&D.current&&D.current.requestHide({isImmediate:!0})},[_]),J=Object(r.useCallback)(e=>{if(e.target===H.current)return;if(e.defaultPrevented)return;e.preventDefault();const n="mouse"===t?{type:"mouse",mouse:I({left:e.clientX,top:e.clientY})}:{type:"keyboard"};Y(n)},[t,Y]),X=Object(r.useCallback)(e=>{e.target!==H.current&&(e.defaultPrevented||(e.preventDefault(),D.current&&D.current.requestHide({isImmediate:!1})))},[]),Z=Object(r.useCallback)(()=>{Y({type:"keyboard"})},[Y]),ee=Object(r.useCallback)(()=>{D.current&&D.current.requestHide({isImmediate:!1})},[]),te=Object(r.useCallback)(e=>{"exiting"===e&&"fade-out"===z.current&&D.current&&D.current.finishHideAnimation()},[]),ne=y,oe="hide"!==R&&Boolean(m),re="show-immediate"===R||"show-fade-in"===R;return Object(i.f)(a.a.Fragment,null,Object(i.f)(ne,{onMouseOver:J,onMouseOut:X,onClick:Q,onMouseDown:K,onFocus:Z,onBlur:ee,ref:B,"data-testid":E?E+"--container":void 0},e),oe?Object(i.f)(u.a,{zIndex:A},Object(i.f)(l.a,{placement:N,referenceElement:(()=>{const e=D.current,n=e?e.getInitialMouse():null;return"mouse"===t&&n?n:F.current||void 0})()},({ref:e,style:t})=>Object(i.f)(s.a,{appear:!0},re&&Object(i.f)(d.a,{onFinish:te,duration:"show-immediate"===R?0:void 0},({className:n})=>Object(i.f)(g,{ref:e,className:"Tooltip "+n,style:t,truncate:p,placement:N,testId:E},m))))):null)}S.displayName="Tooltip";t.a=S},b6XK:function(e,t,n){"use strict";var o=n("HbGN"),r=n("Czhu"),a=n("ERkP"),i=n.n(a),c=n("A46D"),s=n("/yy9"),d=n("Xcdj");const l={bottom:"translate3d(0, calc(5% + 4px), 0)",left:"translate3d(calc(-5% - 4px), 0, 0)",right:"translate3d(calc(5% + 4px), 0, 0)",top:"translate3d(0, calc(-5% - 4px), 0)"},u={bottom:"translate3d(0, calc(-5% - 4px), 0)",left:"translate3d(calc(5% + 4px), 0, 0)",right:"translate3d(calc(-5% - 4px), 0, 0)",top:"translate3d(0, calc(5% + 4px), 0)"},m=e=>({from:{opacity:1,transform:void 0!==e?"translate3d(0, 0, 0)":void 0},to:Object(r.a)({opacity:0},void 0!==e&&{transform:u[e]})});t.a=e=>{let{children:t,duration:n=s.a,entranceDirection:a}=e,u=Object(o.a)(e,["children","duration","entranceDirection"]);return i.a.createElement(d.a,Object.assign({duration:n,enteringAnimation:(p=a,{from:Object(r.a)({opacity:0},void 0!==p&&{transform:l[p]}),"50%":{opacity:1},to:{transform:void 0!==p?"none":void 0}}),exitingAnimation:m(a),animationTimingFunction:()=>c.b},u),t);var p}},bES6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("FzbR");Object.defineProperty(t,"bind",{enumerable:!0,get:function(){return o.bind}});var r=n("0gjq");Object.defineProperty(t,"bindAll",{enumerable:!0,get:function(){return r.bindAll}})},"bR0+":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u}));var o=n("KIs4"),r=n("8TdO"),a=n("frZf");const i=(e,t,n="")=>e?`${n}/people/${e}?ref=confluence${t?"&src="+encodeURIComponent(t):""}`:"",c=async(e,t)=>{if(!e)return"";let n="";try{const{featureFlags:e}=await Object(o.b)(Object(r.getApolloClient)());n=e["confluence.frontend.people.directory"]?a.a:""}catch(i){}return`${n}/people/${e}?ref=confluence${t?"&src="+encodeURIComponent(t):""}`},s=(e,t,n="")=>e?`${n}/people/team/${e}?ref=confluence${t?"&src="+encodeURIComponent(t):""}`:"",d=e=>e.getAttribute("data-account-id"),l=e=>{const t={class:"className"},n={};return(e=>Array.from(e.attributes).map(e=>e.name))(e).forEach(o=>{n[t[o]||o]=e.getAttribute(o)}),n.dangerouslySetInnerHTML={__html:e.innerHTML},n};function u(e){return e.filter(d).map(e=>{const t=l(e);t["data-user-hover-bound"]="true",t.href=i(t["data-account-id"],null);const n=window.document.createElement("span");return e.parentNode?(e.parentNode.replaceChild(n,e),{props:t,placeholder:n}):{}})}},bWlm:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("ERkP"),r=n("+6Tk"),a=n("1N1n");const i=e=>{const t=Object(r.a)(a.a),{contentId:n,registerReloader:i}=Object(o.useContext)(a.b);Object(o.useEffect)(()=>{t&&i(e)},[n,e.reload,e.name,t])}},bhMQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));const o=()=>{if("undefined"==typeof window||!("matchMedia"in window))return!1;const{matches:e}=window.matchMedia("(prefers-reduced-motion: reduce)");return e},r=()=>({"@media (prefers-reduced-motion: reduce)":{animation:"none",transition:"none"}})},d8Ou:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),a=n("KsTJ"),i=n("3IV/"),c=n("BMbf");const s={text:{default:i.N800,disabled:i.N100A}},d=a.default.div`
  color: ${e=>e.isDisabled?s.text.disabled:s.text.default};
  margin-top: ${Object(c.h)()/2}px;
`;var l=n("OOEx"),u=n.n(l);const m=3.5*Object(c.h)(),p=2*Object(c.h)(),f={default:i.N500,error:i.Y500},h=a.default.div`
  display: flex;

  & + &::before {
    color: ${f.default};
    content: '·';
    display: inline-block;
    text-align: center;
    vertical-align: middle;
    width: ${p}px;
  }
`,b=a.default.span`
  color: ${f.error};
  padding-right: ${Object(c.h)()}px;
`,g=a.default.div`
  align-items: center;
  display: flex;
  flex-wrap: wrap;
  margin-top: ${.75*Object(c.h)()}px;
`,y=e=>e.map((e,t)=>r.a.createElement(h,{key:t},e));var E=({actions:e,errorActions:t,errorIconLabel:n,isError:o,isSaving:a})=>{if(a||!e&&!t)return null;const i=o?t&&y(t):e&&y(e);return r.a.createElement(g,null,o?r.a.createElement(b,null,r.a.createElement(u.a,{label:n||""})):null,i)},v=n("NK/E"),C=n.n(v),O=n("liuE");const w={text:i.N100A},_=a.default.span`
  padding-right: ${Object(c.h)()/2}px;
`,j=a.default.div`
  color: ${w.text};
  display: flex;
`,I=a.default.span`
  margin-right: ${Object(c.h)()/2}px;
`;I.displayName="RestrictedIconWrapper";const k=a.default.div`
  display: inline-block;
  margin-left: ${Object(c.h)()}px;

  [dir='rtl'] & {
    margin-left: 0;
    margin-right: ${Object(c.h)()}px;
  }

  &:first-child {
    margin-left: 0;

    [dir='rtl'] & {
      margin-right: 0;
    }
  }
`,A=a.default.div`
  display: flex;
`;var x=({author:e,edited:t,isError:n,isSaving:o,restrictedTo:a,savingText:i,time:c,type:s})=>{const d=a?r.a.createElement(j,null,r.a.createElement(_,null,"•"),r.a.createElement(I,null,r.a.createElement(C.a,{label:"",size:"small"}))," ",a):null,l=[e||null,s?r.a.createElement(O.a,null,s):null,!c||o||n?null:c,t||null,o?i:null,d].filter(e=>!!e).map((e,t)=>r.a.createElement(k,{key:t},e));return l.length?r.a.createElement(A,null,l):null};const T={background:i.N20A},S=a.default.div`
  /* stylelint-enable */
  grid-area: avatar-area;
`,N=a.default.div`
  /* stylelint-disable value-no-vendor-prefix, declaration-block-no-duplicate-properties */
  display: grid;
  gap: ${Object(c.h)()}px;
  /* stylelint-enable */
  grid-template:
    'avatar-area comment-area'
    '${e=>e.shouldRenderNestedCommentsInline?"nested-comments-area":"."} nested-comments-area'
    / auto 1fr;
  padding-top: ${m}px;
  position: relative;

  /* We need both selectors as there is not a common wrapper component around
  comments. We also provide isFirst as an escape hatch. */
  &:first-child,
  &:first-of-type {
    padding-top: 0;
  }
`,P=a.default.div`
  grid-area: comment-area;
  margin-top: ${.25*Object(c.h)()}px;
  /* Required for word-wrap: break-word to work in a grid */
  min-width: 0;
  word-wrap: break-word;
`,M=a.default.div`
  background: ${T.background};
  grid-area: 1 / 1 / 2 / 3;
  height: 100%;
  padding: ${Object(c.h)()}px ${Object(c.h)()}px ${Object(c.h)()/2}px;
  transform: translate(-${Object(c.h)()}px, -${Object(c.h)()}px);
  width: 100%;

  [dir='rtl'] & {
    transform: translate(${Object(c.h)()}px, -${Object(c.h)()}px);
  }
  pointer-events: none;
`,D=a.default.div`
  grid-area: nested-comments-area;
  margin-top: ${m}px;
`;class R extends o.Component{renderAvatar(){const{avatar:e}=this.props;return e?r.a.createElement(S,null,e):null}renderNestedComments(){const{children:e}=this.props;return e?r.a.createElement(D,null,e):null}render(){const{content:e,highlighted:t,id:n,shouldRenderNestedCommentsInline:o}=this.props;return r.a.createElement(N,{id:n,shouldRenderNestedCommentsInline:o},this.renderAvatar(),r.a.createElement(P,null,e),this.renderNestedComments(),t&&r.a.createElement(M,null))}}n.d(t,"a",(function(){return L}));class L extends o.Component{render(){const{actions:e,author:t,avatar:n,children:o,content:a,edited:i,errorActions:c,errorIconLabel:s,highlighted:l,isError:u,isSaving:m,restrictedTo:p,savingText:f,time:h,type:b,id:g,afterContent:y,shouldRenderNestedCommentsInline:v}=this.props,C={author:t,edited:i,isError:u,isSaving:m,restrictedTo:p,savingText:f,time:h,type:b},O={actions:e,errorActions:c,errorIconLabel:s,isError:u,isSaving:m},w=r.a.createElement("div",null,r.a.createElement(x,Object.assign({},C)),r.a.createElement(d,{isDisabled:m||u},a),r.a.createElement(E,Object.assign({},O)),y);return r.a.createElement(R,{shouldRenderNestedCommentsInline:v,id:g,avatar:n,content:w,highlighted:l},o)}}L.defaultProps={actions:[],restrictedTo:"",highlighted:!1,isSaving:!1,savingText:"Sending...",isError:!1,errorActions:[],errorIconLabel:""}},fLXQ:function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"f",(function(){return b}));n("Czhu");var o=n("Jygk"),r=n.n(o),a=n("S2j0"),i=n("AqZj"),c=n("Xzcx");function s(e,t,n,o){if(n<=0||!n||t===e.scrollTop)return e.scrollTop=t,void(o&&o());const a=t-e.scrollTop,i=a/n*(1e3/60);let c=e.scrollTop;const s=()=>{const n=c+i;if(a<0&&n<=t||a>0&&n>=t)return e.scrollTop=t,void(o&&o());c=n,e.scrollTop=c,r.a.requestAnimationFrame(s)};r.a.requestAnimationFrame(s)}function d(e,t={}){if(!e)return;t.container||(t.container=Object(c.h)());const{container:n,topGap:o=0,bottomGap:r=0,duration:a=0}=t,i=e.getBoundingClientRect(),{top:d,bottom:l}=i,{clientHeight:u,scrollTop:m}=t.container,p=-d+o,f=l-u+r;return p>0?s(n,m-p,a):f>0?s(n,m+f,a):void 0}function l(e,t,n){e&&t.split(" ").forEach(t=>e.classList[n](t))}function u(e,t){l(e,t,"add")}function m(e,t){const n=t?t.documentElement:document.documentElement;if(!e||!n)return;const o=e.getBoundingClientRect(),{top:r,bottom:a}=o,i=n.offsetHeight;return 0<=r&&r<i||0<=a&&a<=i||r<=0&&0<=a&&a>=i}function p(e,t){const n=t?t.documentElement:document.documentElement;if(!e||!n)return;const o=e.getBoundingClientRect(),{top:r}=o,a=n.offsetHeight;return 0<=r&&r<a}function f(e){let t=e.offsetTop;for(;e.offsetParent;)t+=(e=e.offsetParent).offsetTop;return t}function h(e){if(!e||e===document)return null;const t=r.a.getComputedStyle(e);return e.scrollHeight>e.clientHeight&&"hidden"!==e.style.overflow&&"visible"!==t.overflow?e:h(e.parentNode)}const b=(e,t,n)=>n?e.length?new Promise(o=>{Object(a.a)(e,()=>{Object(i.a)(n,t).then(o)},()=>{0})}):Object(i.a)(n,t):Promise.reject(new Error("script container is not present"))},gloY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("ERkP")),r=a(n("4KTy"));function a(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var c=function(e){return o.default.createElement(r.default,i({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M4.998 11.513c0-3.038 3.141-5.51 7.002-5.51 3.861 0 7.002 2.472 7.002 5.51 0 3.039-3.141 5.51-7.002 5.51-3.861 0-7.002-2.471-7.002-5.51zm14.84 7.771v-.002s-1.564-2.26-.767-3.116l-.037.02C20.261 14.902 21 13.279 21 11.513 21 7.371 16.963 4 12 4s-9 3.37-9 7.513 4.037 7.514 9 7.514c1.42 0 2.76-.285 3.957-.776 1.003 1.022 2.287 1.572 3.24 1.719l.002-.003a.524.524 0 0 0 .164.033.515.515 0 0 0 .474-.716z"/><rect x="7" y="9" width="10" height="2" rx="1"/><rect x="7" y="12" width="5" height="2" rx="1"/></g></svg>'},e))};c.displayName="CommentIcon";var s=c;t.default=s},jF39:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("bWlm");const r=e=>(Object(o.a)(e),null)},jYB6:function(e){e.exports=JSON.parse('{"a":"@atlaskit/tooltip","b":"17.0.0"}')},jqY8:function(e,t,n){"use strict";function o(){return"undefined"!=typeof window?window.location:void 0}function r(){if("undefined"==typeof window||!window.location)return;let e=window.location.origin;return e||(e=`${window.location.protocol}//${window.location.hostname}${window.location.port?":"+window.location.port:""}`),e}function a(){"undefined"!=typeof window&&window.location.reload()}function i(e){return"undefined"==typeof window||window.confirm(e)}function c(...e){"undefined"!=typeof window&&window.addEventListener.apply(window,e)}function s(...e){"undefined"!=typeof window&&window.removeEventListener.apply(window,e)}function d(){return"undefined"==typeof window?0:window.pageYOffset}function l(){return"undefined"==typeof window?0:window.innerHeight}function u(...e){if(window&&window.require)return window.require.apply(window,e)}function m(){return window}n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return r})),n.d(t,"i",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"j",(function(){return s})),n.d(t,"h",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return m}))},lCiX:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),a=n("KsTJ");const i=n("3IV/").N500,c=({hasAuthor:e})=>a.css`
  &:not(:hover):not(:active) {
    color: ${i};
  }
  font-weight: ${e?500:"inherit"};
`,s=a.default.a`
  ${e=>c(e)};
`,d=a.default.span`
  ${e=>c(e)};
`;n.d(t,"a",(function(){return l}));class l extends o.Component{render(){const{children:e,hasAuthor:t,href:n,onClick:o,onFocus:a,onMouseOver:i}=this.props;return n?r.a.createElement(s,{href:n,hasAuthor:t,onClick:o,onFocus:a,onMouseOver:i},e):r.a.createElement(d,{hasAuthor:t,onClick:o,onFocus:a,onMouseOver:i},e)}}},lKOy:function(e,t,n){var o=n("X+YX"),r=n("YpBQ"),a=n("R3TX"),i=n("Ndl3"),c=a((function(e,t){return i(e)?o(e,r(t,1,i,!0)):[]}));e.exports=c},liuE:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),a=n("Czhu"),i=n("3IV/"),c=n("8pvK");const s={default:{light:i.N40,dark:i.N40},inprogress:{light:i.B50,dark:i.B50},moved:{light:i.Y75,dark:i.Y75},new:{light:i.P50,dark:i.P50},removed:{light:i.R50,dark:i.R50},success:{light:i.G50,dark:i.G50}},d={default:{light:i.N500,dark:i.N500},inprogress:{light:i.B500,dark:i.B500},moved:{light:i.N800,dark:i.N800},new:{light:i.P500,dark:i.P500},removed:{light:i.R500,dark:i.R500},success:{light:i.G500,dark:i.G500}},l={default:{light:i.N500,dark:i.N500},inprogress:{light:i.B400,dark:i.B400},moved:{light:i.Y500,dark:i.Y500},new:{light:i.P400,dark:i.P400},removed:{light:i.R400,dark:i.R400},success:{light:i.G400,dark:i.G400}},u={default:{light:i.N0,dark:i.N0},inprogress:{light:i.N0,dark:i.N0},moved:{light:i.N800,dark:i.N800},new:{light:i.N0,dark:i.N0},removed:{light:i.N0,dark:i.N0},success:{light:i.N0,dark:i.N0}},m=Object(c.a)(({appearance:e,isBold:t,maxWidth:n})=>Object(a.a)(Object(a.a)({},"object"==typeof e?Object(a.a)({backgroundColor:(t?l:s).default.light,textColor:(t?u:d).default.light},e):{backgroundColor:(t?l[e]:s[e]).light,textColor:(t?u[e]:d[e]).light}),{},{maxWidth:n}));var p=n("l1C2"),f=n("BMbf");const h=Object(f.c)()+"px";var b=({backgroundColor:e,textColor:t,children:n,testId:o})=>Object(p.f)("span",{css:{backgroundColor:e,borderRadius:h,boxSizing:"border-box",color:t,display:"inline-block",fontSize:"11px",fontWeight:700,lineHeight:1,maxWidth:"100%",padding:"2px 0 3px 0",textTransform:"uppercase",verticalAlign:"baseline"},"data-testid":o},n);const g=Object(f.h)()/2+"px";var y=({maxWidth:e,children:t})=>Object(p.f)("span",{css:{display:"inline-block",verticalAlign:"top",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",boxSizing:"border-box",padding:"0 "+g,maxWidth:"number"==typeof e?e+"px":e,width:"100%"}},t);n.d(t,"a",(function(){return E}));class E extends o.PureComponent{render(){const{theme:e,children:t,testId:n}=this.props;return r.a.createElement(m.Provider,{value:e},r.a.createElement(m.Consumer,Object.assign({},this.props),e=>r.a.createElement(b,Object.assign({testId:n},e),r.a.createElement(y,Object.assign({},e),t))))}}E.defaultProps={isBold:!1,appearance:"default",maxWidth:200}},nZDR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("ERkP")),r=a(n("4KTy"));function a(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var c=function(e){return o.default.createElement(r.default,i({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M13 11V3.993A.997.997 0 0 0 12 3c-.556 0-1 .445-1 .993V11H3.993A.997.997 0 0 0 3 12c0 .557.445 1 .993 1H11v7.007c0 .548.448.993 1 .993.556 0 1-.445 1-.993V13h7.007A.997.997 0 0 0 21 12c0-.556-.445-1-.993-1H13z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};c.displayName="AddIcon";var s=c;t.default=s},pwfR:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),a=n("bhMQ");n.d(t,"b",(function(){return l}));const i={appear:!0,isExiting:!1},c=Object(o.createContext)(i),s=(e,t=i)=>r.a.createElement(c.Provider,{key:e.key+"-provider",value:t},e),d=e=>e.reduce((e,t)=>(e[t.key]=t,e),{}),l=()=>Object(o.useContext)(c);t.a=({appear:e=!1,children:t,exitThenEnter:n})=>{const r=(e=>{const t=[];return o.Children.toArray(e).forEach(e=>{"boolean"!=typeof e&&t.push(e)}),t})(t),i=d(r),c=Object(o.useRef)([]),l=Object(o.useRef)([]),u=(()=>{const[,e]=Object(o.useState)({});return Object(o.useCallback)(()=>e({}),[])})(),m=Object(o.useRef)({}),p=Object(o.useRef)(e),f=Object(o.useMemo)(()=>({appear:p.current,isExiting:!1}),[p.current]);return Object(a.a)()?r:(p.current||(p.current=!0),c.current.length&&((e,t)=>{for(let n=0;n<t.length;n++){if(!e[t[n].key])return!0}return!1})(i,c.current)?((0===l.current.length||((e,t)=>{let n=!1;return t.forEach(t=>{e.current[t.key]&&(n=!0,delete e.current[t.key])}),n})(m,r))&&(l.current=c.current),c.current=r,(n?l.current:((e,t)=>{const n=t.concat([]),o=d(t);for(let r=0;r<e.length;r++){const t=e[r];!o[t.key]&&n.splice(r+1,0,t)}return n})(r,l.current)).map(e=>{const t=i[e.key];return t?s(t,f):(m.current[e.key]=!0,s(e,{isExiting:!0,appear:!0,onFinish:()=>{delete m.current[e.key],0===Object.keys(m.current).length&&(c.current=[],l.current=[],u())}}))})):(c.current=r,r.map(e=>s(e,f))))}},utTn:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return d}));var o=n("Jygk"),r=n.n(o),a=n("M2LZ");const i=function(){a.a.require(["wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:resources"]).then(()=>{r.a.Confluence.SpaceBlueprint.Dialog.launch()})},c=function(){a.a.require(["wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:resources"]).then(()=>{r.a.Confluence.Blueprint.loadDialogAndOpenTemplate({})})},s=function(){return Confluence.Link};"undefined"!=typeof Confluence&&Confluence;const d=()=>"undefined"!=typeof Confluence&&Confluence.Binder&&Confluence.Binder.userHover&&Confluence.Binder.userHover()},uvkf:function(e,t,n){"use strict";var o=n("ERkP"),r=n("l1C2"),a=n("BMbf");const i=Object(r.e)("z-index:",a.i.tooltip(),";pointer-events:none;"),c=Object(o.forwardRef)((function({style:e,className:t,children:n,placement:o,testId:a},c){return Object(r.f)("div",{role:"tooltip",ref:c,style:e,className:t,css:i,"data-placement":o,"data-testid":a},n)}));c.displayName="TooltipPrimitive",t.a=c},v45N:function(e,t,n){var o=n("wGaN"),r=n("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return r(o,e)}},wGaN:function(e,t,n){(t=e.exports=n("PBB4")(!1)).push([e.i,'.CommentActions_actions_Hnn{font-size:12px;color:#707070;margin-top:4px}.CommentActions_actionsList_3yu{padding:0}.CommentActions_actionItem_1ro{display:inline-block}.CommentActions_actionItem_1ro:not(.CommentActions_noDot_1Yj):before{content:"•";color:#707070;padding:0 5px}.CommentActions_actionItem_1ro:first-child:before{display:none}.fabric-comment .CommentActions_actionItem_1ro a,.fabric-comment .CommentActions_actionItem_1ro a:hover,.fabric-comment .CommentActions_actionItem_1ro a:link,.fabric-comment .CommentActions_actionItem_1ro a:visited,.wiki-content .CommentActions_actionItem_1ro a,.wiki-content .CommentActions_actionItem_1ro a:hover,.wiki-content .CommentActions_actionItem_1ro a:link,.wiki-content .CommentActions_actionItem_1ro a:visited{color:#707070;cursor:pointer}.fabric-comment .CommentActions_actionItem_1ro a:hover,.wiki-content .CommentActions_actionItem_1ro a:hover{text-decoration:underline}.CommentActions_editDisabledDialogWrapper_3PL{max-width:275px}.CommentActions_editDisabledDialogLink_3hg{cursor:pointer}',""]),t.locals={actions:"CommentActions_actions_Hnn",actionsList:"CommentActions_actionsList_3yu",actionItem:"CommentActions_actionItem_1ro",noDot:"CommentActions_noDot_1Yj",editDisabledDialogWrapper:"CommentActions_editDisabledDialogWrapper_3PL",editDisabledDialogLink:"CommentActions_editDisabledDialogLink_3hg"}},zr3P:function(e,t,n){var o=n("kn3Q");e.exports=function(e){return o(e,4)}}}]);
//# sourceMappingURL=page.fabriccomments~493df0b3.sCBZW2r3xD.js.map