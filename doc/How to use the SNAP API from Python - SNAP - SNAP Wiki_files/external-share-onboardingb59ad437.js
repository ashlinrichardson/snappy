(window.webpackJsonp=window.webpackJsonp||[]).push([["external-share-onboarding~b59ad437"],{"/3uy":function(e,t,n){e.exports=n.p+"kDsvac5Zgt.svg"},"2t+H":function(e,t,n){"use strict";let a;n.d(t,"a",(function(){return a})),function(e){e.NON_ADMIN="nonAdmin",e.PRODUCT_ADMIN="productAdmin",e.SITE_ADMIN="siteAdmin"}(a||(a={}))},"7xCX":function(e,t,n){"use strict";var a=n("Czhu"),i=n("HbGN"),o=n("ERkP"),r=n.n(o),c=n("kKv/"),s=n("3IV/"),l=n("KsTJ"),d=n("zJ/j"),u=n("8pvK"),g=n("BMbf"),b=n("ZgvQ"),p=n("WEdt"),h=n("rr2M");const f=l.default.div`
  ${({theme:e})=>e};
`,m=l.default.div`
  display: flex;
  flex-direction: column;
  padding: ${Object(b.multiply)(g.h,2)}px ${Object(b.multiply)(g.h,2.5)}px;
`,k=l.default.h4`
  ${p.h600};
  color: inherit;
`,v=l.default.div`
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding-bottom: ${g.h}px;
`,x=l.default.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: ${g.h}px;
`,j=Object(u.a)(()=>({container:{overflow:"auto",borderRadius:Object(g.c)()+"px",height:"fit-content",zIndex:""+(g.i.spotlight()+1)}})),O=({actions:e=[],actionsBeforeElement:t,children:n,components:a={},image:o,heading:c,headingAfterElement:s,theme:l,innerRef:u,testId:g})=>{const{Header:b=v,Footer:p=x}=a;return r.a.createElement(j.Provider,{value:l},r.a.createElement(j.Consumer,null,({container:a})=>r.a.createElement(f,{theme:a,innerRef:u,"data-testid":g},"string"==typeof o?r.a.createElement("img",{src:o,alt:""}):o,r.a.createElement(m,null,c||s?r.a.createElement(b,null,r.a.createElement(k,null,c),s||r.a.createElement("span",null)):null,n,e.length>0||t?r.a.createElement(p,null,t||r.a.createElement("span",null),r.a.createElement(h.b,null,e.map((e,t)=>{let{text:n,key:a}=e,o=Object(i.a)(e,["text","key"]);return r.a.createElement(h.a,{key:a||("string"==typeof n?n:""+t)},r.a.createElement(d.a,Object.assign({},o),n))}))):null))))};var S=r.a.forwardRef((e,t)=>r.a.createElement(O,Object.assign({},e,{innerRef:t}))),E=n("P/3O");class P extends r.a.Component{render(){const{actions:e,actionsBeforeElement:t,children:n,components:o,isFlat:l,heading:d,headingAfterElement:u,image:g,innerRef:b,theme:p,width:h,testId:f}=this.props;return r.a.createElement(c.a.Provider,{value:E.b},r.a.createElement(S,{testId:f,ref:b,heading:d,headingAfterElement:u,actions:e,actionsBeforeElement:t,components:o,image:g,theme:e=>{const t=e({}),{container:n}=t,o=Object(i.a)(t,["container"]);return p(()=>Object(a.a)(Object(a.a)({},o),{},{container:Object(a.a)({background:s.P300,color:s.N0,width:Math.min(Math.max(h,160),600)+"px",boxShadow:l?void 0:`0 4px 8px -2px ${s.N50A}, 0 0 1px ${s.N60A}`},n)}),{})}},n))}}P.defaultProps={width:400,isFlat:!1,components:{},theme:e=>e()};t.a=r.a.forwardRef((e,t)=>r.a.createElement(P,Object.assign({},e,{innerRef:t})))},"90UR":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return b}));var a=n("ERkP"),i=n.n(a),o=n("1U1M"),r=n("a0gl"),c=n("+6Tk"),s=n("DqCY");const l=["control","variation"],d=["page"],u="confluence.frontend.external-share",g=e=>{const{featureFlagClient:t}=Object(r.a)(),n=Object(c.c)("confluence.frontend.external-share"),i=l.includes(n),g=Boolean(e&&!d.includes(e)),{loading:b,data:p,error:h}=Object(o.d)(s.a,{skip:!i||g}),f=Boolean(!b&&p&&!p.siteLevelPermission.permissions.includes("extended/disabled/legacyAnonAccess")),m=[[!i,"ff_not_enrolled"],[f,"existing_anon_enabled"]].filter(([e])=>e).map(([,e])=>e),k=0===m.length,v=b?void 0:k&&!g?n:"not-enrolled";return Object(a.useEffect)(()=>{b||t.trackExposure(u,t.flags[u],{cohort:v,ineligibilityReasons:m})},[t,b,v,k,m]),h?{isLoading:!1,ffCohort:n,isExistingAnonEnabled:f,cohort:"not-enrolled",isVariation:!1,isEnrolled:!1}:void 0===v?{isLoading:!0}:{isLoading:!1,ffCohort:n,isExistingAnonEnabled:f,cohort:v,isVariation:"variation"===v,isEnrolled:l.includes(v)&&!g}},b=({children:e,sharedContentType:t})=>i.a.createElement(a.Fragment,null,e(g(t)))},DqCY:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("H5qd");const i=n.n(a).a`query SiteSettingsQuery{siteLevelPermission{cloudId permissions}}`},GJIX:function(e,t,n){"use strict";var a=n("HbGN"),i=n("ERkP"),o=n.n(i),r=n("kKv/"),c=n("zJ/j"),s=n("MqVv"),l=n("KsTJ"),d=n("BMbf"),u=n("ZgvQ");const g=l.default.div`
  padding: 40px 20px;
  text-align: center;
`,b=l.default.h4`
  color: inherit;
  font-size: 20px;
  font-style: inherit;
  font-weight: 500;
  letter-spacing: -0.008em;
  line-height: 1.2;
  margin-bottom: ${d.h}px;
`,p=l.default.img`
  border-top-left-radius: ${d.c}px;
  border-top-right-radius: ${d.c}px;
  height: auto;
  width: 100%;

  @media (min-width: 320px) and (max-width: 480px) {
    border-radius: 0;
  }
`,h=Object(d.h)()/2,f=l.default.div`
  display: flex;
  justify-content: center;
  padding: 0 40px ${40-h}px;
  flex-flow: wrap;

  flex-direction: ${({shouldReverseButtonOrder:e})=>e?"row-reverse":"normal"};
`,m=l.default.div`
  margin: 0 ${Object(u.divide)(d.h,2)}px ${h}px;
`;var k=n("P/3O");function v(){}n.d(t,"a",(function(){return x}));class x extends i.Component{constructor(){super(...arguments),this.headerComponent=e=>{const{header:t,image:n}=e;return t||(()=>o.a.createElement(p,{alt:"",src:n}))},this.footerComponent=e=>{const{footer:t,actions:n,experimental_shouldShowPrimaryButtonOnRight:i=!1}=e;return t||(()=>n?o.a.createElement(r.a.Provider,{value:k.a},o.a.createElement(f,{shouldReverseButtonOrder:i},n.map((e,t)=>{let{text:n,key:i}=e,r=Object(a.a)(e,["text","key"]);const s=t?"subtle-link":"primary";return o.a.createElement(m,{key:i||("string"==typeof n?n:""+t)},o.a.createElement(c.a,Object.assign({appearance:s,autoFocus:!t},r),n))}))):null)}}render(){const e=this.props,{actions:t,children:n,heading:i}=e,r=Object(a.a)(e,["actions","children","heading"]);return o.a.createElement(s.a,Object.assign({autoFocus:!0,components:{Header:this.headerComponent(this.props),Footer:this.footerComponent(this.props)},onClose:v,scrollBehavior:"outside",shouldCloseOnOverlayClick:!1,shouldCloseOnEscapePress:!1},r),o.a.createElement(g,null,i&&o.a.createElement(b,null,i),n))}}},"P/3O":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var a=n("Czhu"),i=n("HbGN"),o=n("3IV/");const r={default:{background:{default:{light:o.P400,dark:o.P400},hover:{light:o.P200,dark:o.P200},active:{light:o.P500,dark:o.P500},disabled:{light:o.P400,dark:o.P400},selected:{light:o.R500,dark:o.R500},focus:{light:o.P400,dark:o.P400}},boxShadow:{focus:{light:o.P100+" 0 0 0 2px",dark:o.P100+" 0 0 0 2px"}},color:{default:{light:o.N0,dark:o.N0},hover:{light:o.N0,dark:o.N0},active:{light:o.N0,dark:o.N0},disabled:{light:o.N0,dark:o.DN30},selected:{light:o.N0,dark:o.N0},focus:{light:o.N0,dark:o.N0}},outline:{focus:{light:"none",dark:"none"}}},subtle:{background:{default:{light:"none",dark:"none"},hover:{light:o.P200,dark:o.P200},active:{light:o.P500,dark:o.P500},disabled:{light:"none",dark:"none"},selected:{light:o.N700,dark:o.DN0},focusSelected:{light:o.N700,dark:o.DN0}},boxShadow:{focus:{light:o.P100+" 0 0 0 2px",dark:o.P100+" 0 0 0 2px"}},color:{default:{light:o.N0,dark:o.N0},hover:{light:o.N0,dark:o.N0},active:{light:o.N0,dark:o.N0},disabled:{light:o.N0,dark:o.N0},selected:{light:o.N0,dark:o.N0},focus:{light:o.N0,dark:o.N0}},outline:{focus:{light:"none",dark:"none"}}},"subtle-link":{textDecoration:{hover:{light:"underline "+o.P75,dark:"underline "+o.P75}},textDecorationLine:{active:{light:"none",dark:"none"}},boxShadow:{focus:{light:o.P100+" 0 0 0 2px",dark:o.P100+" 0 0 0 2px"}},color:{default:{light:o.N0,dark:o.N0},hover:{light:o.P75,dark:o.P75},active:{light:o.P100,dark:o.P100},disabled:{light:o.P500,dark:o.P500},selected:{light:o.N0,dark:o.N0},focus:{light:o.N0,dark:o.N0}}}},c={primary:{background:{default:{light:o.P400,dark:o.P400},hover:{light:o.P200,dark:o.P200},active:{light:o.P500,dark:o.P500},disabled:{light:o.N30,dark:o.DN70},selected:{light:o.R500,dark:o.R500},focus:{light:o.P400,dark:o.P400}},boxShadow:{focus:{light:o.P100+" 0 0 0 2px",dark:o.P100+" 0 0 0 2px"}},color:{default:{light:o.N0,dark:o.N0},disabled:{light:o.N0,dark:o.DN30},selected:{light:o.N0,dark:o.N0},focus:{light:o.N0,dark:o.N0}}}};function s(e,{mode:t,appearance:n,state:a}){if(!e[n])return;const i=e[n];return Object.keys(i).reduce((e,n)=>{let o=i;return[n,a,t].forEach(t=>{o[t]&&("object"==typeof o[t]?o=o[t]:e[n]=o[t])}),e},{})}const l=(e,t)=>{const n=e(t),{buttonStyles:o}=n,c=Object(i.a)(n,["buttonStyles"]);return Object(a.a)({buttonStyles:Object(a.a)(Object(a.a)({},o),s(r,t))},c)},d=(e,t)=>{const n=e(t),{buttonStyles:o}=n,r=Object(i.a)(n,["buttonStyles"]);return Object(a.a)({buttonStyles:Object(a.a)(Object(a.a)({},o),s(c,t))},r)}},PLaw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("ERkP")),i=o(n("4KTy"));function o(e){return e&&e.__esModule?e:{default:e}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var c=function(e){return a.default.createElement(i.default,r({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M8.292 10.293a1.009 1.009 0 0 0 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955a1.01 1.01 0 0 0 0-1.419.987.987 0 0 0-1.406 0l-2.298 2.317-2.307-2.327a.99.99 0 0 0-1.406 0z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};c.displayName="ChevronDownIcon";var s=c;t.default=s},PfKa:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));const a=()=>{const e=window.open("https://support.atlassian.com/contact/","_blank");e&&e.focus()},i=()=>{window.location.reload()}},Prqj:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"C",(function(){return f})),n.d(t,"m",(function(){return m})),n.d(t,"l",(function(){return k})),n.d(t,"v",(function(){return v})),n.d(t,"t",(function(){return x})),n.d(t,"s",(function(){return j})),n.d(t,"u",(function(){return O})),n.d(t,"n",(function(){return S})),n.d(t,"r",(function(){return E})),n.d(t,"y",(function(){return P})),n.d(t,"z",(function(){return y})),n.d(t,"B",(function(){return w})),n.d(t,"x",(function(){return I})),n.d(t,"w",(function(){return N})),n.d(t,"A",(function(){return M})),n.d(t,"k",(function(){return C})),n.d(t,"q",(function(){return A})),n.d(t,"I",(function(){return L})),n.d(t,"p",(function(){return F})),n.d(t,"D",(function(){return D})),n.d(t,"F",(function(){return T})),n.d(t,"E",(function(){return R})),n.d(t,"H",(function(){return U})),n.d(t,"G",(function(){return B})),n.d(t,"o",(function(){return $}));var a=n("Czhu");const i=(e,t,n)=>(i,o)=>i({type:e,data:Object(a.a)(Object(a.a)({},t),{},{attributes:Object(a.a)(Object(a.a)({},n),o)})}).fire(),o=(e,t)=>(n,i,o,r)=>n({type:e,data:Object(a.a)(Object(a.a)({containerType:"space",containerId:i,objectType:"page",objectId:o},t),{},{actionSubjectId:o,attributes:r})}).fire(),r=i("sendUIEvent",{source:"publicLinksAdminOnboardingFlag",action:"clicked",actionSubject:"button",actionSubjectId:"remindMeLaterButton"}),c=i("sendUIEvent",{source:"publicLinksAdminOnboardingFlag",action:"clicked",actionSubject:"button",actionSubjectId:"dontShowAgainButton"}),s=i("sendUIEvent",{source:"publicLinksAdminOnboardingFlag",action:"clicked",actionSubject:"button",actionSubjectId:"closeButton"}),l=i("sendUIEvent",{source:"publicLinksAdminOnboardingFlag",action:"clicked",actionSubject:"button",actionSubjectId:"learnMoreButton"}),d=i("sendUIEvent",{source:"publicLinksAdminOnboardingFlag",action:"clicked",actionSubject:"button",actionSubjectId:"turnOnPublicLinksButton"}),u=i("sendTrackEvent",{source:"publicLinksAdminOnboardingFlag",action:"updated",actionSubject:"publicLinksSettings"}),g=i("sendUIEvent",{source:"publicLinksAdminOnboardingModal",action:"clicked",actionSubject:"button",actionSubjectId:"closeButton"}),b=i("sendUIEvent",{source:"publicLinksAdminOnboardingModal",action:"clicked",actionSubject:"button",actionSubjectId:"seeSettingsButton"}),p=i("sendUIEvent",{source:"publicLinksAdminOnboardingModal",action:"clicked",actionSubject:"button",actionSubjectId:"turnOnPublicLinksButton"}),h=i("sendTrackEvent",{source:"publicLinksAdminOnboardingModal",action:"updated",actionSubject:"publicLinksSettings"}),f=i("sendUIEvent",{source:"publicLinksSuccessFlag",action:"clicked",actionSubject:"button",actionSubjectId:"goToSettingsButton"}),m=i("sendUIEvent",{source:"publicLinksFailureFlag",action:"clicked",actionSubject:"button",actionSubjectId:"goToSettingsButton"}),k=i("sendUIEvent",{source:"publicLinksFailureFlag",action:"clicked",actionSubject:"button",actionSubjectId:"contactSupportButton"}),v=i("sendUIEvent",{source:"publicLinksSettingsScreen",action:"clicked",actionSubject:"toggle",actionSubjectId:"publicLinksToggle"}),x=i("sendUIEvent",{source:"publicLinksSettingsScreen",action:"clicked",actionSubject:"button",actionSubjectId:"confirmDisablePublicLinksButton"}),j=i("sendUIEvent",{source:"publicLinksSettingsScreen",action:"clicked",actionSubject:"button",actionSubjectId:"cancelDisablePublicLinksButton"}),O=i("sendUIEvent",{source:"publicLinksSettingsScreen",action:"clicked",actionSubject:"button",actionSubjectId:"learnMoreLink"}),S=i("sendUIEvent",{source:"publicLinksFailureFlag",action:"clicked",actionSubject:"button",actionSubjectId:"refreshPageButton"}),E=i("sendTrackEvent",{source:"publicLinksSettingsScreen",action:"updated",actionSubject:"publicLinksSettings"}),P=i("sendUIEvent",{source:"shareModal",action:"shown",actionSubject:"onboarding",actionSubjectId:"publicLinksOnboarding"}),y=i("sendUIEvent",{source:"shareModal",action:"clicked",actionSubject:"button",actionSubjectId:"publicLinksOnboardingDismissButton"}),w=i("sendUIEvent",{source:"shareModal",action:"clicked",actionSubject:"toggle",actionSubjectId:"pagePublicLinksToggle"}),I=i("sendUIEvent",{source:"shareModal",action:"clicked",actionSubject:"button",actionSubjectId:"confirmDisablePagePublicLinksButton"}),N=i("sendUIEvent",{source:"shareModal",action:"clicked",actionSubject:"button",actionSubjectId:"cancelDisablePagePublicLinksButton"}),M=o("sendTrackEvent",{source:"shareModal",action:"updated",actionSubject:"pagePublicLinksSettings"}),C=o("sendTrackEvent",{source:"editPageScreen",action:"shown",actionSubject:"page"}),A=o("sendTrackEvent",{source:"restrictionsModal",action:"updated",actionSubject:"pagePublicLinksSettings"}),L=o("sendTrackEvent",{source:"viewPageScreen",action:"shown",actionSubject:"page"}),F=i("sendOperationalEvent",{source:"viewPageScreen",action:"redirected",actionSubject:"page",actionSubjectId:"publicView"}),D=o("sendTrackEvent",{source:"viewPageScreen",action:"viewed",actionSubject:"page"}),T=i("sendUIEvent",{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:"editPageButton"},{isPublicView:!0}),R=i("sendUIEvent",{source:"viewPageScreen",action:"clicked",actionSubject:"commentEditor"},{isPublicView:!0}),U=i("sendUIEvent",{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:"getAccessToViewMacroButton"},{isPublicView:!0}),B=i("sendUIEvent",{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:"getAccessLink"}),$=i("sendUIEvent",{source:"publicViewGetAccessModal",action:"clicked",actionSubject:"button",actionSubjectId:"getAccessButton"})},"Qpq/":function(e,t,n){"use strict";n.r(t);var a=n("ERkP"),i=n.n(a),o=n("1U1M"),r=n("90UR"),c=n("XEHv"),s=n("pm4f"),l=n("2t+H"),d=n("Ua4J"),u=n("ewfN"),g=n("H5qd"),b=n.n(g),p=n("mu/F");const h=b.a`query ExternalShareAdminOnboardingQuery{...UserPrivilegeFragment siteLevelPermission{cloudId permissions}}${p.a}`,f=b.a`query ExternalShareAdminOnboardingSeenQuery($flagKey:String!)@experimental{experimentalFetchHaveISeenIt(flagKey:$flagKey){status lastSeenDate}}`,m=b.a`mutation ExternalShareAdminOnboardingSeenMutation($flagKey:String!)@experimental{experimentalSetHaveISeenIt(flagKey:$flagKey)}`,k=b.a`mutation ExternalShareAdminOnboardingEnable($cloudId:ID!){grantSitePermission(input:{cloudId:$cloudId}){cloudId}}`;var v=n("VtSi"),x=n.n(v),j=n("cbiG"),O=n.n(j),S=n("ddV6"),E=n.n(S),P=n("L21V"),y=n("RjSO"),w=n("cphC"),I=n("T+Mg"),N=n("a0gl"),M=n("DqCY"),C=n("Prqj"),A=n("PfKa"),L=n("Czhu"),F=n("Iy7w"),D=n("3IV/"),T=n("BMbf"),R=n("7xCX"),U=n("D57K"),B={default:{background:{default:{light:D.P400,dark:D.P400},hover:{light:D.P200,dark:D.P200},active:{light:D.P500,dark:D.P500},disabled:{light:D.P400,dark:D.P400},selected:{light:D.R500,dark:D.R500},focus:{light:D.P400,dark:D.P400}},boxShadow:{focus:{light:D.P100+" 0 0 0 2px",dark:D.P100+" 0 0 0 2px"}},color:{default:{light:D.N0,dark:D.N0},hover:{light:D.N0,dark:D.N0},active:{light:D.N0,dark:D.N0},disabled:{light:D.N0,dark:D.DN30},selected:{light:D.N0,dark:D.N0},focus:{light:D.N0,dark:D.N0}},outline:{focus:{light:"none",dark:"none"}}},subtle:{background:{default:{light:"none",dark:"none"},hover:{light:D.P200,dark:D.P200},active:{light:D.P500,dark:D.P500},disabled:{light:"none",dark:"none"},selected:{light:D.N700,dark:D.DN0},focusSelected:{light:D.N700,dark:D.DN0}},boxShadow:{focus:{light:D.P100+" 0 0 0 2px",dark:D.P100+" 0 0 0 2px"}},color:{default:{light:D.N0,dark:D.N0},hover:{light:D.N0,dark:D.N0},active:{light:D.N0,dark:D.N0},disabled:{light:D.N0,dark:D.N0},selected:{light:D.N0,dark:D.N0},focus:{light:D.N0,dark:D.N0}},outline:{focus:{light:"none",dark:"none"}}},"subtle-link":{textDecoration:{hover:{light:"underline "+D.P75,dark:"underline "+D.P75}},textDecorationLine:{active:{light:"none",dark:"none"}},boxShadow:{focus:{light:D.P100+" 0 0 0 2px",dark:D.P100+" 0 0 0 2px"}},color:{default:{light:D.N0,dark:D.N0},hover:{light:D.P75,dark:D.P75},active:{light:D.P100,dark:D.P100},disabled:{light:D.P500,dark:D.P500},selected:{light:D.N0,dark:D.N0},focus:{light:D.N0,dark:D.N0}}}};D.P400,D.P400,D.P200,D.P200,D.P500,D.P500,D.N30,D.DN70,D.R500,D.R500,D.P400,D.P400,D.P100,D.P100,D.N0,D.N0,D.N0,D.DN30,D.N0,D.N0,D.N0,D.N0;function $(e,t){var n=t.mode,a=t.appearance,i=t.state;if(e[a]){var o=e[a];return Object.keys(o).reduce((function(e,t){var a=o;return[t,i,n].forEach((function(n){a[n]&&("object"==typeof a[n]?a=a[n]:e[t]=a[n])})),e}),{})}}var _=function(e,t){var n=e(t),a=n.buttonStyles,i=Object(U.__rest)(n,["buttonStyles"]);return Object(U.__assign)({buttonStyles:Object(U.__assign)(Object(U.__assign)({},a),$(B,t))},i)},K=n("wn7R"),H=n("zJ/j"),G=n("kKv/"),V=n("seTC"),q=n("VOzU"),z=n("Fqgi"),J=n("gHio"),Q=n.n(J),X=n("W71K"),W=n("/3uy"),Y=n.n(W),Z=n("GJIX"),ee=n("c6GT"),te=n.n(ee);const ne=Object(P.g)({heading:{id:"experiment-external-share.admin.onboarding.modal.heading",defaultMessage:"Control public links on Confluence",description:"heading of admin onboarding modal"},text1:{id:"experiment-external-share.admin.onboarding.modal.text.1",defaultMessage:"Public links allow users to share safe, view-only versions of Confluence pages with anyone on the internet.",description:"first paragraph of onboarding modal content"},text2:{id:"experiment-external-share.admin.onboarding.modal.text.2",defaultMessage:"To keep things secure, pages shared via a public link are view-only. People without access can't edit, comment, or see any other content on your site.",description:"second paragraph of onboarding modal content"},allow:{id:"experiment-external-share.admin.onboarding.modal.button.allow",defaultMessage:"Allow public links",description:"button which turns on the feature"},settings:{id:"experiment-external-share.admin.onboarding.modal.button.settings",defaultMessage:"See public link settings",description:"button which visits the settings page for the feature"},close:{id:"experiment-external-share.admin.onboarding.modal.button.close",defaultMessage:"Close",description:"button which closes the modal"}}),ae=Object(F.a)("div",{target:"e83tvyi0"})("position:absolute;top:0;right:0;margin:",2*Object(T.h)(),"px;"),ie=Object(P.h)(({intl:e,onClose:t,onGotoSettings:n,onEnable:o,remindCount:r=0})=>{const{createAnalyticsEvent:c}=Object(y.a)();return i.a.createElement(a.Fragment,null,i.a.createElement(Z.a,{image:te.a,heading:e.formatMessage(ne.heading),actions:[{text:e.formatMessage(ne.allow),onClick:async()=>{Object(C.j)(c,{remindCount:r}),await o(),Object(C.g)(c,{previousState:"disabled",newState:"enabled"})}},{text:e.formatMessage(ne.settings),onClick:()=>{Object(C.i)(c,{remindCount:r}),n()}}]},i.a.createElement("p",null,e.formatMessage(ne.text1)),i.a.createElement("p",null,e.formatMessage(ne.text2)),i.a.createElement(ae,null,i.a.createElement(H.a,{appearance:"subtle",iconBefore:i.a.createElement(Q.a,{label:e.formatMessage(ne.close),primaryColor:D.N0}),onClick:()=>{Object(C.h)(c,{remindCount:r}),t()}}))),i.a.createElement(X.a,{name:"publicLinksAdminOnboardingModal",id:"none",attributes:{remindCount:r},createAnalyticsEvent:c}))}),oe=Object(P.g)({heading:{id:"experiment-external-share.admin.onboarding.flag.heading",defaultMessage:"Allow users to share pages publicly",description:"heading of admin onboarding flag"},text:{id:"experiment-external-share.admin.onboarding.flag.text",defaultMessage:"You can now allow all users to share <b>public links</b>. Users can use public links to share safe, view-only versions of pages with anyone on the internet.",description:"content of admin onboarding flag"},learnMore:{id:"experiment-external-share.admin.onboarding.flag.button.learn-more",defaultMessage:"Learn more",description:"link to external share documentation"},remindMeLater:{id:"experiment-external-share.admin.onboarding.flag.button.remind-me-later",defaultMessage:"Remind me later",description:"button which dismisses the dialog and will show it later"},dontShowAgain:{id:"experiment-external-share.admin.onboarding.flag.button.dont-show-again",defaultMessage:"Don't show this again",description:"button which dismisses the dialog and does not show it again"},close:{id:"experiment-external-share.admin.onboarding.flag.button.close",defaultMessage:"Close",description:"button which closes the dialog"},enable:{id:"experiment-external-share.admin.onboarding.flag.button.enable",defaultMessage:"Allow for all users",description:"button to enable the external share feature for all users"}}),re=Object(F.a)("div",{target:"eeepvr70"})({name:"cuwnet",styles:"> *{overflow:visible;}"}),ce=Object(F.a)("div",{target:"eeepvr71"})({name:"1ab1jlb",styles:"position:relative;display:flex;flex-direction:column;"}),se=Object(F.a)("h3",{target:"eeepvr72"})("color:inherit;margin-top:",2*Object(T.h)(),"px;"),le=Object(F.a)("img",{target:"eeepvr73"})("width:",24*Object(T.h)(),"px;margin:auto;"),de=Object(F.a)("div",{target:"eeepvr74"})("margin-top:",2*Object(T.h)(),"px;"),ue=Object(F.a)("div",{target:"eeepvr75"})("display:inline-block;> * > * + *::before{width:",Object(T.h)()/4,"px !important;}> * >:first-of-type button{border-top-right-radius:0;border-bottom-right-radius:0;}> * >:last-of-type button{border-top-left-radius:0;border-bottom-left-radius:0;}"),ge=Object(F.a)("div",{target:"eeepvr76"})("position:absolute;top:0;right:0;margin-right:",-.5*Object(T.h)(),"px;"),be=Object(P.h)(({intl:e,onClose:t,onGotoSettings:n,onEnable:o,onRemindMeLater:r,isReminder:c})=>{const[s,l]=Object(a.useState)(!1),{createAnalyticsEvent:d}=Object(y.a)(),u=c?1:0,g=i.a.createElement(H.a,{onClick:()=>{Object(C.d)(d,{remindCount:u}),l(!0)}},e.formatMessage(oe.learnMore));return s?i.a.createElement(ie,{onGotoSettings:n,onClose:t,onEnable:o,remindCount:u}):i.a.createElement(re,null,i.a.createElement(R.a,null,i.a.createElement(G.a.Provider,{value:_},i.a.createElement(ce,null,i.a.createElement(le,{src:Y.a}),i.a.createElement(se,null,e.formatMessage(oe.heading)),i.a.createElement(P.b,Object(L.a)({tagName:"p"},oe.text)),i.a.createElement(de,null,c?g:i.a.createElement(ue,null,i.a.createElement(K.a,null,g,i.a.createElement(G.a.Provider,{value:(e,t)=>{const{buttonStyles:n,spinnerStyles:a}=e(t);return{buttonStyles:Object(L.a)(Object(L.a)({},n),"selected"===t.state?{background:D.P500}:{}),spinnerStyles:a}}},i.a.createElement(V.a,{appearance:"tall",triggerType:"button",position:"right top"},i.a.createElement(q.a,null,i.a.createElement(z.a,{onClick:()=>{Object(C.e)(d,{remindCount:u}),r()}},e.formatMessage(oe.remindMeLater)),i.a.createElement(z.a,{onClick:()=>{Object(C.c)(d,{remindCount:u}),t()}},e.formatMessage(oe.dontShowAgain))))))),i.a.createElement(ge,null,i.a.createElement(H.a,{onClick:()=>{Object(C.b)(d,{remindCount:u}),t()},appearance:"subtle",iconBefore:i.a.createElement(Q.a,{label:e.formatMessage(oe.close),primaryColor:D.N0})})),i.a.createElement(H.a,{onClick:async()=>{Object(C.f)(d,{remindCount:u}),await o(),Object(C.a)(d,{previousState:"disabled",newState:"enabled"})},appearance:"subtle-link"},e.formatMessage(oe.enable))),i.a.createElement(X.a,{name:"publicLinksAdminOnboardingFlag",id:"none",attributes:{remindCount:u},createAnalyticsEvent:d})))))}),pe=Object(P.g)({successFlagTitle:{id:"experiment-external-share.admin.onboarding.success-flag.title",defaultMessage:"Public links allowed",description:"heading of admin onboarding success flag after enabling external sharing"},successFlagDescription:{id:"experiment-external-share.admin.onboarding.success-flag.description",defaultMessage:"Pages can now be shared with anyone.",description:"description of admin onboarding success flag after enabling external sharing"},settingsLink:{id:"experiment-external-share.admin.onboarding.success-flag.settings-link",defaultMessage:"Go to settings",description:"settings link on admin onboarding success flag after enabling external sharing"},errorFlagTitle:{id:"experiment-external-share.admin.onboarding.error-flag.title",defaultMessage:"We couldnâ€™t change public links",description:"heading of admin onboarding error flag after enabling external sharing"},errorFlagDescription:{id:"experiment-external-share.admin.onboarding.error-flag.description",defaultMessage:"Something went wrong while trying to change public links on Confluence.",description:"description of admin onboarding error flag after enabling external sharing"},supportLink:{id:"experiment-external-share.admin.onboarding.success-flag.support-link",defaultMessage:"Contact support",description:"link to contact support on admin onboarding failure flag after enabling external sharing"}}),he="external-share-admin-onboarding",fe=Object(w.a)(({coordinationClient:e,isReminder:t})=>{const[n,o]=function(e,t){var n=Object(a.useState)(!1),i=E()(n,2),o=i[0],r=i[1];return Object(a.useEffect)((function(){O()(x.a.mark((function n(){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.start(t);case 3:n.sent&&r(!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("Unable to start flow message ".concat(t,". ").concat(n.t0));case 10:case"end":return n.stop()}}),n,this,[[0,7]])})))()}),[t]),[o,function(){var n=O()(x.a.mark((function n(a){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a||o){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,e.stop(t);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error("Unable to stop flow message ".concat(t,". ").concat(n.t0));case 10:case"end":return n.stop()}}),n,this,[[2,7]])})));return function(e){return n.apply(this,arguments)}}()]}(e,he);return n?i.a.createElement(me,{stop:o,isReminder:t}):null}),me=Object(I.a)(Object(P.h)(({flags:e,intl:t,stop:n,isReminder:r})=>{const[c,s]=Object(a.useState)(0),l=e=>{setTimeout(e,Math.max(c-Date.now(),0))},{cloudId:g}=Object(N.a)(),{push:b}=Object(a.useContext)(d.a),{createAnalyticsEvent:p}=Object(y.a)(),h=()=>{b(u.ADMIN_EDIT_EXTERNAL_SHARING.toUrl())},[f]=Object(o.c)(k,{variables:{cloudId:g},refetchQueries:[{query:M.a}],onCompleted:()=>{l(()=>{e.showSuccessFlag({id:"external-share-turn-on-success",title:t.formatMessage(pe.successFlagTitle),description:t.formatMessage(pe.successFlagDescription),actions:[{content:t.formatMessage(pe.settingsLink),onClick:()=>{Object(C.C)(p),h(),e.hideFlag("external-share-turn-on-success")}}]}),n()})},onError:()=>{l(()=>{e.showErrorFlag({title:t.formatMessage(pe.errorFlagTitle),description:t.formatMessage(pe.errorFlagDescription),actions:[{content:t.formatMessage(pe.supportLink),onClick:()=>{Object(C.l)(p),Object(A.a)()}},{content:t.formatMessage(pe.settingsLink),onClick:()=>{Object(C.m)(p),h()}}]}),n()})}}),[v]=Object(o.c)(m),x=async(e=!1)=>{e&&r||await v({variables:{flagKey:he}}),e&&!r||await v({variables:{flagKey:"external-share-admin-onboarding-reminder"}})};return Object(a.useEffect)(()=>{e.showFlag({customComponent:({id:t})=>i.a.createElement(be,{isReminder:r,onClose:async()=>{e.hideFlag(t),await x(),n()},onGotoSettings:async()=>{e.hideFlag(t),await x(),h(),n()},onEnable:async()=>{e.hideFlag(t),s(Date.now()+500),await x(),await f()},onRemindMeLater:async()=>{e.hideFlag(t),await x(!0),n()}})})},[]),null}));n.d(t,"ExternalShareOnboarding",(function(){return ke}));const ke=()=>{const e=Object(r.c)(),t=!e.isLoading&&e.isVariation,{loading:n,data:g}=Object(o.d)(h,{skip:!t}),b=Object(s.a)(g),p=b===l.a.PRODUCT_ADMIN||b===l.a.SITE_ADMIN,k=Boolean(g&&g.siteLevelPermission.permissions.includes(c.b)),{location:v}=Object(a.useContext)(d.a),x=!(v&&u.ADMIN_EDIT_EXTERNAL_SHARING.match(v.pathname))&&t&&!n&&p,j=e=>{var t,n;const{loading:a,data:i}=Object(o.d)(f,{skip:!x,variables:{flagKey:e},fetchPolicy:"no-cache"});return{loading:a,status:Boolean(null!=(n=i)&&null!=(n=n.experimentalFetchHaveISeenIt)?n.status:n),lastSeenDate:null!=(t=i)&&null!=(t=t.experimentalFetchHaveISeenIt)?t.lastSeenDate:t}},{loading:O,status:S,lastSeenDate:E}=j(he),{loading:P,status:y}=j("external-share-admin-onboarding-reminder"),w=O||P,I=!(w||!S||y||!E)&&new Date(E).valueOf()<Date.now()-2592e5,N=x&&!w&&k,[M]=Object(o.c)(m);return Object(a.useEffect)(()=>{N&&(S||M({variables:{flagKey:he}}),y||M({variables:{flagKey:"external-share-admin-onboarding-reminder"}}))},[N]),!x||k||w||S&&!I?null:i.a.createElement(fe,{isReminder:I})}},Ua7V:function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,o=void 0;try{for(var r,c=e[Symbol.iterator]();!(a=(r=c.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(s){i=!0,o=s}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return n}}},XEHv:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));const a="share/page/external",i="view/page/external"},c6GT:function(e,t,n){e.exports=n.p+"bRgNpjUtbu.svg"},ddV6:function(e,t,n){var a=n("qPgQ"),i=n("Ua7V"),o=n("peMk"),r=n("f2kJ");e.exports=function(e,t){return a(e)||i(e,t)||o(e,t)||r()}},f2kJ:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},"mu/F":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("H5qd"),i=n.n(a);const o=i.a`fragment IsProductAdminFragment on Query{user(current:true){id confluence{operations{operation targetType}}}}`,r=i.a`fragment IsSiteAdminFragment on Query{isSiteAdmin}`,c=i.a`fragment UserPrivilegeFragment on Query{...IsProductAdminFragment ...IsSiteAdminFragment}${o}${r}`},pm4f:function(e,t,n){"use strict";var a=n("2t+H");n.d(t,"a",(function(){return i}));const i=e=>{const t=(e=>{var t;return e&&Boolean(null!=(t=e)?t.isSiteAdmin:t)})(e),n=(e=>{var t;return e&&((null!=(t=e)&&null!=(t=t.user)&&null!=(t=t.confluence)?t.operations:t)||[]).some(({operation:e,targetType:t})=>"administer"===e&&"application"===t)})(e);return void 0===t?void 0:t?a.a.SITE_ADMIN:n?a.a.PRODUCT_ADMIN:a.a.NON_ADMIN}},qPgQ:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},rr2M:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var a=n("KsTJ"),i=n("BMbf"),o=n("ZgvQ");a.default.div`
  height: 100%;
  left: 0;
  overflow-y: auto;
  position: absolute;
  top: ${e=>e.scrollDistance}px;
  width: 100%;
`,a.default.div`
  flex: 1 1 auto;
  padding: ${Object(o.multiply)(i.h,2)}px ${Object(o.multiply)(i.h,3)}px ${i.h}px;

  p:last-child,
  ul:last-child,
  ol:last-child {
    margin-bottom: 0;
  }
`,a.default.h4`
  color: inherit;
  font-size: 20px;
  font-style: inherit;
  font-weight: 500;
  letter-spacing: -0.008em;
  line-height: 1.2;
  margin-bottom: ${i.h}px;
`;const r=a.default.img`
  height: auto;
  max-width: 100%;
`,c=(a.default.div`
  display: flex;
  justify-content: space-between;
  padding: 0 ${Object(o.multiply)(i.h,3)}px ${Object(o.multiply)(i.h,2)}px;
`,a.default.div`
  display: flex;
  margin: 0 -${Object(o.divide)(i.h,2)}px;
  /* When there is more than one action, place primary action visually on the
  right, but keep it's position as the first focusable element in the DOM */
  flex-direction: row-reverse;
`),s=a.default.div`
  margin: 0 ${Object(o.divide)(i.h,2)}px;
`},seTC:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("ERkP"),i=n.n(a),o=n("745k");class r extends a.Component{constructor(){super(...arguments),this.state={isOpen:this.props.defaultOpen,items:[...this.props.items]},this.findActivatedGroup=e=>this.state.items.filter(t=>t.items.indexOf(e)>-1)[0],this.handleItemActivation=e=>{const t=e.item,n=this.findActivatedGroup(t),a=[...this.state.items];switch(t.type){case"checkbox":t.isChecked=!t.isChecked,this.props.onItemActivated({item:t}),this.setState({items:a});break;case"radio":n.items.forEach(e=>{e.isChecked=e===t}),this.props.onItemActivated({item:t}),this.setState({items:a});break;case"link":default:this.props.onItemActivated({item:t}),this.close()}},this.handleOpenChange=(e,...t)=>{this.state.isOpen!==e.isOpen&&(this.setState({isOpen:e.isOpen}),this.props.onOpenChange(e,...t))},this.close=(...e)=>{!1!==this.state.isOpen&&(this.setState({isOpen:!1}),this.props.onOpenChange({isOpen:!1},...e))}}UNSAFE_componentWillReceiveProps(e){e.items!==this.state.items&&this.setState({items:[...e.items]}),e.isOpen!==this.props.isOpen&&this.setState({isOpen:e.isOpen})}render(){const{isOpen:e}=this.state,{appearance:t,boundariesElement:n,children:a,isLoading:r,items:c,position:s,isMenuFixed:l,shouldAllowMultilineItems:d,shouldFitContainer:u,shouldFlip:g,testId:b,trigger:p,triggerButtonProps:h,triggerType:f,onPositioned:m}=this.props;return i.a.createElement(o.a,{appearance:t,boundariesElement:n,isOpen:e,isLoading:r,items:c,onItemActivated:this.handleItemActivation,onOpenChange:this.handleOpenChange,position:s,isMenuFixed:l,shouldAllowMultilineItems:d,shouldFitContainer:u,shouldFlip:g,trigger:p,triggerButtonProps:h,triggerType:f,onPositioned:m,testId:b},a)}}r.defaultProps={appearance:"default",boundariesElement:"viewport",defaultOpen:!1,isLoading:!1,isOpen:!1,items:[],onItemActivated:()=>{},onOpenChange:()=>{},position:"bottom left",isMenuFixed:!1,shouldAllowMultilineItems:!1,shouldFitContainer:!1,shouldFlip:!0,triggerType:"default",onPositioned:()=>{}}}}]);
//# sourceMappingURL=external-share-onboarding~b59ad437.4g4uj8hPdo.js.map