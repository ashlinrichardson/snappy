(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"+2W5":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("KsTJ"),o=n("XayN"),i=n("m/AV");const s=r.css`
  /* =============== INDENTATION SPACING ========= */

  ul,
  ol {
    box-sizing: border-box;
    padding-left: 24px;
  }

  ${o.b}, ${i.b} {
    /*
      Ensures list item content adheres to the list's margin instead
      of filling the entire block row. This is important to allow
      clicking interactive elements which are floated next to a list.

      For some history and context on this block, see PRs related to tickets.:
      @see ED-6551 - original issue.
      @see ED-7015 - follow up issue.
      @see ED-7447 - flow-root change.

      We use 'display: table' (old clear fix / new block formatting context hack) 
      for older browsers and 'flow-root' for modern browsers.

      @see https://css-tricks.com/display-flow-root/
    */
    // For older browsers the do not support flow-root.
    display: table;
    display: flow-root;
  }

  /* =============== INDENTATION AESTHETICS ========= */

  /**
        We support nested lists up to six levels deep.
    **/

  /* LEGACY LISTS */

  ul,
  ul ul ul ul {
    list-style-type: disc;
  }

  ul ul,
  ul ul ul ul ul {
    list-style-type: circle;
  }

  ul ul ul,
  ul ul ul ul ul ul {
    list-style-type: square;
  }

  ol,
  ol ol ol ol {
    list-style-type: decimal;
  }
  ol ol,
  ol ol ol ol ol {
    list-style-type: lower-alpha;
  }
  ol ol ol,
  ol ol ol ol ol ol {
    list-style-type: lower-roman;
  }

  /* PREDICTABLE LISTS */

  ol[data-indent-level='1'],
  ol[data-indent-level='4'] {
    list-style-type: decimal;
  }

  ol[data-indent-level='2'],
  ol[data-indent-level='5'] {
    list-style-type: lower-alpha;
  }

  ol[data-indent-level='3'],
  ol[data-indent-level='6'] {
    list-style-type: lower-roman;
  }

  ul[data-indent-level='1'],
  ul[data-indent-level='4'] {
    list-style-type: disc;
  }

  ul[data-indent-level='2'],
  ul[data-indent-level='5'] {
    list-style-type: circle;
  }

  ul[data-indent-level='3'],
  ul[data-indent-level='6'] {
    list-style-type: square;
  }
`},"/GYj":function(e,t,n){"use strict";n.r(t);var r=n("634R");n.d(t,"expand",(function(){return r.a})),n.d(t,"expandToJSON",(function(){return r.b}));var o=n("XQko");n.d(t,"confluenceJiraIssue",(function(){return o.a}));var i=n("L15d");n.d(t,"confluenceUnsupportedBlock",(function(){return i.a}));var s=n("g2hT");n.d(t,"confluenceUnsupportedInline",(function(){return s.a}));var a=n("kLA4");n.d(t,"doc",(function(){return a.a}));var c=n("ROrA");n.d(t,"blockquote",(function(){return c.a}));var l=n("m/AV");n.d(t,"bulletList",(function(){return l.a})),n.d(t,"bulletListSelector",(function(){return l.b}));var u=n("xxff");n.d(t,"codeBlock",(function(){return u.a})),n.d(t,"codeBlockToJSON",(function(){return u.b}));var d=n("kLLT");n.d(t,"hardBreak",(function(){return d.a}));var p=n("wOaT");n.d(t,"heading",(function(){return p.a}));var h=n("LZ3D");n.d(t,"rule",(function(){return h.a}));var f=n("XayN");n.d(t,"orderedList",(function(){return f.a})),n.d(t,"orderedListSelector",(function(){return f.b}));var m=n("iWU4");n.d(t,"paragraph",(function(){return m.a}));var v=n("db9m");n.d(t,"emoji",(function(){return v.a}));var g=n("cluY");n.d(t,"image",(function(){return g.a}));var y=n("/0Vt");n.d(t,"mention",(function(){return y.a})),n.d(t,"mentionToJSON",(function(){return y.b}));var b=n("Iqa1");n.d(t,"listItem",(function(){return b.a}));var w=n("25UG");n.d(t,"panel",(function(){return w.c})),n.d(t,"customPanel",(function(){return w.b})),n.d(t,"PanelType",(function(){return w.a}));var _=n("YR5y");n.d(t,"text",(function(){return _.a}));var k=n("ibKD");n.d(t,"unknownBlock",(function(){return k.a}));var S=n("qyVl");n.d(t,"caption",(function(){return S.a}));var O=n("DPgy");n.d(t,"media",(function(){return O.b})),n.d(t,"copyPrivateMediaAttributes",(function(){return O.a})),n.d(t,"mediaToJSON",(function(){return O.c}));var x=n("oW86");n.d(t,"mediaGroup",(function(){return x.a}));var C=n("Vhfh");n.d(t,"mediaSingle",(function(){return C.a})),n.d(t,"mediaSingleWithCaption",(function(){return C.b})),n.d(t,"mediaSingleToJSON",(function(){return C.c}));var E=n("qFXU");n.d(t,"table",(function(){return E.b})),n.d(t,"tableToJSON",(function(){return E.n})),n.d(t,"tableCell",(function(){return E.f})),n.d(t,"toJSONTableCell",(function(){return E.o})),n.d(t,"tableHeader",(function(){return E.j})),n.d(t,"toJSONTableHeader",(function(){return E.p})),n.d(t,"tableRow",(function(){return E.m})),n.d(t,"tableBackgroundColorPalette",(function(){return E.e})),n.d(t,"tableBackgroundBorderColor",(function(){return E.c})),n.d(t,"tableBackgroundColorNames",(function(){return E.d})),n.d(t,"setCellAttrs",(function(){return E.a})),n.d(t,"tablePrefixSelector",(function(){return E.l})),n.d(t,"tableCellSelector",(function(){return E.i})),n.d(t,"tableHeaderSelector",(function(){return E.k})),n.d(t,"tableCellContentWrapperSelector",(function(){return E.h})),n.d(t,"tableCellContentDomSelector",(function(){return E.g}));var T=n("uxUX");n.d(t,"decisionList",(function(){return T.a})),n.d(t,"decisionListSelector",(function(){return T.b}));var N=n("eYib");n.d(t,"decisionItem",(function(){return N.a}));var A=n("QhI2");n.d(t,"taskList",(function(){return A.a})),n.d(t,"taskListSelector",(function(){return A.b}));var R=n("ezrE");n.d(t,"taskItem",(function(){return R.a}));var M=n("MhQf");n.d(t,"extension",(function(){return M.a})),n.d(t,"extensionWithLocalId",(function(){return M.b}));var I=n("nNC9");n.d(t,"inlineExtension",(function(){return I.a})),n.d(t,"inlineExtensionWithLocalId",(function(){return I.b}));var j=n("NXWE");n.d(t,"bodiedExtension",(function(){return j.a})),n.d(t,"bodiedExtensionWithLocalId",(function(){return j.b}));var D=n("DGm0");n.d(t,"date",(function(){return D.a}));var P=n("49w7");n.d(t,"placeholder",(function(){return P.a}));var $=n("NOiQ");n.d(t,"layoutSection",(function(){return $.a}));var L=n("h6y6");n.d(t,"layoutColumn",(function(){return L.a}));var z=n("DyvO");n.d(t,"inlineCard",(function(){return z.a}));var B=n("UnAI");n.d(t,"blockCard",(function(){return B.a}));var F=n("duTc");n.d(t,"unsupportedBlock",(function(){return F.a}));var V=n("jxt5");n.d(t,"unsupportedInline",(function(){return V.a}));var q=n("JdPE");n.d(t,"status",(function(){return q.a}));var W=n("ErTH");n.d(t,"nestedExpand",(function(){return W.a}));var K=n("vRWe");n.d(t,"embedCard",(function(){return K.a}))},"/J5f":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"h",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"i",(function(){return d}));const r=(e,t)=>Object.keys(t).filter(n=>{const{details:r}=t[n];return r&&r.meta.definitionId===e}),o=(e,t)=>e.getState()[t]||{status:"pending",lastUpdatedAt:Date.now()},i=(e,t)=>{if(t&&t.data){const e=(e=>e["atlassian:visitUrl"])(t.data);if(e)return e}return e},s=e=>e&&e.meta&&e.meta.definitionId,a=e=>e&&e.meta&&e.meta.key,c=e=>e&&e.meta&&e.meta.resourceType,l=e=>e&&e.meta.auth||[],u=({meta:e})=>{const{access:t,visibility:n}=e;switch(t){case"forbidden":return"not_found"===n?"not_found":"forbidden";case"unauthorized":return"unauthorized";default:return"resolved"}},d=e=>["unauthorized","forbidden","errored","resolved","not_found"].indexOf(e)>-1},"0Hbo":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n("ehfC"),s=n("lELC"),a=n("I9T1"),c=n("UdmJ"),l=n("ALnk");if("undefined"!=typeof WeakMap){var u=new WeakMap;r=function(e){return u.get(e)},o=function(e,t){return u.set(e,t),t}}else{var d=[],p=0;r=function(e){for(var t=0;t<d.length;t+=2)if(d[t]==e)return d[t+1]},o=function(e,t){return 10==p&&(p=0),d[p++]=e,d[p++]=t}}var h=function(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r},f=function(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r};function m(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}function v(e,t){var n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(e){return Number(e)})):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var s in t){var a=t[s].getFromDOM,c=a&&a(e);null!=c&&(i[s]=c)}return i}function g(e,t){var n={};for(var r in 1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(",")),t){var o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function y(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}f.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,s=o+1,a=1;i<this.width&&this.map[t+a]==n;a++)i++;for(var c=1;s<this.height&&this.map[t+this.width*c]==n;c++)s++;return new h(r,o,i,s)}}throw new RangeError("No cell with offset "+e+" found")},f.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},f.prototype.nextCell=function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,s=r.top,a=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[s*this.width+(n<0?o-1:i)]:(n<0?0==s:a==this.height)?null:this.map[o+this.width*(n<0?s-1:a)]},f.prototype.rectBetween=function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,s=n.bottom,a=this.findCell(t),c=a.left,l=a.right,u=a.top,d=a.bottom;return new h(Math.min(r,c),Math.min(i,u),Math.max(o,l),Math.max(s,d))},f.prototype.cellsInRect=function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==e.left&&o&&this.map[i-1]==s||r==e.top&&r&&this.map[i-this.width]==s||t.push(s))}return t},f.prototype.positionAt=function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){for(var s=t+e*this.width,a=(e+1)*this.width;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}},f.get=function(e){return r(e)||o(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var s=0;s<r;s++)for(var a=e.child(s),c=0;c<a.childCount;c++){var l=a.child(c);s+l.attrs.rowspan>r&&(i+=l.attrs.colspan)}for(var u=0;u<o.childCount;u++){var d=o.child(u);i+=d.attrs.colspan,d.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,s=[],a=0,c=t*n;a<c;a++)r[a]=0;for(var l=0,u=0;l<n;l++){var d=e.child(l);u++;for(var p=0;;p++){for(;o<r.length&&0!=r[o];)o++;if(p==d.childCount)break;for(var h=d.child(p),v=h.attrs,g=v.colspan,y=v.rowspan,b=v.colwidth,w=0;w<y;w++){if(w+l>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:y-w});break}for(var _=o+w*t,k=0;k<g;k++){0==r[_+k]?r[_+k]=u:(i||(i=[])).push({type:"collision",row:l,pos:u,n:g-k});var S=b&&b[k];if(S){var O=(_+k)%t*2,x=s[O];null==x||x!=S&&1==s[O+1]?(s[O]=S,s[O+1]=1):x==S&&s[O+1]++}}}o+=g,u+=h.nodeSize}for(var C=(l+1)*t,E=0;o<C;)0==r[o++]&&E++;E&&(i||(i=[])).push({type:"missing",row:l,n:E}),u++}for(var T=new f(t,n,r,i),N=!1,A=0;!N&&A<s.length;A+=2)null!=s[A]&&s[A+1]<n&&(N=!0);N&&function(e,t,n){e.problems||(e.problems=[]);for(var r=0,o={};r<e.map.length;r++){var i=e.map[r];if(!o[i]){o[i]=!0;for(var s=n.nodeAt(i),a=null,c=0;c<s.attrs.colspan;c++){var l=(r+c)%e.width,u=t[2*l];null==u||s.attrs.colwidth&&s.attrs.colwidth[c]==u||((a||(a=m(s.attrs)))[c]=u)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}}(T,s,e);return T}(e))};var b=function(e){function t(t,n){void 0===n&&(n=t);var r=t.node(-1),o=f.get(r),s=t.start(-1),a=o.rectBetween(t.pos-s,n.pos-s),c=t.node(0),l=o.cellsInRect(a).filter((function(e){return e!=n.pos-s}));l.unshift(n.pos-s);var u=l.map((function(e){var t=r.nodeAt(e),n=e+s+1;return new i.SelectionRange(c.resolve(n),c.resolve(n+t.content.size))}));e.call(this,u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,n){var r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(C(r)&&C(o)&&T(r,o)){var s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?t.rowSelection(r,o):s&&this.isColSelection()?t.colSelection(r,o):new t(r,o)}return i.TextSelection.between(r,o)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=f.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],s=r.top;s<r.bottom;s++){for(var c=[],l=s*t.width+r.left,u=r.left;u<r.right;u++,l++){var d=t.map[l];if(!o[d]){o[d]=!0;var p=t.findCell(d),h=e.nodeAt(d),m=r.left-p.left,v=p.right-r.right;if(m>0||v>0){var g=h.attrs;m>0&&(g=R(g,0,m)),v>0&&(g=R(g,g.colspan-v,v)),h=p.left<r.left?h.type.createAndFill(g):h.type.create(g,h.content)}if(p.top<r.top||p.bottom>r.bottom){var y=A(h.attrs,"rowspan",Math.min(p.bottom,r.bottom)-Math.max(p.top,r.top));h=p.top<r.top?h.type.createAndFill(y):h.type.create(y,h.content)}c.push(h)}}i.push(e.child(s).copy(a.Fragment.from(c)))}var b=this.isColSelection()&&this.isRowSelection()?e:i;return new a.Slice(a.Fragment.from(b),1,1)},t.prototype.replace=function(t,n){void 0===n&&(n=a.Slice.empty);for(var r=t.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],c=s.$from,l=s.$to,u=t.mapping.slice(r);t.replace(u.map(c.pos),u.map(l.pos),i?a.Slice.empty:n)}var d=e.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);d&&t.setSelection(d)},t.prototype.replaceWith=function(e,t){this.replace(e,new a.Slice(a.Fragment.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=f.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},t.colSelection=function(e,n){void 0===n&&(n=e);var r=f.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(n.pos-o),a=e.node(0);return i.top<=s.top?(i.top>0&&(e=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(n=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(e=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new t(e,n)},t.prototype.isRowSelection=function(){var e=f.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);if(Math.min(n,r)>0)return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,n){void 0===n&&(n=e);var r=f.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(n.pos-o),a=e.node(0);return i.left<=s.left?(i.left>0&&(e=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(n=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(e=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new t(e,n)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,n,r){return void 0===r&&(r=n),new t(e.resolve(n),e.resolve(r))},t.prototype.getBookmark=function(){return new w(this.$anchorCell.pos,this.$headCell.pos)},t}(i.Selection);b.prototype.visible=!1,i.Selection.jsonID("cell",b);var w=function(e,t){this.anchor=e,this.head=t};function _(e){if(!(e.selection instanceof b))return null;var t=[];return e.selection.forEachCell((function(e,n){t.push(s.Decoration.node(n,n+e.nodeSize,{class:"selectedCell"}))})),s.DecorationSet.create(e.doc,t)}w.prototype.map=function(e){return new w(e.map(this.anchor),e.map(this.head))},w.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&T(t,n)?new b(t,n):i.Selection.near(n,1)};var k=new i.PluginKey("selectingCells");function S(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function O(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function x(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:S(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var s=o.type.spec.tableRole;if("cell"==s||"header_cell"==s)return e.doc.resolve(i-o.nodeSize)}}(t.$head)}function C(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function E(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function T(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function N(e,t,n){var r=e.start(-1),o=f.get(e.node(-1)).nextCell(e.pos-r,t,n);return null==o?null:e.node(0).resolve(r+o)}function A(e,t,n){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r}function R(e,t,n){void 0===n&&(n=1);var r=A(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((function(e){return e>0}))||(r.colwidth=null)),r}function M(e,t,n){void 0===n&&(n=1);var r=A(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}function I(e,t,n){for(var r=y(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}function j(e){var t,n=e.selection,r=x(e),o=r.node(-1),i=r.start(-1),s=f.get(o);return(t=n instanceof b?s.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):s.findCell(r.pos-i)).tableStart=i,t.map=s,t.table=o,t}function D(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(n>0&&r>0||"table"==t.firstChild.type.spec.tableRole);)n--,r--,t=t.firstChild.content;var o=t.firstChild,i=o.type.spec.tableRole,s=o.type.schema,c=[];if("row"==i)for(var l=0;l<t.childCount;l++){var u=t.child(l).content,d=l?0:Math.max(0,n-1),p=l<t.childCount-1?0:Math.max(0,r-1);(d||p)&&(u=P(y(s).row,new a.Slice(u,d,p)).content),c.push(u)}else{if("cell"!=i&&"header_cell"!=i)return null;c.push(n||r?P(y(s).row,new a.Slice(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],i=o.childCount-1;i>=0;i--)for(var s=o.child(i).attrs,c=s.rowspan,l=s.colspan,u=r;u<r+c;u++)n[u]=(n[u]||0)+l;for(var d=0,p=0;p<n.length;p++)d=Math.max(d,n[p]);for(var h=0;h<n.length;h++)if(h>=t.length&&t.push(a.Fragment.empty),n[h]<d){for(var f=y(e).cell.createAndFill(),m=[],v=n[h];v<d;v++)m.push(f);t[h]=t[h].append(a.Fragment.from(m))}return{height:t.length,width:d,rows:t}}(s,c)}function P(e,t){var n=e.createAndFill();return new c.Transform(n).replace(0,n.content.size,t).doc}function $(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var s=[],c=[],l=0;l<i.length;l++){for(var u=i[l],d=[],p=s[l]||0,h=0;p<t;h++){var f=u.child(h%u.childCount);p+f.attrs.colspan>t&&(f=f.type.create(R(f.attrs,f.attrs.colspan,p+f.attrs.colspan-t),f.content)),d.push(f),p+=f.attrs.colspan;for(var m=1;m<f.attrs.rowspan;m++)s[l+m]=(s[l+m]||0)+f.attrs.colspan}c.push(a.Fragment.from(d))}i=c,r=t}if(o!=n){for(var v=[],g=0,y=0;g<n;g++,y++){for(var b=[],w=i[y%o],_=0;_<w.childCount;_++){var k=w.child(_);g+k.attrs.rowspan>n&&(k=k.type.create(A(k.attrs,"rowspan",Math.max(1,n-k.attrs.rowspan)),k.content)),b.push(k)}v.push(a.Fragment.from(b))}i=v,o=n}return{width:r,height:o,rows:i}}function L(e,t,n,r,o,i,s,a){if(0==s||s==t.height)return!1;for(var c=!1,l=o;l<i;l++){var u=s*t.width+l,d=t.map[u];if(t.map[u-t.width]==d){c=!0;var p=n.nodeAt(d),h=t.findCell(d),f=h.top,m=h.left;e.setNodeMarkup(e.mapping.slice(a).map(d+r),null,A(p.attrs,"rowspan",s-f)),e.insert(e.mapping.slice(a).map(t.positionAt(s,m,n)),p.type.createAndFill(A(p.attrs,"rowspan",f+p.attrs.rowspan-s))),l+=p.attrs.colspan-1}}return c}function z(e,t,n,r,o,i,s,a){if(0==s||s==t.width)return!1;for(var c=!1,l=o;l<i;l++){var u=l*t.width+s,d=t.map[u];if(t.map[u-1]==d){c=!0;var p=n.nodeAt(d),h=t.colCount(d),f=e.mapping.slice(a).map(d+r);e.setNodeMarkup(f,null,R(p.attrs,s-h,p.attrs.colspan-(s-h))),e.insert(f+p.nodeSize,p.type.createAndFill(R(p.attrs,0,s-h))),l+=p.attrs.rowspan-1}}return c}function B(e,t,n,r,o){var i=n?e.doc.nodeAt(n-1):e.doc,s=f.get(i),c=r.top,l=r.left,u=l+o.width,d=c+o.height,p=e.tr,h=0;function m(){i=n?p.doc.nodeAt(n-1):p.doc,s=f.get(i),h=p.mapping.maps.length}(function(e,t,n,r,o,i,s){var c,l,u=y(e.doc.type.schema);if(o>t.width)for(var d=0,p=0;d<t.height;d++){var h=n.child(d);p+=h.nodeSize;var f=[],m=void 0;m=null==h.lastChild||h.lastChild.type==u.cell?c||(c=u.cell.createAndFill()):l||(l=u.header_cell.createAndFill());for(var v=t.width;v<o;v++)f.push(m);e.insert(e.mapping.slice(s).map(p-1+r),f)}if(i>t.height){for(var g=[],b=0,w=(t.height-1)*t.width;b<Math.max(t.width,o);b++){var _=!(b>=t.width)&&n.nodeAt(t.map[w+b]).type==u.header_cell;g.push(_?l||(l=u.header_cell.createAndFill()):c||(c=u.cell.createAndFill()))}for(var k=u.row.create(null,a.Fragment.from(g)),S=[],O=t.height;O<i;O++)S.push(k);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),S)}return!(!c&&!l)})(p,s,i,n,u,d,h)&&m(),L(p,s,i,n,l,u,c,h)&&m(),L(p,s,i,n,l,u,d,h)&&m(),z(p,s,i,n,c,d,l,h)&&m(),z(p,s,i,n,c,d,u,h)&&m();for(var v=c;v<d;v++){var g=s.positionAt(v,l,i),w=s.positionAt(v,u,i);p.replace(p.mapping.slice(h).map(g+n),p.mapping.slice(h).map(w+n),new a.Slice(o.rows[v-c],0,0))}m(),p.setSelection(new b(p.doc.resolve(n+s.positionAt(c,l,i)),p.doc.resolve(n+s.positionAt(d-1,u-1,i)))),t(p)}var F=l.keydownHandler({ArrowLeft:q("horiz",-1),ArrowRight:q("horiz",1),ArrowUp:q("vert",-1),ArrowDown:q("vert",1),"Shift-ArrowLeft":W("horiz",-1),"Shift-ArrowRight":W("horiz",1),"Shift-ArrowUp":W("vert",-1),"Shift-ArrowDown":W("vert",1),Backspace:K,"Mod-Backspace":K,Delete:K,"Mod-Delete":K});function V(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function q(e,t){return function(n,r,o){var s=n.selection;if(s instanceof b)return V(n,r,i.Selection.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;var a=J(o,e,t);if(null==a)return!1;if("horiz"==e)return V(n,r,i.Selection.near(n.doc.resolve(s.head+t),t));var c,l=n.doc.resolve(a),u=N(l,e,t);return c=u?i.Selection.near(u,1):t<0?i.Selection.near(n.doc.resolve(l.before(-1)),-1):i.Selection.near(n.doc.resolve(l.after(-1)),1),V(n,r,c)}}function W(e,t){return function(n,r,o){var i=n.selection;if(!(i instanceof b)){var s=J(o,e,t);if(null==s)return!1;i=new b(n.doc.resolve(s))}var a=N(i.$headCell,e,t);return!!a&&V(n,r,new b(i.$anchorCell,a))}}function K(e,t){var n=e.selection;if(!(n instanceof b))return!1;if(t){var r=e.tr,o=y(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new a.Slice(o,0,0))})),r.docChanged&&t(r)}return!0}function U(e,t){var n=S(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new b(n))),!0)}function H(e,t,n){if(!O(e.state))return!1;var r=D(n),o=e.state.selection;if(o instanceof b){r||(r={width:1,height:1,rows:[a.Fragment.from(P(y(e.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),c=f.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=$(r,c.right-c.left,c.bottom-c.top),B(e.state,e.dispatch,s,c,r),!0}if(r){var l=x(e.state),u=l.start(-1);return B(e.state,e.dispatch,u,f.get(l.node(-1)).findCell(l.pos-u),r),!0}return!1}function G(e,t){if(!t.ctrlKey&&!t.metaKey){var n,r=Y(e,t.target);if(t.shiftKey&&e.state.selection instanceof b)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(n=S(e.state.selection.$anchor))&&X(e,t).pos!=n.pos)o(n,t),t.preventDefault();else if(!r)return;e.root.addEventListener("mouseup",i),e.root.addEventListener("dragstart",i),e.root.addEventListener("mousemove",s)}function o(t,n){var r=X(e,n),o=null==k.getState(e.state);if(!r||!T(t,r)){if(!o)return;r=t}var i=new b(t,r);if(o||!e.state.selection.eq(i)){var s=e.state.tr.setSelection(i);o&&s.setMeta(k,t.pos),e.dispatch(s)}}function i(){e.root.removeEventListener("mouseup",i),e.root.removeEventListener("dragstart",i),e.root.removeEventListener("mousemove",s),null!=k.getState(e.state)&&e.dispatch(e.state.tr.setMeta(k,-1))}function s(n){var s,a=k.getState(e.state);if(null!=a)s=e.state.doc.resolve(a);else if(Y(e,n.target)!=r&&!(s=X(e,t)))return i();s&&o(s,n)}}function J(e,t,n){if(!(e.state.selection instanceof i.TextSelection))return null;for(var r=e.state.selection.$head,o=r.depth-1;o>=0;o--){var s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var a=r.before(o),c="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(c)?a:null}}return null}function Y(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function X(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?S(e.state.doc.resolve(n.pos)):null}var Q=new i.PluginKey("fix-tables");function Z(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){var o=f.get(t);if(!o.problems)return r;r||(r=e.tr);for(var i,s,a=[],c=0;c<o.height;c++)a.push(0);for(var l=0;l<o.problems.length;l++){var u=o.problems[l];if("collision"==u.type){for(var d=t.nodeAt(u.pos),p=0;p<d.attrs.rowspan;p++)a[u.row+p]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,R(d.attrs,d.attrs.colspan-u.n,u.n))}else if("missing"==u.type)a[u.row]+=u.n;else if("overlong_rowspan"==u.type){var h=t.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,A(h.attrs,"rowspan",h.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var m=t.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,A(m.attrs,"colwidth",u.colwidth))}}for(var v=0;v<a.length;v++)a[v]&&(null==i&&(i=v),s=v);for(var g=0,b=n+1;g<o.height;g++){var w=t.child(g),_=b+w.nodeSize,k=a[g];if(k>0){var S="cell";w.firstChild&&(S=w.firstChild.type.spec.tableRole);for(var O=[],x=0;x<k;x++)O.push(y(e.schema)[S].createAndFill());var C=0!=g&&i!=g-1||s!=g?_-1:b+1;r.insert(r.mapping.map(C),O)}b=_}return r.setMeta(Q,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&function e(t,n,r,o){var i=t.childCount,s=n.childCount;e:for(var a=0,c=0;a<s;a++){for(var l=n.child(a),u=c,d=Math.min(i,a+3);u<d;u++)if(t.child(u)==l){c=u+1,r+=l.nodeSize;continue e}o(l,r),c<i&&t.child(c).sameMarkup(l)?e(t.child(c),l,r+1,o):l.nodesBetween(0,l.content.size,o,r+1),r+=l.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}function ee(e,t,n){var r=t.map,o=t.tableStart,i=t.table,s=n>0?-1:0;I(r,i,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var c=a*r.width+n;if(n>0&&n<r.width&&r.map[c-1]==r.map[c]){var l=r.map[c],u=i.nodeAt(l);e.setNodeMarkup(e.mapping.map(o+l),null,M(u.attrs,n-r.colCount(l))),a+=u.attrs.rowspan-1}else{var d=null==s?y(i.type.schema).cell:i.nodeAt(r.map[c+s]).type,p=r.positionAt(a,n,i);e.insert(e.mapping.map(o+p),d.createAndFill())}}return e}function te(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,s=e.mapping.maps.length,a=0;a<r.height;){var c=a*r.width+n,l=r.map[c],u=o.nodeAt(l);if(n>0&&r.map[c-1]==l||n<r.width-1&&r.map[c+1]==l)e.setNodeMarkup(e.mapping.slice(s).map(i+l),null,R(u.attrs,n-r.colCount(l)));else{var d=e.mapping.slice(s).map(i+l);e.delete(d,d+u.nodeSize)}a+=u.attrs.rowspan}}function ne(e,t,n){for(var r=y(t.type.schema).header_cell,o=0;o<e.width;o++)if(t.nodeAt(e.map[o+n*e.width]).type!=r)return!1;return!0}function re(e,t,n){for(var r=t.map,o=t.tableStart,i=t.table,s=o,a=0;a<n;a++)s+=i.child(a).nodeSize;var c=[],l=n>0?-1:0;ne(r,i,n+l)&&(l=0==n||n==r.height?null:0);for(var u=0,d=r.width*n;u<r.width;u++,d++)if(n>0&&n<r.height&&r.map[d]==r.map[d-r.width]){var p=r.map[d],h=i.nodeAt(p).attrs;e.setNodeMarkup(o+p,null,A(h,"rowspan",h.rowspan+1)),u+=h.colspan-1}else{var f=null==l?y(i.type.schema).cell:i.nodeAt(r.map[d+l*r.width]).type;c.push(f.createAndFill())}return e.insert(s,y(i.type.schema).row.create(null,c)),e}function oe(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,s=0,a=0;a<n;a++)s+=o.child(a).nodeSize;var c=s+o.child(n).nodeSize,l=e.mapping.maps.length;e.delete(s+i,c+i);for(var u=0,d=n*r.width;u<r.width;u++,d++){var p=r.map[d];if(n>0&&p==r.map[d-r.width]){var h=o.nodeAt(p).attrs;e.setNodeMarkup(e.mapping.slice(l).map(p+i),null,A(h,"rowspan",h.rowspan-1)),u+=h.colspan-1}else if(n<r.width&&p==r.map[d+r.width]){var f=o.nodeAt(p),m=f.type.create(A(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),v=r.positionAt(n+1,u,o);e.insert(e.mapping.slice(l).map(i+v),m),u+=f.attrs.colspan-1}}}function ie(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function se(e){return function(t,n){var r,o,i=t.selection;if(i instanceof b){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;r=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(!(r=function(e){for(var t=e.depth;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(i.$from)))return!1;o=S(i.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],c=s.colwidth;s.rowspan>1&&(s=A(s,"rowspan",1)),s.colspan>1&&(s=A(s,"colspan",1));for(var l,u=j(t),d=t.tr,p=0;p<u.right-u.left;p++)a.push(c?A(s,"colwidth",c&&c[p]?[c[p]]:null):s);for(var h=u.top;h<u.bottom;h++){var f=u.map.positionAt(h,u.left,u.table);h==u.top&&(f+=r.nodeSize);for(var m=u.left,v=0;m<u.right;m++,v++)m==u.left&&h==u.top||d.insert(l=d.mapping.map(f+u.tableStart,1),e({node:r,row:h,col:m}).createAndFill(a[v]))}d.setNodeMarkup(o,e({node:r,row:u.top,col:u.left}),a[0]),i instanceof b&&d.setSelection(new b(d.doc.resolve(i.$anchorCell.pos),l&&d.doc.resolve(l))),n(d)}return!0}}function ae(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),o=0;o<r.length;o++){var i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function ce(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!O(t))return!1;if(n){for(var r=y(t.schema),o=j(t),i=t.tr,s=o.map.cellsInRect("column"==e?new h(o.left,0,o.right,o.map.height):"row"==e?new h(0,o.top,o.map.width,o.bottom):o),a=s.map((function(e){return o.table.nodeAt(e)})),c=0;c<s.length;c++)a[c].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[c],r.cell,a[c].attrs);if(0==i.steps.length)for(var l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}(e):function(t,n){if(!O(t))return!1;if(n){var r=y(t.schema),o=j(t),i=t.tr,s=ae("row",o,r),a=ae("column",o,r),c=("column"===e?s:"row"===e&&a)?1:0,l="column"==e?new h(0,c,1,o.map.height):"row"==e?new h(c,0,o.map.width,1):o,u="column"==e?a?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(l).forEach((function(e){var t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,u,n.attrs)})),n(i)}return!0}}var le=ce("row",{useDeprecatedLogic:!0}),ue=ce("column",{useDeprecatedLogic:!0}),de=ce("cell",{useDeprecatedLogic:!0});var pe=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),he(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function he(e,t,n,r,o,i){for(var s=0,a=!0,c=t.firstChild,l=e.firstChild,u=0,d=0;u<l.childCount;u++)for(var p=l.child(u).attrs,h=p.colspan,f=p.colwidth,m=0;m<h;m++,d++){var v=o==d?i:f&&f[m],g=v?v+"px":"";s+=v||r,v||(a=!1),c?(c.style.width!=g&&(c.style.width=g),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=g}for(;c;){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}pe.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,he(e,this.colgroup,this.table,this.cellMinWidth),!0)},pe.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var fe=new i.PluginKey("tableColumnResizing");var me=function(e,t){this.activeHandle=e,this.dragging=t};function ve(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY}).pos,o=S(e.state.doc.resolve(r));if(!o)return-1;if("right"==n)return o.pos;var i=f.get(o.node(-1)),s=o.start(-1),a=i.map.indexOf(o.pos-s);return a%i.width==0?-1:s+i.map[a-1]}function ge(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function ye(e,t){e.dispatch(e.state.tr.setMeta(fe,{setHandle:t}))}function be(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}me.prototype.apply=function(e){var t=this,n=e.getMeta(fe);if(n&&null!=n.setHandle)return new me(n.setHandle,null);if(n&&void 0!==n.setDragging)return new me(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){var r=e.mapping.map(t.activeHandle,-1);C(e.doc.resolve(r))||(r=null),t=new me(r,t.dragging)}return t},t.tableEditing=function(e){void 0===e&&(e={});var t=e.allowTableNodeSelection;return void 0===t&&(t=!1),new i.Plugin({key:k,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(k);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:_,handleDOMEvents:{mousedown:G},createSelectionBetween:function(e){if(null!=k.getState(e.state))return e.state.selection},handleTripleClick:U,handleKeyDown:F,handlePaste:H},appendTransaction:function(e,n,r){return function(e,t,n){var r,o,s=(t||e).selection,a=(t||e).doc;if(s instanceof i.NodeSelection&&(o=s.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=b.create(a,s.from);else if("row"==o){var c=a.resolve(s.from+1);r=b.rowSelection(c,c)}else if(!n){var l=f.get(s.node),u=s.from+1,d=u+l.map[l.width*l.height-1];r=b.create(a,u+1,d)}}else s instanceof i.TextSelection&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(s)?r=i.TextSelection.create(a,s.from):s instanceof i.TextSelection&&function(e){for(var t,n,r=e.$from,o=e.$to,i=r.depth;i>0;i--){var s=r.node(i);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){t=s;break}}for(var a=o.depth;a>0;a--){var c=o.node(a);if("cell"===c.type.spec.tableRole||"header_cell"===c.type.spec.tableRole){n=c;break}}return t!==n&&0===o.parentOffset}(s)&&(r=i.TextSelection.create(a,s.$from.start(),s.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t}(r,Z(r,n),t)}})},t.fixTables=Z,t.handlePaste=H,t.fixTablesKey=Q,t.tableEditingKey=k,t.cellAround=S,t.isInTable=O,t.selectionCell=x,t.moveCellForward=E,t.inSameTable=T,t.findCell=function(e){return f.get(e.node(-1)).findCell(e.pos-e.start(-1))},t.colCount=function(e){return f.get(e.node(-1)).colCount(e.pos-e.start(-1))},t.nextCell=N,t.removeColSpan=R,t.addColSpan=M,t.columnIsHeader=I,t.selectedRect=j,t.tableNodes=function(e){var t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(e){return v(e,t)}}],toDOM:function(e){return["td",g(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(e){return v(e,t)}}],toDOM:function(e){return["th",g(e,t),0]}}}},t.tableNodeTypes=y,t.CellSelection=b,t.TableMap=f,t.columnResizing=function(e){void 0===e&&(e={});var t=e.handleWidth;void 0===t&&(t=5);var n=e.cellMinWidth;void 0===n&&(n=25);var r=e.View;void 0===r&&(r=pe);var o=e.lastColumnResizable;return void 0===o&&(o=!0),new i.Plugin({key:fe,state:{init:function(e,t){return this.spec.props.nodeViews[y(t.schema).table.name]=function(e,t){return new r(e,n,t)},new me(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return fe.getState(e).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,n){!function(e,t,n,r,o){var i=fe.getState(e.state);if(!i.dragging){var s=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),a=-1;if(s){var c=s.getBoundingClientRect(),l=c.left,u=c.right;t.clientX-l<=n?a=ve(e,t,"left"):u-t.clientX<=n&&(a=ve(e,t,"right"))}if(a!=i.activeHandle){if(!o&&-1!==a){var d=e.state.doc.resolve(a),p=d.node(-1),h=f.get(p),m=d.start(-1);if(h.colCount(d.pos-m)+d.nodeAfter.attrs.colspan-1==h.width-1)return}ye(e,a)}}}(e,n,t,0,o)},mouseleave:function(e){!function(e){var t=fe.getState(e.state);t.activeHandle>-1&&!t.dragging&&ye(e,-1)}(e)},mousedown:function(e,t){!function(e,t,n){var r=fe.getState(e.state);if(-1==r.activeHandle||r.dragging)return!1;var o=e.state.doc.nodeAt(r.activeHandle),i=function(e,t,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var s=e.domAtPos(t),a=s.node.childNodes[s.offset].offsetWidth,c=r;if(o)for(var l=0;l<r;l++)o[l]&&(a-=o[l],c--);return a/c}(e,r.activeHandle,o.attrs);function s(t){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=fe.getState(e.state);r.dragging&&(!function(e,t,n){for(var r=e.state.doc.resolve(t),o=r.node(-1),i=f.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=e.state.tr,l=0;l<i.height;l++){var u=l*i.width+a;if(!l||i.map[u]!=i.map[u-i.width]){var d=i.map[u],p=o.nodeAt(d).attrs,h=1==p.colspan?0:a-i.colCount(d);if(!p.colwidth||p.colwidth[h]!=n){var m=p.colwidth?p.colwidth.slice():be(p.colspan);m[h]=n,c.setNodeMarkup(s+d,null,A(p,"colwidth",m))}}}c.docChanged&&e.dispatch(c)}(e,r.activeHandle,ge(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(fe,{setDragging:null})))}function a(t){if(!t.which)return s(t);var r=fe.getState(e.state),o=ge(r.dragging,t,n);!function(e,t,n,r){var o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),a=f.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,c=e.domAtPos(o.start(-1)).node;for(;"TABLE"!=c.nodeName;)c=c.parentNode;he(i,c.firstChild,c,r,a,n)}(e,r.activeHandle,o,n)}e.dispatch(e.state.tr.setMeta(fe,{setDragging:{startX:t.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault()}(e,t,n)}},decorations:function(e){var t=fe.getState(e);if(t.activeHandle>-1)return function(e,t){for(var n=[],r=e.doc.resolve(t),o=r.node(-1),i=f.get(o),a=r.start(-1),c=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan,l=0;l<i.height;l++){var u=c+l*i.width-1;if(!(c!=i.width&&i.map[u]==i.map[u+1]||0!=l&&i.map[u-1]==i.map[u-1-i.width])){var d=i.map[u],p=a+d+o.nodeAt(d).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(s.Decoration.widget(p,h))}}return s.DecorationSet.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}})},t.columnResizingPluginKey=fe,t.updateColumnsOnResize=he,t.__pastedCells=D,t.__insertCells=B,t.__clipCells=$,t.addColumn=ee,t.addColumnBefore=function(e,t){if(!O(e))return!1;if(t){var n=j(e);t(ee(e.tr,n,n.left))}return!0},t.addColumnAfter=function(e,t){if(!O(e))return!1;if(t){var n=j(e);t(ee(e.tr,n,n.right))}return!0},t.removeColumn=te,t.deleteColumn=function(e,t){if(!O(e))return!1;if(t){var n=j(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;te(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=f.get(n.table);t(r)}return!0},t.rowIsHeader=ne,t.addRow=re,t.addRowBefore=function(e,t){if(!O(e))return!1;if(t){var n=j(e);t(re(e.tr,n,n.top))}return!0},t.addRowAfter=function(e,t){if(!O(e))return!1;if(t){var n=j(e);t(re(e.tr,n,n.bottom))}return!0},t.removeRow=oe,t.deleteRow=function(e,t){if(!O(e))return!1;if(t){var n=j(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;oe(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=f.get(n.table);t(r)}return!0},t.mergeCells=function(e,t){var n=e.selection;if(!(n instanceof b)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=j(e),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,s=i,a=(t.bottom-1)*n+t.left,c=i+(t.right-t.left-1),l=t.top;l<t.bottom;l++){if(t.left>0&&o[s]==o[s-1]||t.right<n&&o[c]==o[c+1])return!0;s+=n,c+=n}for(var u=t.left;u<t.right;u++){if(t.top>0&&o[i]==o[i-n]||t.bottom<r&&o[a]==o[a+n])return!0;i++,a++}return!1}(o,r))return!1;if(t){for(var i,s,c=e.tr,l={},u=a.Fragment.empty,d=r.top;d<r.bottom;d++)for(var p=r.left;p<r.right;p++){var h=o.map[d*o.width+p],f=r.table.nodeAt(h);if(!l[h])if(l[h]=!0,null==i)i=h,s=f;else{ie(f)||(u=u.append(f.content));var m=c.mapping.map(h+r.tableStart);c.delete(m,m+f.nodeSize)}}if(c.setNodeMarkup(i+r.tableStart,null,A(M(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),"rowspan",r.bottom-r.top)),u.size){var v=i+1+s.content.size,g=ie(s)?i+1:v;c.replaceWith(g+r.tableStart,v+r.tableStart,u)}c.setSelection(new b(c.doc.resolve(i+r.tableStart))),t(c)}return!0},t.splitCell=function(e,t){var n=y(e.schema);return se((function(e){var t=e.node;return n[t.type.spec.tableRole]}))(e,t)},t.splitCellWithType=se,t.setCellAttr=function(e,t){return function(n,r){if(!O(n))return!1;var o=x(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){var i=n.tr;n.selection instanceof b?n.selection.forEachCell((function(n,r){n.attrs[e]!==t&&i.setNodeMarkup(r,null,A(n.attrs,e,t))})):i.setNodeMarkup(o.pos,null,A(o.nodeAfter.attrs,e,t)),r(i)}return!0}},t.toggleHeader=ce,t.toggleHeaderRow=le,t.toggleHeaderColumn=ue,t.toggleHeaderCell=de,t.goToNextCell=function(e){return function(t,n){if(!O(t))return!1;var r=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();r>=0;r--){var i=e.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var s=e.node(-1),a=e.indexAfter(-1),c=e.after();a<s.childCount;a++){var l=s.child(a);if(l.childCount)return c+1;c+=l.nodeSize}}}(x(t),e);if(null!=r){if(n){var o=t.doc.resolve(r);n(t.tr.setSelection(i.TextSelection.between(o,E(o))).scrollIntoView())}return!0}}},t.deleteTable=function(e,t){for(var n=e.selection.$anchor,r=n.depth;r>0;r--){if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}},"1Wf3":function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){o(s,r,i,a,c,"next",e)}function c(e){o(s,r,i,a,c,"throw",e)}a(void 0)}))}}var s,a,c,l,u,d;d=n("Ow5E"),s=n("wxq6"),l=n("tPYt"),c=n("cP58"),u=n("TdYm"),a=function(){class e{constructor(e={}){this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=e,d.load(this.limiterOptions,this.defaults,this),this.Events=new s(this),this.instances={},this.Bottleneck=n("E1Qm"),this._startAutoCleanup(),this.sharedConnection=null!=this.connection,null==this.connection&&("redis"===this.limiterOptions.datastore?this.connection=new l(Object.assign({},this.limiterOptions,{Events:this.Events})):"ioredis"===this.limiterOptions.datastore&&(this.connection=new c(Object.assign({},this.limiterOptions,{Events:this.Events}))))}key(e=""){var t;return null!=(t=this.instances[e])?t:(()=>{var t;return t=this.instances[e]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:`${this.id}-${e}`,timeout:this.timeout,connection:this.connection})),this.Events.trigger("created",t,e),t})()}deleteKey(e=""){var t=this;return i((function*(){var n,r;return r=t.instances[e],t.connection&&(n=yield t.connection.__runCommand__(["del",...u.allKeys(`${t.id}-${e}`)])),null!=r&&(delete t.instances[e],yield r.disconnect()),null!=r||n>0}))()}limiters(){var e,t,n,r;for(e in n=[],t=this.instances)r=t[e],n.push({key:e,limiter:r});return n}keys(){return Object.keys(this.instances)}clusterKeys(){var e=this;return i((function*(){var t,n,o,i,s,a,c,l;if(null==e.connection)return e.Promise.resolve(e.keys());for(a=[],t=null,l=`b_${e.id}-`.length,n="_settings".length;0!==t;){var u=r(yield e.connection.__runCommand__(["scan",null!=t?t:0,"match",`b_${e.id}-*_settings`,"count",1e4]),2);for(t=~~u[0],i=0,c=(o=u[1]).length;i<c;i++)s=o[i],a.push(s.slice(l,-n))}return a}))()}_startAutoCleanup(){var e,t=this;return clearInterval(this.interval),"function"==typeof(e=this.interval=setInterval(i((function*(){var e,n,r,o,i,s;for(n in i=Date.now(),o=[],r=t.instances){s=r[n];try{(yield s._store.__groupCheck__(i))?o.push(t.deleteKey(n)):o.push(void 0)}catch(a){e=a,o.push(s.Events.trigger("error",e))}}return o})),this.timeout/2)).unref?e.unref():void 0}updateSettings(e={}){if(d.overwrite(e,this.defaults,this),d.overwrite(e,e,this.limiterOptions),null!=e.timeout)return this._startAutoCleanup()}disconnect(e=!0){var t;if(!this.sharedConnection)return null!=(t=this.connection)?t.disconnect(e):void 0}}return e.prototype.defaults={timeout:3e5,connection:null,Promise,id:"group-key"},e}.call(void 0),e.exports=a},"2SyA":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s}));var r=n("Czhu");const o=(e,t)=>{if("com.atlassian.ecosystem"===t)return[e,"default"];const[n,r="default"]=e.split(":");return[n,r]};function i(e,t){return"function"==typeof e?e:"node"===e.type&&t.modules.nodes?function(e,t){if(!t.modules.nodes)return;const n=t.modules.nodes[e.key],o=((e,t)=>t&&"default"!==t?`${e}:${t}`:e)(t.key,e.key),i={type:n.type,attrs:{extensionType:t.type,extensionKey:o,parameters:e.parameters}};if("bodiedExtension"===n.type)return Object(r.a)(Object(r.a)({},i),{},{content:[{type:"paragraph",content:[]}]});return i}(e,t):void 0}const s=async e=>{const t=await e;return t&&t.__esModule?t.default:t}},"39fB":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));const r=e=>"string"==typeof e?e:Array.isArray(e)?e.length>0?r(e[0]):void 0:e.href,o=e=>"string"==typeof e?e:"Link"===e["@type"]?r(e):e.url?r(e.url):void 0,i=e=>{if("string"==typeof e)throw Error("Link.person needs to be an object.");if("Link"===e["@type"]){if(e.name)return{name:e.name}}else if(e.name)return{name:e.name,icon:e.icon&&o(e.icon)}}},"3yjy":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p}));var r=n("ERkP"),o=n.n(r),i=n("KsTJ"),s=n("qPpp"),a=n("vVzW"),c=n("u55h");function l(e){switch(e){case"M":return Object(a.e)()+2;case"L":return Object(a.e)()+4;default:return Object(a.e)()}}function u(e){switch(e){case"M":return 760;case"L":return 850;default:return 680}}function d({breakpoint:e,dynamicTextSizing:t,baseFontSize:n,children:a}){const c=Object(r.useMemo)(()=>({baseFontSize:t?l(e):n||l("S"),layoutMaxWidth:t?u(e):s.g}),[e,t,n]);return o.a.createElement(i.ThemeProvider,{theme:c},a)}function p({children:e,dynamicTextSizing:t,baseFontSize:n}){return o.a.createElement(c.a,null,({breakpoint:r})=>o.a.createElement(d,{dynamicTextSizing:t,breakpoint:r,baseFontSize:n},o.a.createElement(o.a.Fragment,null,e)))}},"5POW":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.ASC="asc",e.DESC="desc",e.NO_ORDER="no_order"}(r||(r={}))},"5lAk":function(e,t,n){"use strict";const r={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if("undefined"!=typeof navigator){const e=/Edge\/(\d+)/.exec(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);r.mac=/Mac/.test(navigator.platform);let o=r.ie=!!(t||n||e);r.ie_version=t?document.documentMode||6:n?+n[1]:e?+e[1]:null,r.gecko=!o&&/gecko\/\d/i.test(navigator.userAgent),r.chrome=!o&&/Chrome\//.test(navigator.userAgent),r.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1],10),r.android=/Android \d/.test(navigator.userAgent),r.ios=!o&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),r.webkit=!o&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}t.a=r},"6p1r":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));const r=()=>({"@context":{"@vocab":"https://www.w3.org/ns/activitystreams#",atlassian:"https://schema.atlassian.com/ns/vocabulary#",schema:"http://schema.org/"},"@type":"Object"}),o=()=>({meta:{visibility:"restricted",access:"unauthorized",auth:[],definitionId:"provider-not-found"},data:{"@context":{"@vocab":"https://www.w3.org/ns/activitystreams#",atlassian:"https://schema.atlassian.com/ns/vocabulary#",schema:"http://schema.org/"},"@type":"Object"}})},"6r2W":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("F/E8");function o(){if(!Object(r.a)())return;const e=performance.getEntriesByType("navigation")[0];return e?e.responseEnd:void 0}},"7BAE":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return p}));var r=n("ERkP"),o=n.n(r),i=n("B63t"),s=n.n(i);const a=e=>!!e.data,c=e=>e.isDefaultPrevented()&&(l()||u(e)||d(e)),l=()=>window.parent!==parent,u=e=>e.metaKey||e.ctrlKey,d=e=>1===e.button,p=e=>{if(!e)return;let t=h[e.toLowerCase()];if(!t)return;const[n,r]=t;if(!r)return;const i=s()({id:"JxDsv",loader:()=>r().then(e=>e.default),loading:()=>null});return o.a.createElement(i,{label:n})},h={"text/plain":["Document",()=>n.e(98).then(n.t.bind(null,"dsHt",7))],"application/vnd.oasis.opendocument.text":["Document",()=>n.e(98).then(n.t.bind(null,"dsHt",7))],"application/vnd.apple.pages":["Document",()=>n.e(98).then(n.t.bind(null,"dsHt",7))],"application/vnd.google-apps.document":["Google Doc",()=>n.e(166).then(n.t.bind(null,"N8WQ",7))],"application/vnd.ms-word":["Word document",()=>n.e(173).then(n.t.bind(null,"mWAX",7))],"application/pdf":["PDF document",()=>n.e(170).then(n.t.bind(null,"R9zL",7))],"application/vnd.oasis.opendocument.spreadsheet":["Spreadsheet",()=>n.e(139).then(n.t.bind(null,"op3J",7))],"application/vnd.apple.numbers":["Spreadsheet",()=>n.e(139).then(n.t.bind(null,"op3J",7))],"application/vnd.google-apps.spreadsheet":["Google Sheet",()=>n.e(168).then(n.t.bind(null,"gCM7",7))],"application/vnd.ms-excel":["Excel spreadsheet",()=>n.e(163).then(n.t.bind(null,"8F5j",7))],"application/vnd.oasis.opendocument.presentation":["Presentation",()=>n.e(138).then(n.t.bind(null,"tMoO",7))],"application/vnd.apple.keynote":["Presentation",()=>n.e(138).then(n.t.bind(null,"tMoO",7))],"application/vnd.google-apps.presentation":["Google Slide",()=>n.e(169).then(n.t.bind(null,"se5m",7))],"application/vnd.mspowerpoint":["PowerPoint presentation",()=>n.e(171).then(n.t.bind(null,"2YEt",7))],"application/vnd.google-apps.form":["Google Form",()=>n.e(167).then(n.t.bind(null,"EJCe",7))],"image/png":["Image",()=>n.e(65).then(n.t.bind(null,"UkkI",7))],"image/jpeg":["Image",()=>n.e(65).then(n.t.bind(null,"UkkI",7))],"image/bmp":["Image",()=>n.e(65).then(n.t.bind(null,"UkkI",7))],"image/webp":["Image",()=>n.e(65).then(n.t.bind(null,"UkkI",7))],"image/svg+xml":["Image",()=>n.e(65).then(n.t.bind(null,"UkkI",7))],"image/gif":["GIF",()=>n.e(165).then(n.t.bind(null,"GF+Q",7))],"audio/midi":["Audio",()=>n.e(64).then(n.t.bind(null,"/q5l",7))],"audio/mpeg":["Audio",()=>n.e(64).then(n.t.bind(null,"/q5l",7))],"audio/webm":["Audio",()=>n.e(64).then(n.t.bind(null,"/q5l",7))],"audio/ogg":["Audio",()=>n.e(64).then(n.t.bind(null,"/q5l",7))],"audio/wav":["Audio",()=>n.e(64).then(n.t.bind(null,"/q5l",7))],"video/mp4":["Video",()=>n.e(45).then(n.t.bind(null,"LoQh",7))],"video/quicktime":["Video",()=>n.e(45).then(n.t.bind(null,"LoQh",7))],"video/mov":["Video",()=>n.e(45).then(n.t.bind(null,"LoQh",7))],"video/webm":["Video",()=>n.e(45).then(n.t.bind(null,"LoQh",7))],"video/ogg":["Video",()=>n.e(45).then(n.t.bind(null,"LoQh",7))],"video/x-ms-wmv":["Video",()=>n.e(45).then(n.t.bind(null,"LoQh",7))],"video/x-msvideo":["Video",()=>n.e(45).then(n.t.bind(null,"LoQh",7))],"application/zip":["Archive",()=>n.e(63).then(n.t.bind(null,"Kjnp",7))],"application/x-tar":["Archive",()=>n.e(63).then(n.t.bind(null,"Kjnp",7))],"application/x-gtar":["Archive",()=>n.e(63).then(n.t.bind(null,"Kjnp",7))],"application/x-7z-compressed":["Archive",()=>n.e(63).then(n.t.bind(null,"Kjnp",7))],"application/x-apple-diskimage":["Archive",()=>n.e(63).then(n.t.bind(null,"Kjnp",7))],"application/dmg":["Executable",()=>n.e(164).then(n.t.bind(null,"mRA3",7))],"text/css":["Source Code",()=>n.e(99).then(n.t.bind(null,"huwD",7))],"text/html":["Source Code",()=>n.e(99).then(n.t.bind(null,"huwD",7))],"application/javascript":["Source Code",()=>n.e(99).then(n.t.bind(null,"huwD",7))],"application/octet-stream":["Binary file",()=>n.e(137).then(n.t.bind(null,"OvU0",7))],"application/invision.prototype":["Prototype",()=>n.e(137).then(n.t.bind(null,"OvU0",7))],"application/sketch":["Sketch",()=>n.e(172).then(n.t.bind(null,"gO6h",7))]}},"7LR6":function(e,t,n){"use strict";function r(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,c,"next",e)}function c(e){r(s,o,i,a,c,"throw",e)}a(void 0)}))}}var i,s,a;a=n("Ow5E"),i=n("s5AU"),s=class{constructor(e,t,n){this.instance=e,this.storeOptions=t,this.clientId=this.instance._randomIndex(),a.load(n,n,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}_startHeartbeat(){var e;return null==this.heartbeat&&(null!=this.storeOptions.reservoirRefreshInterval&&null!=this.storeOptions.reservoirRefreshAmount||null!=this.storeOptions.reservoirIncreaseInterval&&null!=this.storeOptions.reservoirIncreaseAmount)?"function"==typeof(e=this.heartbeat=setInterval(()=>{var e,t,n,r,o;if(r=Date.now(),null!=this.storeOptions.reservoirRefreshInterval&&r>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=r,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),null!=this.storeOptions.reservoirIncreaseInterval&&r>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval){var i=this.storeOptions;if(e=i.reservoirIncreaseAmount,n=i.reservoirIncreaseMaximum,o=i.reservoir,this._lastReservoirIncrease=r,(t=null!=n?Math.min(e,n-o):e)>0)return this.storeOptions.reservoir+=t,this.instance._drainAll(this.computeCapacity())}},this.heartbeatInterval)).unref?e.unref():void 0:clearInterval(this.heartbeat)}__publish__(e){var t=this;return o((function*(){return yield t.yieldLoop(),t.instance.Events.trigger("message",e.toString())}))()}__disconnect__(e){var t=this;return o((function*(){return yield t.yieldLoop(),clearInterval(t.heartbeat),t.Promise.resolve()}))()}yieldLoop(e=0){return new this.Promise((function(t,n){return setTimeout(t,e)}))}computePenalty(){var e;return null!=(e=this.storeOptions.penalty)?e:15*this.storeOptions.minTime||5e3}__updateSettings__(e){var t=this;return o((function*(){return yield t.yieldLoop(),a.overwrite(e,e,t.storeOptions),t._startHeartbeat(),t.instance._drainAll(t.computeCapacity()),!0}))()}__running__(){var e=this;return o((function*(){return yield e.yieldLoop(),e._running}))()}__queued__(){var e=this;return o((function*(){return yield e.yieldLoop(),e.instance.queued()}))()}__done__(){var e=this;return o((function*(){return yield e.yieldLoop(),e._done}))()}__groupCheck__(e){var t=this;return o((function*(){return yield t.yieldLoop(),t._nextRequest+t.timeout<e}))()}computeCapacity(){var e,t,n=this.storeOptions;return e=n.maxConcurrent,t=n.reservoir,null!=e&&null!=t?Math.min(e-this._running,t):null!=e?e-this._running:null!=t?t:null}conditionsCheck(e){var t;return null==(t=this.computeCapacity())||e<=t}__incrementReservoir__(e){var t=this;return o((function*(){var n;return yield t.yieldLoop(),n=t.storeOptions.reservoir+=e,t.instance._drainAll(t.computeCapacity()),n}))()}__currentReservoir__(){var e=this;return o((function*(){return yield e.yieldLoop(),e.storeOptions.reservoir}))()}isBlocked(e){return this._unblockTime>=e}check(e,t){return this.conditionsCheck(e)&&this._nextRequest-t<=0}__check__(e){var t=this;return o((function*(){var n;return yield t.yieldLoop(),n=Date.now(),t.check(e,n)}))()}__register__(e,t,n){var r=this;return o((function*(){var e,n;return yield r.yieldLoop(),e=Date.now(),r.conditionsCheck(t)?(r._running+=t,null!=r.storeOptions.reservoir&&(r.storeOptions.reservoir-=t),n=Math.max(r._nextRequest-e,0),r._nextRequest=e+n+r.storeOptions.minTime,{success:!0,wait:n,reservoir:r.storeOptions.reservoir}):{success:!1}}))()}strategyIsBlock(){return 3===this.storeOptions.strategy}__submit__(e,t){var n=this;return o((function*(){var r,o,s;if(yield n.yieldLoop(),null!=n.storeOptions.maxConcurrent&&t>n.storeOptions.maxConcurrent)throw new i(`Impossible to add a job having a weight of ${t} to a limiter having a maxConcurrent setting of ${n.storeOptions.maxConcurrent}`);return o=Date.now(),s=null!=n.storeOptions.highWater&&e===n.storeOptions.highWater&&!n.check(t,o),(r=n.strategyIsBlock()&&(s||n.isBlocked(o)))&&(n._unblockTime=o+n.computePenalty(),n._nextRequest=n._unblockTime+n.storeOptions.minTime,n.instance._dropAllQueued()),{reachedHWM:s,blocked:r,strategy:n.storeOptions.strategy}}))()}__free__(e,t){var n=this;return o((function*(){return yield n.yieldLoop(),n._running-=t,n._done+=t,n.instance._drainAll(n.computeCapacity()),{running:n._running}}))()}},e.exports=s},"7kse":function(e,t,n){"use strict";var r=n("B0Ro"),o=n.n(r),i=n("q83S"),s=n.n(i),a=n("Czhu");const c=[200,401,404];async function l(e,t,n){const r=Object(a.a)({method:e,credentials:"include",headers:{Accept:"application/json","Cache-Control":"no-cache","Content-Type":"application/json"}},n?{body:JSON.stringify(n)}:{}),o=await fetch(t,r);if(o.ok||c.includes(o.status))return await o.json();throw o}var u=n("ycrU"),d=n("ERVN"),p=n("Zvw0"),h=n.n(p);const f=e=>200===e.status&&"body"in e;n.d(t,"a",(function(){return m}));class m{constructor(e){this.resolverUrl=Object(d.b)(e),this.loadersByDomain={},this.retryConfig={retries:2},this.resolvedCache={}}async batchResolve(e){const t=[...new Set(e)],n=await l("post",this.resolverUrl+"/resolve/batch",t.map(e=>({resourceUrl:e}))),r={};for(let o=0;o<t.length;++o){const e=t[o],i=n[o];r[e]=i}return e.map(e=>r[e])}createLoader(){const e=new h.a({minTime:250});return new o.a(t=>e.schedule(()=>this.batchResolve(t)),{maxBatchSize:50,cache:!1})}getLoader(e){return this.loadersByDomain[e]||(this.loadersByDomain[e]=this.createLoader()),this.loadersByDomain[e]}async prefetchData(e){const t=new URL(e).hostname,n=this.getLoader(t),r=await n.load(e);if(f(r))return r.body;try{return(await s()(async()=>{if(this.resolvedCache[e])throw new Error("Retry unneeded - link has been resolved.");{const t=await n.load(e);if(f(t))return t;throw new Error("Retry for URL failed")}},this.retryConfig)).body}catch(o){return}}async fetchData(e){const t=new URL(e).hostname,n=this.getLoader(t),r=await n.load(e);if(f(r))return this.resolvedCache[e]=!0,r.body;if(r.error){const e=r.error.type,n=r.error.message;switch(e){case"ResolveBadRequestError":throw new u.a("fallback",t,n,e);case"ResolveAuthError":throw new u.a("auth",t,n,e);case"ResolveUnsupportedError":throw new u.a("fatal",t,n,e);case"ResolveFailedError":case"ResolveTimeoutError":case"InternalServerError":throw new u.a("error",t,n,e)}}throw new u.a("fatal",t,r.toString(),"UnexpectedError")}async postData(e){const t={key:e.key,action:e.action,context:e.context};return await l("post",this.resolverUrl+"/invoke",t)}}},"8Bzt":function(e,t,n){"use strict";function r(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,c,"next",e)}function c(e){r(s,o,i,a,c,"throw",e)}a(void 0)}))}}var i,s,a;a=n("Ow5E"),i=n("s5AU"),s=class{constructor(e,t,n,r,o,i,s,c){this.task=e,this.args=t,this.rejectOnDrop=o,this.Events=i,this._states=s,this.Promise=c,this.options=a.load(n,r),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===r.id&&(this.options.id=`${this.options.id}-${this._randomIndex()}`),this.promise=new this.Promise((e,t)=>{this._resolve=e,this._reject=t}),this.retryCount=0}_sanitizePriority(e){var t;return(t=~~e!==e?5:e)<0?0:t>9?9:t}_randomIndex(){return Math.random().toString(36).slice(2)}doDrop({error:e,message:t="This job has been dropped by Bottleneck"}={}){return!!this._states.remove(this.options.id)&&(this.rejectOnDrop&&this._reject(null!=e?e:new i(t)),this.Events.trigger("dropped",{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0)}_assertStatus(e){var t;if((t=this._states.jobStatus(this.options.id))!==e&&("DONE"!==e||null!==t))throw new i(`Invalid job status ${t}, expected ${e}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`)}doReceive(){return this._states.start(this.options.id),this.Events.trigger("received",{args:this.args,options:this.options})}doQueue(e,t){return this._assertStatus("RECEIVED"),this._states.next(this.options.id),this.Events.trigger("queued",{args:this.args,options:this.options,reachedHWM:e,blocked:t})}doRun(){return 0===this.retryCount?(this._assertStatus("QUEUED"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),this.Events.trigger("scheduled",{args:this.args,options:this.options})}doExecute(e,t,n,r){var i=this;return o((function*(){var o,s,a;0===i.retryCount?(i._assertStatus("RUNNING"),i._states.next(i.options.id)):i._assertStatus("EXECUTING"),s={args:i.args,options:i.options,retryCount:i.retryCount},i.Events.trigger("executing",s);try{if(a=yield null!=e?e.schedule(i.options,i.task,...i.args):i.task(...i.args),t())return i.doDone(s),yield r(i.options,s),i._assertStatus("DONE"),i._resolve(a)}catch(c){return o=c,i._onFailure(o,s,t,n,r)}}))()}doExpire(e,t,n){var r,o;return this._states.jobStatus("RUNNING"===this.options.id)&&this._states.next(this.options.id),this._assertStatus("EXECUTING"),o={args:this.args,options:this.options,retryCount:this.retryCount},r=new i(`This job timed out after ${this.options.expiration} ms.`),this._onFailure(r,o,e,t,n)}_onFailure(e,t,n,r,i){var s=this;return o((function*(){var o,a;if(n())return null!=(o=yield s.Events.trigger("failed",e,t))?(a=~~o,s.Events.trigger("retry",`Retrying ${s.options.id} after ${a} ms`,t),s.retryCount++,r(a)):(s.doDone(t),yield i(s.options,t),s._assertStatus("DONE"),s._reject(e))}))()}doDone(e){return this._assertStatus("EXECUTING"),this._states.next(this.options.id),this.Events.trigger("done",e)}},e.exports=s},"8Uik":function(e){e.exports=JSON.parse('{"version":"2.19.5"}')},ALnk:function(e,t,n){"use strict";n.r(t),n.d(t,"keydownHandler",(function(){return l})),n.d(t,"keymap",(function(){return c}));var r=n("hj8b"),o=n("ehfC"),i="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function s(e){var t,n,r,o,s=e.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(var c=0;c<s.length-1;c++){var l=s[c];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))r=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);i?o=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function a(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function c(e){return new o.Plugin({props:{handleKeyDown:l(e)}})}function l(e){var t=function(e){var t=Object.create(null);for(var n in e)t[s(n)]=e[n];return t}(e);return function(e,n){var o,i=Object(r.b)(n),s=1==i.length&&" "!=i,c=t[a(i,n,!s)];if(c&&c(e.state,e.dispatch,e))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=r.a[n.keyCode])&&o!=i){var l=t[a(o,n,!0)];if(l&&l(e.state,e.dispatch,e))return!0}else if(s&&n.shiftKey){var u=t[a(i,n,!0)];if(u&&u(e.state,e.dispatch,e))return!0}return!1}}},AhzI:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("Czhu");function o(e,t){return function e(t,n,o,i,s){const a=o[t.type]||o.any;let c=Object(r.a)({},t);if(a){const e=a(Object(r.a)({},c),n,i,s);if(!1===e)return!1;c=e||t}c.content&&(c.content=c.content.reduce((t,r,i)=>{if(!r)return t;const a=e(r,{node:c,parent:n},o,i,s+1);return!1!==a&&t.push(a),t},[]));return c}(e,{node:void 0},t,0,0)}},B0Ro:function(e,t,n){(function(t,n){var r,o=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"function"!=typeof t)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: "+t+".");this._batchLoadFn=t,this._options=n,this._promiseCache=function(e){var t=e&&e.cacheMap;if(!t)return new Map;var n=["get","set","delete","clear"].filter((function(e){return t&&"function"!=typeof t[e]}));if(0!==n.length)throw new TypeError("Custom cacheMap missing methods: "+n.join(", "));return t}(n),this._queue=[]}return e.prototype.load=function(e){var t=this;if(null==e)throw new TypeError("The loader.load() function must be called with a value,but got: "+String(e)+".");var n=this._options,r=!n||!1!==n.batch,o=!n||!1!==n.cache,a=n&&n.cacheKeyFn,c=a?a(e):e;if(o){var l=this._promiseCache.get(c);if(l)return l}var u=new Promise((function(n,o){t._queue.push({key:e,resolve:n,reject:o}),1===t._queue.length&&(r?i((function(){return s(t)})):s(t))}));return o&&this._promiseCache.set(c,u),u},e.prototype.loadMany=function(e){var t=this;if(!Array.isArray(e))throw new TypeError("The loader.loadMany() function must be called with Array<key> but got: "+e+".");return Promise.all(e.map((function(e){return t.load(e)})))},e.prototype.clear=function(e){var t=this._options&&this._options.cacheKeyFn,n=t?t(e):e;return this._promiseCache.delete(n),this},e.prototype.clearAll=function(){return this._promiseCache.clear(),this},e.prototype.prime=function(e,t){var n=this._options&&this._options.cacheKeyFn,r=n?n(e):e;if(void 0===this._promiseCache.get(r)){var o=t instanceof Error?Promise.reject(t):Promise.resolve(t);this._promiseCache.set(r,o)}return this},e}(),i="object"==typeof t&&"function"==typeof t.nextTick?function(e){r||(r=Promise.resolve()),r.then((function(){return t.nextTick(e)}))}:n||setTimeout;function s(e){var t=e._queue;e._queue=[];var n=e._options&&e._options.maxBatchSize;if(n&&n>0&&n<t.length)for(var r=0;r<t.length/n;r++)a(e,t.slice(r*n,(r+1)*n));else a(e,t)}function a(e,t){var n=t.map((function(e){return e.key})),r=(0,e._batchLoadFn)(n);if(!r||"function"!=typeof r.then)return c(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: "+String(r)+"."));r.then((function(e){if(!Array.isArray(e))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: "+String(e)+".");if(e.length!==n.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n"+String(n)+"\n\nValues:\n"+String(e));t.forEach((function(t,n){var r=t.resolve,o=t.reject,i=e[n];i instanceof Error?o(i):r(i)}))})).catch((function(n){return c(e,t,n)}))}function c(e,t,n){t.forEach((function(t){var r=t.key,o=t.reject;e.clear(r),o(n)}))}e.exports=o}).call(this,n("F63i"),n("/Qos").setImmediate)},BIWu:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var r=n("qPpp"),o=n("vVzW");const i={INLINE_CARD_CONTAINER:"inlineCardView-content-wrap",BLOCK_CARD_CONTAINER:"blockCardView-content-wrap",EMBED_CARD_CONTAINER:"embedCardView-content-wrap",LOADER_WRAPPER:"loader-wrapper"},s=`\n  .${i.BLOCK_CARD_CONTAINER} {\n    display: block;\n    margin: ${r.ab} 0 0;\n    max-width: ${95*Object(o.g)()}px;\n  }\n\n  .${i.EMBED_CARD_CONTAINER} {\n    &.danger .media-card-frame::after{\n      box-shadow: 0 0 0 3px ${r.j} !important;\n      background: ${r.h} !important;\n    }\n  }\n`},BatE:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("KsTJ"),o=n("qPpp");const i=r.css`
  & p {
    font-size: 1em;
    line-height: ${o.t};
    font-weight: normal;
    margin-top: ${o.ab};
    margin-bottom: 0;
    letter-spacing: -0.005em;
  }
`},C0a2:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("ERkP"),o=n.n(r),i=n("p+Ga");const s=Object(i.a)()(class extends o.a.Component{render(){const{render:e,createAnalyticsEvent:t}=this.props;return e(t)}})},DFGU:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n("ERkP"),o=n.n(r),i=n("5lAk");const s={RIGHT_SHADOW:"right-shadow",LEFT_SHADOW:"left-shadow"},a=11===i.a.ie_version;function c(e,t){return class extends o.a.Component{constructor(){super(...arguments),this.state={showLeftShadow:!1,showRightShadow:!1},this.handleScroll=e=>{this.overflowContainer&&e.target===this.overflowContainer&&this.updateShadows()},this.updateShadows=()=>{this.setState(e=>{if(!this.overflowContainer)return;const t=this.calcOverflowDiff(),n=t>0&&t>this.overflowContainer.scrollLeft,r=this.showLeftShadow(this.overflowContainer);return r!==e.showLeftShadow||n!==this.state.showRightShadow?{showLeftShadow:r,showRightShadow:n}:null})},this.showLeftShadow=e=>!!e&&e.scrollLeft>0,this.calcOverflowDiff=()=>this.overflowContainer?(this.diff=this.calcScrollableWidth(),this.diff-this.overflowContainer.offsetWidth):0,this.calcScrollableWidth=()=>{if(!this.scrollable&&this.overflowContainer)return this.overflowContainer.scrollWidth;if(!this.scrollable)return 0;let e=0;for(let t=0;t<this.scrollable.length;t++){e+=this.scrollable[t].scrollWidth}return e},this.handleContainer=e=>{e&&!this.container&&(this.container=e,this.overflowContainer=e.querySelector(t.overflowSelector),this.overflowContainer||(this.overflowContainer=e),t.scrollableSelector&&(this.scrollable=e.querySelectorAll(t.scrollableSelector)),this.updateShadows(),a||this.overflowContainer.addEventListener("scroll",this.handleScroll))}}componentWillUnmount(){this.overflowContainer&&!a&&this.overflowContainer.removeEventListener("scroll",this.handleScroll),this.updateShadows()}componentDidUpdate(){this.updateShadows()}render(){const{showLeftShadow:t,showRightShadow:n}=this.state,r=[n&&s.RIGHT_SHADOW,t&&s.LEFT_SHADOW].filter(Boolean).join(" ");return o.a.createElement(e,Object.assign({handleRef:this.handleContainer,shadowClassNames:r},this.props))}}}},DFfG:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){o(s,r,i,a,c,"next",e)}function c(e){o(s,r,i,a,c,"throw",e)}a(void 0)}))}}var s,a,c,l,u;u=n("Ow5E"),s=n("s5AU"),c=n("tPYt"),a=n("cP58"),l=class{constructor(e,t,n){this.instance=e,this.storeOptions=t,this.originalId=this.instance.id,this.clientId=this.instance._randomIndex(),u.load(n,n,this),this.clients={},this.capacityPriorityCounters={},this.sharedConnection=null!=this.connection,null==this.connection&&(this.connection="redis"===this.instance.datastore?new c({Redis:this.Redis,clientOptions:this.clientOptions,Promise:this.Promise,Events:this.instance.Events}):"ioredis"===this.instance.datastore?new a({Redis:this.Redis,clientOptions:this.clientOptions,clusterNodes:this.clusterNodes,Promise:this.Promise,Events:this.instance.Events}):void 0),this.instance.connection=this.connection,this.instance.datastore=this.connection.datastore,this.ready=this.connection.ready.then(e=>(this.clients=e,this.runScript("init",this.prepareInitSettings(this.clearDatastore)))).then(()=>this.connection.__addLimiter__(this.instance)).then(()=>this.runScript("register_client",[this.instance.queued()])).then(()=>{var e;return"function"==typeof(e=this.heartbeat=setInterval(()=>this.runScript("heartbeat",[]).catch(e=>this.instance.Events.trigger("error",e)),this.heartbeatInterval)).unref&&e.unref(),this.clients})}__publish__(e){var t=this;return i((function*(){return(yield t.ready).client.publish(t.instance.channel(),"message:"+e.toString())}))()}onMessage(e,t){var n=this;return i((function*(){var e,o,s,a,c,l,u,d,p,h;try{u=t.indexOf(":");var f=[t.slice(0,u),t.slice(u+1)];if(s=f[1],"capacity"===(h=f[0]))return yield n.instance._drainAll(s.length>0?~~s:void 0);if("capacity-priority"===h){var m=r(s.split(":"),3);return p=m[0],d=m[1],o=m[2],e=p.length>0?~~p:void 0,d===n.clientId?(a=yield n.instance._drainAll(e),l=null!=e?e-(a||0):"",yield n.clients.client.publish(n.instance.channel(),`capacity-priority:${l}::${o}`)):""===d?(clearTimeout(n.capacityPriorityCounters[o]),delete n.capacityPriorityCounters[o],n.instance._drainAll(e)):n.capacityPriorityCounters[o]=setTimeout(i((function*(){var t;try{return delete n.capacityPriorityCounters[o],yield n.runScript("blacklist_client",[d]),yield n.instance._drainAll(e)}catch(r){return t=r,n.instance.Events.trigger("error",t)}})),1e3)}if("message"===h)return n.instance.Events.trigger("message",s);if("blocked"===h)return yield n.instance._dropAllQueued()}catch(v){return c=v,n.instance.Events.trigger("error",c)}}))()}__disconnect__(e){return clearInterval(this.heartbeat),this.sharedConnection?this.connection.__removeLimiter__(this.instance):this.connection.disconnect(e)}runScript(e,t){var n=this;return i((function*(){return"init"!==e&&"register_client"!==e&&(yield n.ready),new n.Promise((r,o)=>{var i,s;return i=[Date.now(),n.clientId].concat(t),n.instance.Events.trigger("debug",`Calling Redis script: ${e}.lua`,i),s=n.connection.__scriptArgs__(e,n.originalId,i,(function(e,t){return null!=e?o(e):r(t)})),n.connection.__scriptFn__(e)(...s)}).catch(r=>"SETTINGS_KEY_NOT_FOUND"===r.message?"heartbeat"===e?n.Promise.resolve():n.runScript("init",n.prepareInitSettings(!1)).then(()=>n.runScript(e,t)):"UNKNOWN_CLIENT"===r.message?n.runScript("register_client",[n.instance.queued()]).then(()=>n.runScript(e,t)):n.Promise.reject(r))}))()}prepareArray(e){var t,n,r,o;for(r=[],t=0,n=e.length;t<n;t++)o=e[t],r.push(null!=o?o.toString():"");return r}prepareObject(e){var t,n,r;for(n in t=[],e)r=e[n],t.push(n,null!=r?r.toString():"");return t}prepareInitSettings(e){var t;return(t=this.prepareObject(Object.assign({},this.storeOptions,{id:this.originalId,version:this.instance.version,groupTimeout:this.timeout,clientTimeout:this.clientTimeout}))).unshift(e?1:0,this.instance.version),t}convertBool(e){return!!e}__updateSettings__(e){var t=this;return i((function*(){return yield t.runScript("update_settings",t.prepareObject(e)),u.overwrite(e,e,t.storeOptions)}))()}__running__(){return this.runScript("running",[])}__queued__(){return this.runScript("queued",[])}__done__(){return this.runScript("done",[])}__groupCheck__(){var e=this;return i((function*(){return e.convertBool(yield e.runScript("group_check",[]))}))()}__incrementReservoir__(e){return this.runScript("increment_reservoir",[e])}__currentReservoir__(){return this.runScript("current_reservoir",[])}__check__(e){var t=this;return i((function*(){return t.convertBool(yield t.runScript("check",t.prepareArray([e])))}))()}__register__(e,t,n){var o=this;return i((function*(){var i,s,a,c=r(yield o.runScript("register",o.prepareArray([e,t,n])),3);return s=c[0],a=c[1],i=c[2],{success:o.convertBool(s),wait:a,reservoir:i}}))()}__submit__(e,t){var n=this;return i((function*(){var o,i,a,c,l;try{var u=r(yield n.runScript("submit",n.prepareArray([e,t])),3);return c=u[0],o=u[1],l=u[2],{reachedHWM:n.convertBool(c),blocked:n.convertBool(o),strategy:l}}catch(p){if(0===(i=p).message.indexOf("OVERWEIGHT")){var d=r(i.message.split(":"),3);throw d[0],t=d[1],a=d[2],new s(`Impossible to add a job having a weight of ${t} to a limiter having a maxConcurrent setting of ${a}`)}throw i}}))()}__free__(e,t){var n=this;return i((function*(){return{running:yield n.runScript("free",n.prepareArray([e]))}}))()}},e.exports=l},DIDd:function(e){e.exports=JSON.parse("{\"blacklist_client.lua\":\"local blacklist = ARGV[num_static_argv + 1]\\n\\nif redis.call('zscore', client_last_seen_key, blacklist) then\\n  redis.call('zadd', client_last_seen_key, 0, blacklist)\\nend\\n\\n\\nreturn {}\\n\",\"check.lua\":\"local weight = tonumber(ARGV[num_static_argv + 1])\\n\\nlocal capacity = process_tick(now, false)['capacity']\\nlocal nextRequest = tonumber(redis.call('hget', settings_key, 'nextRequest'))\\n\\nreturn conditions_check(capacity, weight) and nextRequest - now <= 0\\n\",\"conditions_check.lua\":\"local conditions_check = function (capacity, weight)\\n  return capacity == nil or weight <= capacity\\nend\\n\",\"current_reservoir.lua\":\"return process_tick(now, false)['reservoir']\\n\",\"done.lua\":\"process_tick(now, false)\\n\\nreturn tonumber(redis.call('hget', settings_key, 'done'))\\n\",\"free.lua\":\"local index = ARGV[num_static_argv + 1]\\n\\nredis.call('zadd', job_expirations_key, 0, index)\\n\\nreturn process_tick(now, false)['running']\\n\",\"get_time.lua\":\"redis.replicate_commands()\\n\\nlocal get_time = function ()\\n  local time = redis.call('time')\\n\\n  return tonumber(time[1]..string.sub(time[2], 1, 3))\\nend\\n\",\"group_check.lua\":\"return not (redis.call('exists', settings_key) == 1)\\n\",\"heartbeat.lua\":\"process_tick(now, true)\\n\",\"increment_reservoir.lua\":\"local incr = tonumber(ARGV[num_static_argv + 1])\\n\\nredis.call('hincrby', settings_key, 'reservoir', incr)\\n\\nlocal reservoir = process_tick(now, true)['reservoir']\\n\\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\\nrefresh_expiration(0, 0, groupTimeout)\\n\\nreturn reservoir\\n\",\"init.lua\":\"local clear = tonumber(ARGV[num_static_argv + 1])\\nlocal limiter_version = ARGV[num_static_argv + 2]\\nlocal num_local_argv = num_static_argv + 2\\n\\nif clear == 1 then\\n  redis.call('del', unpack(KEYS))\\nend\\n\\nif redis.call('exists', settings_key) == 0 then\\n  -- Create\\n  local args = {'hmset', settings_key}\\n\\n  for i = num_local_argv + 1, #ARGV do\\n    table.insert(args, ARGV[i])\\n  end\\n\\n  redis.call(unpack(args))\\n  redis.call('hmset', settings_key,\\n    'nextRequest', now,\\n    'lastReservoirRefresh', now,\\n    'lastReservoirIncrease', now,\\n    'running', 0,\\n    'done', 0,\\n    'unblockTime', 0,\\n    'capacityPriorityCounter', 0\\n  )\\n\\nelse\\n  -- Apply migrations\\n  local settings = redis.call('hmget', settings_key,\\n    'id',\\n    'version'\\n  )\\n  local id = settings[1]\\n  local current_version = settings[2]\\n\\n  if current_version ~= limiter_version then\\n    local version_digits = {}\\n    for k, v in string.gmatch(current_version, \\\"([^.]+)\\\") do\\n      table.insert(version_digits, tonumber(k))\\n    end\\n\\n    -- 2.10.0\\n    if version_digits[2] < 10 then\\n      redis.call('hsetnx', settings_key, 'reservoirRefreshInterval', '')\\n      redis.call('hsetnx', settings_key, 'reservoirRefreshAmount', '')\\n      redis.call('hsetnx', settings_key, 'lastReservoirRefresh', '')\\n      redis.call('hsetnx', settings_key, 'done', 0)\\n      redis.call('hset', settings_key, 'version', '2.10.0')\\n    end\\n\\n    -- 2.11.1\\n    if version_digits[2] < 11 or (version_digits[2] == 11 and version_digits[3] < 1) then\\n      if redis.call('hstrlen', settings_key, 'lastReservoirRefresh') == 0 then\\n        redis.call('hmset', settings_key,\\n          'lastReservoirRefresh', now,\\n          'version', '2.11.1'\\n        )\\n      end\\n    end\\n\\n    -- 2.14.0\\n    if version_digits[2] < 14 then\\n      local old_running_key = 'b_'..id..'_running'\\n      local old_executing_key = 'b_'..id..'_executing'\\n\\n      if redis.call('exists', old_running_key) == 1 then\\n        redis.call('rename', old_running_key, job_weights_key)\\n      end\\n      if redis.call('exists', old_executing_key) == 1 then\\n        redis.call('rename', old_executing_key, job_expirations_key)\\n      end\\n      redis.call('hset', settings_key, 'version', '2.14.0')\\n    end\\n\\n    -- 2.15.2\\n    if version_digits[2] < 15 or (version_digits[2] == 15 and version_digits[3] < 2) then\\n      redis.call('hsetnx', settings_key, 'capacityPriorityCounter', 0)\\n      redis.call('hset', settings_key, 'version', '2.15.2')\\n    end\\n\\n    -- 2.17.0\\n    if version_digits[2] < 17 then\\n      redis.call('hsetnx', settings_key, 'clientTimeout', 10000)\\n      redis.call('hset', settings_key, 'version', '2.17.0')\\n    end\\n\\n    -- 2.18.0\\n    if version_digits[2] < 18 then\\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseInterval', '')\\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseAmount', '')\\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseMaximum', '')\\n      redis.call('hsetnx', settings_key, 'lastReservoirIncrease', now)\\n      redis.call('hset', settings_key, 'version', '2.18.0')\\n    end\\n\\n  end\\n\\n  process_tick(now, false)\\nend\\n\\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\\nrefresh_expiration(0, 0, groupTimeout)\\n\\nreturn {}\\n\",\"process_tick.lua\":\"local process_tick = function (now, always_publish)\\n\\n  local compute_capacity = function (maxConcurrent, running, reservoir)\\n    if maxConcurrent ~= nil and reservoir ~= nil then\\n      return math.min((maxConcurrent - running), reservoir)\\n    elseif maxConcurrent ~= nil then\\n      return maxConcurrent - running\\n    elseif reservoir ~= nil then\\n      return reservoir\\n    else\\n      return nil\\n    end\\n  end\\n\\n  local settings = redis.call('hmget', settings_key,\\n    'id',\\n    'maxConcurrent',\\n    'running',\\n    'reservoir',\\n    'reservoirRefreshInterval',\\n    'reservoirRefreshAmount',\\n    'lastReservoirRefresh',\\n    'reservoirIncreaseInterval',\\n    'reservoirIncreaseAmount',\\n    'reservoirIncreaseMaximum',\\n    'lastReservoirIncrease',\\n    'capacityPriorityCounter',\\n    'clientTimeout'\\n  )\\n  local id = settings[1]\\n  local maxConcurrent = tonumber(settings[2])\\n  local running = tonumber(settings[3])\\n  local reservoir = tonumber(settings[4])\\n  local reservoirRefreshInterval = tonumber(settings[5])\\n  local reservoirRefreshAmount = tonumber(settings[6])\\n  local lastReservoirRefresh = tonumber(settings[7])\\n  local reservoirIncreaseInterval = tonumber(settings[8])\\n  local reservoirIncreaseAmount = tonumber(settings[9])\\n  local reservoirIncreaseMaximum = tonumber(settings[10])\\n  local lastReservoirIncrease = tonumber(settings[11])\\n  local capacityPriorityCounter = tonumber(settings[12])\\n  local clientTimeout = tonumber(settings[13])\\n\\n  local initial_capacity = compute_capacity(maxConcurrent, running, reservoir)\\n\\n  --\\n  -- Process 'running' changes\\n  --\\n  local expired = redis.call('zrangebyscore', job_expirations_key, '-inf', '('..now)\\n\\n  if #expired > 0 then\\n    redis.call('zremrangebyscore', job_expirations_key, '-inf', '('..now)\\n\\n    local flush_batch = function (batch, acc)\\n      local weights = redis.call('hmget', job_weights_key, unpack(batch))\\n                      redis.call('hdel',  job_weights_key, unpack(batch))\\n      local clients = redis.call('hmget', job_clients_key, unpack(batch))\\n                      redis.call('hdel',  job_clients_key, unpack(batch))\\n\\n      -- Calculate sum of removed weights\\n      for i = 1, #weights do\\n        acc['total'] = acc['total'] + (tonumber(weights[i]) or 0)\\n      end\\n\\n      -- Calculate sum of removed weights by client\\n      local client_weights = {}\\n      for i = 1, #clients do\\n        local removed = tonumber(weights[i]) or 0\\n        if removed > 0 then\\n          acc['client_weights'][clients[i]] = (acc['client_weights'][clients[i]] or 0) + removed\\n        end\\n      end\\n    end\\n\\n    local acc = {\\n      ['total'] = 0,\\n      ['client_weights'] = {}\\n    }\\n    local batch_size = 1000\\n\\n    -- Compute changes to Zsets and apply changes to Hashes\\n    for i = 1, #expired, batch_size do\\n      local batch = {}\\n      for j = i, math.min(i + batch_size - 1, #expired) do\\n        table.insert(batch, expired[j])\\n      end\\n\\n      flush_batch(batch, acc)\\n    end\\n\\n    -- Apply changes to Zsets\\n    if acc['total'] > 0 then\\n      redis.call('hincrby', settings_key, 'done', acc['total'])\\n      running = tonumber(redis.call('hincrby', settings_key, 'running', -acc['total']))\\n    end\\n\\n    for client, weight in pairs(acc['client_weights']) do\\n      redis.call('zincrby', client_running_key, -weight, client)\\n    end\\n  end\\n\\n  --\\n  -- Process 'reservoir' changes\\n  --\\n  local reservoirRefreshActive = reservoirRefreshInterval ~= nil and reservoirRefreshAmount ~= nil\\n  if reservoirRefreshActive and now >= lastReservoirRefresh + reservoirRefreshInterval then\\n    reservoir = reservoirRefreshAmount\\n    redis.call('hmset', settings_key,\\n      'reservoir', reservoir,\\n      'lastReservoirRefresh', now\\n    )\\n  end\\n\\n  local reservoirIncreaseActive = reservoirIncreaseInterval ~= nil and reservoirIncreaseAmount ~= nil\\n  if reservoirIncreaseActive and now >= lastReservoirIncrease + reservoirIncreaseInterval then\\n    local num_intervals = math.floor((now - lastReservoirIncrease) / reservoirIncreaseInterval)\\n    local incr = reservoirIncreaseAmount * num_intervals\\n    if reservoirIncreaseMaximum ~= nil then\\n      incr = math.min(incr, reservoirIncreaseMaximum - (reservoir or 0))\\n    end\\n    if incr > 0 then\\n      reservoir = (reservoir or 0) + incr\\n    end\\n    redis.call('hmset', settings_key,\\n      'reservoir', reservoir,\\n      'lastReservoirIncrease', lastReservoirIncrease + (num_intervals * reservoirIncreaseInterval)\\n    )\\n  end\\n\\n  --\\n  -- Clear unresponsive clients\\n  --\\n  local unresponsive = redis.call('zrangebyscore', client_last_seen_key, '-inf', (now - clientTimeout))\\n  local unresponsive_lookup = {}\\n  local terminated_clients = {}\\n  for i = 1, #unresponsive do\\n    unresponsive_lookup[unresponsive[i]] = true\\n    if tonumber(redis.call('zscore', client_running_key, unresponsive[i])) == 0 then\\n      table.insert(terminated_clients, unresponsive[i])\\n    end\\n  end\\n  if #terminated_clients > 0 then\\n    redis.call('zrem', client_running_key,         unpack(terminated_clients))\\n    redis.call('hdel', client_num_queued_key,      unpack(terminated_clients))\\n    redis.call('zrem', client_last_registered_key, unpack(terminated_clients))\\n    redis.call('zrem', client_last_seen_key,       unpack(terminated_clients))\\n  end\\n\\n  --\\n  -- Broadcast capacity changes\\n  --\\n  local final_capacity = compute_capacity(maxConcurrent, running, reservoir)\\n\\n  if always_publish or (initial_capacity ~= nil and final_capacity == nil) then\\n    -- always_publish or was not unlimited, now unlimited\\n    redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))\\n\\n  elseif initial_capacity ~= nil and final_capacity ~= nil and final_capacity > initial_capacity then\\n    -- capacity was increased\\n    -- send the capacity message to the limiter having the lowest number of running jobs\\n    -- the tiebreaker is the limiter having not registered a job in the longest time\\n\\n    local lowest_concurrency_value = nil\\n    local lowest_concurrency_clients = {}\\n    local lowest_concurrency_last_registered = {}\\n    local client_concurrencies = redis.call('zrange', client_running_key, 0, -1, 'withscores')\\n\\n    for i = 1, #client_concurrencies, 2 do\\n      local client = client_concurrencies[i]\\n      local concurrency = tonumber(client_concurrencies[i+1])\\n\\n      if (\\n        lowest_concurrency_value == nil or lowest_concurrency_value == concurrency\\n      ) and (\\n        not unresponsive_lookup[client]\\n      ) and (\\n        tonumber(redis.call('hget', client_num_queued_key, client)) > 0\\n      ) then\\n        lowest_concurrency_value = concurrency\\n        table.insert(lowest_concurrency_clients, client)\\n        local last_registered = tonumber(redis.call('zscore', client_last_registered_key, client))\\n        table.insert(lowest_concurrency_last_registered, last_registered)\\n      end\\n    end\\n\\n    if #lowest_concurrency_clients > 0 then\\n      local position = 1\\n      local earliest = lowest_concurrency_last_registered[1]\\n\\n      for i,v in ipairs(lowest_concurrency_last_registered) do\\n        if v < earliest then\\n          position = i\\n          earliest = v\\n        end\\n      end\\n\\n      local next_client = lowest_concurrency_clients[position]\\n      redis.call('publish', 'b_'..id,\\n        'capacity-priority:'..(final_capacity or '')..\\n        ':'..next_client..\\n        ':'..capacityPriorityCounter\\n      )\\n      redis.call('hincrby', settings_key, 'capacityPriorityCounter', '1')\\n    else\\n      redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))\\n    end\\n  end\\n\\n  return {\\n    ['capacity'] = final_capacity,\\n    ['running'] = running,\\n    ['reservoir'] = reservoir\\n  }\\nend\\n\",\"queued.lua\":\"local clientTimeout = tonumber(redis.call('hget', settings_key, 'clientTimeout'))\\nlocal valid_clients = redis.call('zrangebyscore', client_last_seen_key, (now - clientTimeout), 'inf')\\nlocal client_queued = redis.call('hmget', client_num_queued_key, unpack(valid_clients))\\n\\nlocal sum = 0\\nfor i = 1, #client_queued do\\n  sum = sum + tonumber(client_queued[i])\\nend\\n\\nreturn sum\\n\",\"refresh_expiration.lua\":\"local refresh_expiration = function (now, nextRequest, groupTimeout)\\n\\n  if groupTimeout ~= nil then\\n    local ttl = (nextRequest + groupTimeout) - now\\n\\n    for i = 1, #KEYS do\\n      redis.call('pexpire', KEYS[i], ttl)\\n    end\\n  end\\n\\nend\\n\",\"refs.lua\":\"local settings_key = KEYS[1]\\nlocal job_weights_key = KEYS[2]\\nlocal job_expirations_key = KEYS[3]\\nlocal job_clients_key = KEYS[4]\\nlocal client_running_key = KEYS[5]\\nlocal client_num_queued_key = KEYS[6]\\nlocal client_last_registered_key = KEYS[7]\\nlocal client_last_seen_key = KEYS[8]\\n\\nlocal now = tonumber(ARGV[1])\\nlocal client = ARGV[2]\\n\\nlocal num_static_argv = 2\\n\",\"register.lua\":\"local index = ARGV[num_static_argv + 1]\\nlocal weight = tonumber(ARGV[num_static_argv + 2])\\nlocal expiration = tonumber(ARGV[num_static_argv + 3])\\n\\nlocal state = process_tick(now, false)\\nlocal capacity = state['capacity']\\nlocal reservoir = state['reservoir']\\n\\nlocal settings = redis.call('hmget', settings_key,\\n  'nextRequest',\\n  'minTime',\\n  'groupTimeout'\\n)\\nlocal nextRequest = tonumber(settings[1])\\nlocal minTime = tonumber(settings[2])\\nlocal groupTimeout = tonumber(settings[3])\\n\\nif conditions_check(capacity, weight) then\\n\\n  redis.call('hincrby', settings_key, 'running', weight)\\n  redis.call('hset', job_weights_key, index, weight)\\n  if expiration ~= nil then\\n    redis.call('zadd', job_expirations_key, now + expiration, index)\\n  end\\n  redis.call('hset', job_clients_key, index, client)\\n  redis.call('zincrby', client_running_key, weight, client)\\n  redis.call('hincrby', client_num_queued_key, client, -1)\\n  redis.call('zadd', client_last_registered_key, now, client)\\n\\n  local wait = math.max(nextRequest - now, 0)\\n  local newNextRequest = now + wait + minTime\\n\\n  if reservoir == nil then\\n    redis.call('hset', settings_key,\\n      'nextRequest', newNextRequest\\n    )\\n  else\\n    reservoir = reservoir - weight\\n    redis.call('hmset', settings_key,\\n      'reservoir', reservoir,\\n      'nextRequest', newNextRequest\\n    )\\n  end\\n\\n  refresh_expiration(now, newNextRequest, groupTimeout)\\n\\n  return {true, wait, reservoir}\\n\\nelse\\n  return {false}\\nend\\n\",\"register_client.lua\":\"local queued = tonumber(ARGV[num_static_argv + 1])\\n\\n-- Could have been re-registered concurrently\\nif not redis.call('zscore', client_last_seen_key, client) then\\n  redis.call('zadd', client_running_key, 0, client)\\n  redis.call('hset', client_num_queued_key, client, queued)\\n  redis.call('zadd', client_last_registered_key, 0, client)\\nend\\n\\nredis.call('zadd', client_last_seen_key, now, client)\\n\\nreturn {}\\n\",\"running.lua\":\"return process_tick(now, false)['running']\\n\",\"submit.lua\":\"local queueLength = tonumber(ARGV[num_static_argv + 1])\\nlocal weight = tonumber(ARGV[num_static_argv + 2])\\n\\nlocal capacity = process_tick(now, false)['capacity']\\n\\nlocal settings = redis.call('hmget', settings_key,\\n  'id',\\n  'maxConcurrent',\\n  'highWater',\\n  'nextRequest',\\n  'strategy',\\n  'unblockTime',\\n  'penalty',\\n  'minTime',\\n  'groupTimeout'\\n)\\nlocal id = settings[1]\\nlocal maxConcurrent = tonumber(settings[2])\\nlocal highWater = tonumber(settings[3])\\nlocal nextRequest = tonumber(settings[4])\\nlocal strategy = tonumber(settings[5])\\nlocal unblockTime = tonumber(settings[6])\\nlocal penalty = tonumber(settings[7])\\nlocal minTime = tonumber(settings[8])\\nlocal groupTimeout = tonumber(settings[9])\\n\\nif maxConcurrent ~= nil and weight > maxConcurrent then\\n  return redis.error_reply('OVERWEIGHT:'..weight..':'..maxConcurrent)\\nend\\n\\nlocal reachedHWM = (highWater ~= nil and queueLength == highWater\\n  and not (\\n    conditions_check(capacity, weight)\\n    and nextRequest - now <= 0\\n  )\\n)\\n\\nlocal blocked = strategy == 3 and (reachedHWM or unblockTime >= now)\\n\\nif blocked then\\n  local computedPenalty = penalty\\n  if computedPenalty == nil then\\n    if minTime == 0 then\\n      computedPenalty = 5000\\n    else\\n      computedPenalty = 15 * minTime\\n    end\\n  end\\n\\n  local newNextRequest = now + computedPenalty + minTime\\n\\n  redis.call('hmset', settings_key,\\n    'unblockTime', now + computedPenalty,\\n    'nextRequest', newNextRequest\\n  )\\n\\n  local clients_queued_reset = redis.call('hkeys', client_num_queued_key)\\n  local queued_reset = {}\\n  for i = 1, #clients_queued_reset do\\n    table.insert(queued_reset, clients_queued_reset[i])\\n    table.insert(queued_reset, 0)\\n  end\\n  redis.call('hmset', client_num_queued_key, unpack(queued_reset))\\n\\n  redis.call('publish', 'b_'..id, 'blocked:')\\n\\n  refresh_expiration(now, newNextRequest, groupTimeout)\\nend\\n\\nif not blocked and not reachedHWM then\\n  redis.call('hincrby', client_num_queued_key, client, 1)\\nend\\n\\nreturn {reachedHWM, blocked, strategy}\\n\",\"update_settings.lua\":\"local args = {'hmset', settings_key}\\n\\nfor i = num_static_argv + 1, #ARGV do\\n  table.insert(args, ARGV[i])\\nend\\n\\nredis.call(unpack(args))\\n\\nprocess_tick(now, true)\\n\\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\\nrefresh_expiration(0, 0, groupTimeout)\\n\\nreturn {}\\n\",\"validate_client.lua\":\"if not redis.call('zscore', client_last_seen_key, client) then\\n  return redis.error_reply('UNKNOWN_CLIENT')\\nend\\n\\nredis.call('zadd', client_last_seen_key, now, client)\\n\",\"validate_keys.lua\":\"if not (redis.call('exists', settings_key) == 1) then\\n  return redis.error_reply('SETTINGS_KEY_NOT_FOUND')\\nend\\n\"}")},DM95:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n("KsTJ");const o="rich-media-item",i=r.css`
  li .${o} {
    margin: 0;
  }

  /* Hack for chrome to fix media single position
     inside a list when media is the first child */
  &.ua-chrome li > .mediaSingleView-content-wrap::before {
    content: '';
    display: block;
    height: 0;
  }

  table .${o} {
    margin-top: 12px;
    margin-bottom: 12px;
    clear: both;
  }

  .${o}.image-wrap-right
    + .${o}.image-wrap-left {
    clear: both;
  }

  .${o}.image-wrap-left
    + .${o}.image-wrap-right,
    .${o}.image-wrap-right
    + .${o}.image-wrap-left,
    .${o}.image-wrap-left
    + .${o}.image-wrap-left,
    .${o}.image-wrap-right
    + .${o}.image-wrap-right {
    margin-right: 0;
    margin-left: 0;
  }

  @media all and (max-width: ${410}px) {
    div.mediaSingleView-content-wrap[layout='wrap-left'],
    div.mediaSingleView-content-wrap[data-layout='wrap-left'],
    div.mediaSingleView-content-wrap[layout='wrap-right'],
    div.mediaSingleView-content-wrap[data-layout='wrap-right'] {
      float: none;
      overflow: auto;
      margin: 12px 0;
    }
  }
`},DhWB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("Czhu"),o=n("ERkP");class i extends o.PureComponent{constructor(e){super(e),this.handleProvider=(e,t)=>{this.setState(({providers:n})=>({providers:Object(r.a)(Object(r.a)({},n),{},{[e]:t})}))};const t={};this.props.providers.forEach(e=>{t[e]=void 0}),this.state={providers:t}}UNSAFE_componentWillMount(){const{providers:e,providerFactory:t}=this.props;e.forEach(e=>{t.subscribe(e,this.handleProvider)})}componentWillUnmount(){const{providers:e,providerFactory:t}=this.props;e.forEach(e=>{t.unsubscribe(e,this.handleProvider)})}render(){const{state:e,props:t}=this,{renderNode:n}=t;return n(e.providers)}}i.displayName="WithProviders"},E1Qm:function(e,t,n){"use strict";function r(e,t){return s(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||i()}function o(e){return s(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e){if(Array.isArray(e))return e}function a(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,c,"next",e)}function c(e){a(i,r,o,s,c,"throw",e)}s(void 0)}))}}var l,u,d,p,h,f,m,v,g,y=[].splice;g=n("Ow5E"),h=n("HSTp"),d=n("8Bzt"),p=n("7LR6"),f=n("DFfG"),u=n("wxq6"),m=n("Jg4X"),v=n("X7lI"),l=function(){class e{constructor(t={},...n){var r,o;this._addToQueue=this._addToQueue.bind(this),this._validateOptions(t,n),g.load(t,this.instanceDefaults,this),this._queues=new h(10),this._scheduled={},this._states=new m(["RECEIVED","QUEUED","RUNNING","EXECUTING"].concat(this.trackDoneStatus?["DONE"]:[])),this._limiter=null,this.Events=new u(this),this._submitLock=new v("submit",this.Promise),this._registerLock=new v("register",this.Promise),o=g.load(t,this.storeDefaults,{}),this._store=function(){if("redis"===this.datastore||"ioredis"===this.datastore||null!=this.connection)return r=g.load(t,this.redisStoreDefaults,{}),new f(this,o,r);if("local"===this.datastore)return r=g.load(t,this.localStoreDefaults,{}),new p(this,o,r);throw new e.prototype.BottleneckError("Invalid datastore type: "+this.datastore)}.call(this),this._queues.on("leftzero",()=>{var e;return null!=(e=this._store.heartbeat)&&"function"==typeof e.ref?e.ref():void 0}),this._queues.on("zero",()=>{var e;return null!=(e=this._store.heartbeat)&&"function"==typeof e.unref?e.unref():void 0})}_validateOptions(t,n){if(null==t||"object"!=typeof t||0!==n.length)throw new e.prototype.BottleneckError("Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.")}ready(){return this._store.ready}clients(){return this._store.clients}channel(){return"b_"+this.id}channel_client(){return`b_${this.id}_${this._store.clientId}`}publish(e){return this._store.__publish__(e)}disconnect(e=!0){return this._store.__disconnect__(e)}chain(e){return this._limiter=e,this}queued(e){return this._queues.queued(e)}clusterQueued(){return this._store.__queued__()}empty(){return 0===this.queued()&&this._submitLock.isEmpty()}running(){return this._store.__running__()}done(){return this._store.__done__()}jobStatus(e){return this._states.jobStatus(e)}jobs(e){return this._states.statusJobs(e)}counts(){return this._states.statusCounts()}_randomIndex(){return Math.random().toString(36).slice(2)}check(e=1){return this._store.__check__(e)}_clearGlobalState(e){return null!=this._scheduled[e]&&(clearTimeout(this._scheduled[e].expiration),delete this._scheduled[e],!0)}_free(e,t,n,r){var o=this;return c((function*(){var t,i;try{if(i=(yield o._store.__free__(e,n.weight)).running,o.Events.trigger("debug","Freed "+n.id,r),0===i&&o.empty())return o.Events.trigger("idle")}catch(s){return t=s,o.Events.trigger("error",t)}}))()}_run(e,t,n){var r,o,i;return t.doRun(),r=this._clearGlobalState.bind(this,e),i=this._run.bind(this,e,t),o=this._free.bind(this,e,t),this._scheduled[e]={timeout:setTimeout(()=>t.doExecute(this._limiter,r,i,o),n),expiration:null!=t.options.expiration?setTimeout((function(){return t.doExpire(r,i,o)}),n+t.options.expiration):void 0,job:t}}_drainOne(e){return this._registerLock.schedule(()=>{var t,n,r,o,i;if(0===this.queued())return this.Promise.resolve(null);i=this._queues.getFirst();var s=r=i.first();return o=s.options,t=s.args,null!=e&&o.weight>e?this.Promise.resolve(null):(this.Events.trigger("debug","Draining "+o.id,{args:t,options:o}),n=this._randomIndex(),this._store.__register__(n,o.weight,o.expiration).then(({success:e,wait:s,reservoir:a})=>{var c;return this.Events.trigger("debug","Drained "+o.id,{success:e,args:t,options:o}),e?(i.shift(),(c=this.empty())&&this.Events.trigger("empty"),0===a&&this.Events.trigger("depleted",c),this._run(n,r,s),this.Promise.resolve(o.weight)):this.Promise.resolve(null)}))})}_drainAll(e,t=0){return this._drainOne(e).then(n=>{var r;return null!=n?(r=null!=e?e-n:e,this._drainAll(r,t+n)):this.Promise.resolve(t)}).catch(e=>this.Events.trigger("error",e))}_dropAllQueued(e){return this._queues.shiftAll((function(t){return t.doDrop({message:e})}))}stop(t={}){var n,r;return t=g.load(t,this.stopDefaults),r=e=>{var t;return t=()=>{var t;return(t=this._states.counts)[0]+t[1]+t[2]+t[3]===e},new this.Promise((e,n)=>t()?e():this.on("done",()=>{if(t())return this.removeAllListeners("done"),e()}))},n=t.dropWaitingJobs?(this._run=function(e,n){return n.doDrop({message:t.dropErrorMessage})},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule(()=>this._submitLock.schedule(()=>{var e,n,o;for(e in n=this._scheduled)o=n[e],"RUNNING"===this.jobStatus(o.job.options.id)&&(clearTimeout(o.timeout),clearTimeout(o.expiration),o.job.doDrop({message:t.dropErrorMessage}));return this._dropAllQueued(t.dropErrorMessage),r(0)}))):this.schedule({priority:9,weight:0},()=>r(1)),this._receive=function(n){return n._reject(new e.prototype.BottleneckError(t.enqueueErrorMessage))},this.stop=()=>this.Promise.reject(new e.prototype.BottleneckError("stop() has already been called")),n}_addToQueue(t){var n=this;return c((function*(){var r,o,i,s,a,c,l;r=t.args,s=t.options;try{var u=yield n._store.__submit__(n.queued(),s.weight);a=u.reachedHWM,o=u.blocked,l=u.strategy}catch(d){return i=d,n.Events.trigger("debug","Could not queue "+s.id,{args:r,options:s,error:i}),t.doDrop({error:i}),!1}return o?(t.doDrop(),!0):a&&(null!=(c=l===e.prototype.strategy.LEAK?n._queues.shiftLastFrom(s.priority):l===e.prototype.strategy.OVERFLOW_PRIORITY?n._queues.shiftLastFrom(s.priority+1):l===e.prototype.strategy.OVERFLOW?t:void 0)&&c.doDrop(),null==c||l===e.prototype.strategy.OVERFLOW)?(null==c&&t.doDrop(),a):(t.doQueue(a,o),n._queues.push(t),yield n._drainAll(),a)}))()}_receive(t){return null!=this._states.jobStatus(t.options.id)?(t._reject(new e.prototype.BottleneckError(`A job with the same id already exists (id=${t.options.id})`)),!1):(t.doReceive(),this._submitLock.schedule(this._addToQueue,t))}submit(...e){var t,n,i,s,a,c,l,u;"function"==typeof e[0]?(a=o(e),n=a[0],e=a.slice(1),c=r(y.call(e,-1),1),t=c[0],s=g.load({},this.jobDefaults)):(s=(l=o(e))[0],n=l[1],e=l.slice(2),u=r(y.call(e,-1),1),t=u[0],s=g.load(s,this.jobDefaults));return(i=new d((...e)=>new this.Promise((function(t,r){return n(...e,(function(...e){return(null!=e[0]?r:t)(e)}))})),e,s,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise)).promise.then((function(e){return"function"==typeof t?t(...e):void 0})).catch((function(e){return Array.isArray(e)?"function"==typeof t?t(...e):void 0:"function"==typeof t?t(e):void 0})),this._receive(i)}schedule(...e){var t,n,r;if("function"==typeof e[0]){var i=o(e);r=i[0],e=i.slice(1),n={}}else{var s=o(e);n=s[0],r=s[1],e=s.slice(2)}return t=new d(r,e,n,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(t),t.promise}wrap(e){var t,n;return t=this.schedule.bind(this),(n=function(...n){return t(e.bind(this),...n)}).withOptions=function(n,...r){return t(n,e,...r)},n}updateSettings(e={}){var t=this;return c((function*(){return yield t._store.__updateSettings__(g.overwrite(e,t.storeDefaults)),g.overwrite(e,t.instanceDefaults,t),t}))()}currentReservoir(){return this._store.__currentReservoir__()}incrementReservoir(e=0){return this._store.__incrementReservoir__(e)}}return e.default=e,e.Events=u,e.version=e.prototype.version=n("8Uik").version,e.strategy=e.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},e.BottleneckError=e.prototype.BottleneckError=n("s5AU"),e.Group=e.prototype.Group=n("1Wf3"),e.RedisConnection=e.prototype.RedisConnection=n("tPYt"),e.IORedisConnection=e.prototype.IORedisConnection=n("cP58"),e.Batcher=e.prototype.Batcher=n("tYPF"),e.prototype.jobDefaults={priority:5,weight:1,expiration:null,id:"<no-id>"},e.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:e.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},e.prototype.localStoreDefaults={Promise,timeout:null,heartbeatInterval:250},e.prototype.redisStoreDefaults={Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},e.prototype.instanceDefaults={datastore:"local",connection:null,id:"<no-id>",rejectOnDrop:!0,trackDoneStatus:!1,Promise},e.prototype.stopDefaults={enqueueErrorMessage:"This limiter has been stopped and cannot accept new jobs.",dropWaitingJobs:!0,dropErrorMessage:"This limiter has been stopped."},e}.call(void 0),e.exports=l},EHE7:function(e,t,n){"use strict";var r=n("ERkP"),o=n.n(r),i=n("Czhu"),s=n("OsfY"),a=n("zIJM"),c=n("/J5f");const l={[a.c]:(e,{type:t})=>({status:t,lastUpdatedAt:Date.now()}),[a.e]:(e,{type:t})=>Object(i.a)(Object(i.a)({},e),{},{status:t}),[a.d]:(e,{type:t,payload:n})=>{const r=n,o=Object(i.a)({},e);return r?(o.status=Object(c.g)(r),o.details=r):o.status=t,o.lastUpdatedAt=Date.now(),o},[a.a]:(e,{type:t,error:n})=>Object(i.a)(Object(i.a)({},e),{},{status:t,error:n}),[a.b]:(e,{type:t,error:n})=>Object(i.a)(Object(i.a)({},e),{},{status:t,error:n})},u=(e,t)=>{if(l[t.type]){const n=e[t.url],r=n&&n.status===t.type;if(!t.hasExpired&&r)return e;{const r=l[t.type](n,t);return Object(i.a)(Object(i.a)({},e),{},{[t.url]:r})}}return e};var d=n("7kse"),p=n("plZ8");function h({storeOptions:e,client:t,cacheOptions:n,authFlow:l,children:h}){const m=Object(r.useContext)(f),v=Object(r.useMemo)(()=>{const{initialState:r}=e||{initialState:{}},o=t||new d.a,h=Object(s.createStore)(u,r),f=l||"oauth2",m=n||{maxAge:a.i,maxLoadingDelay:a.h};return{store:h,prefetchStore:{},connections:{client:o},config:Object(i.a)(Object(i.a)({},m),{},{authFlow:f}),extractors:{getPreview:(e,t)=>{const n=Object(c.h)(h,e);return n.details?Object(p.a)(n.details.data,t):void 0}}}},[t,n,l,e]);return o.a.createElement(f.Provider,{value:m||v},h)}n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return h}));const f=Object(r.createContext)(void 0);function m(){const e=Object(r.useContext)(f);if(!e)throw Error("useSmartCard() must be wrapped in <SmartCardProvider>");return e}t.c=f},EPjx:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("KsTJ"),o=n("qPpp"),i=n("vVzW");const s=r.css`
  & blockquote {
    box-sizing: border-box;
    padding-left: ${2*Object(i.g)()}px;
    border-left: 2px solid ${o.c};
    margin: ${o.ab} 0 0 0;
    margin-right: 0;

    [dir='rtl'] & {
      padding-left: 0;
      padding-right: ${2*Object(i.g)()}px;
    }

    &:first-child {
      margin-top: 0;
    }

    &::before {
      content: '';
    }

    &::after {
      content: none;
    }

    & p {
      display: block;
    }

    & table,
    & table:last-child {
      display: inline-table;
    }
  }
`},ERVN:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));const r="https://api-private.dev.atlassian.com",o="https://api-private.stg.atlassian.com",i="https://api-private.atlassian.com",s={dev:r,development:r,stg:o,staging:o,prd:i,prod:i,production:i},a=e=>e?e in s?s[e]:i:window.location.origin,c=e=>{if(e){return a(e)+"/object-resolver"}return"/gateway/api/object-resolver"}},"F/E8":function(e,t,n){"use strict";let r;function o(){return void 0===r&&(r="undefined"!=typeof window&&"performance"in window&&["measure","clearMeasures","clearMarks","getEntriesByName","getEntriesByType","now"].every(e=>!!performance[e])),r}function i(){return!("undefined"==typeof window||!("PerformanceObserver"in window))}function s(){return i()&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}))},F6Vc:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"em",(function(){return s})),n.d(r,"code",(function(){return a})),n.d(r,"strike",(function(){return c})),n.d(r,"strong",(function(){return l})),n.d(r,"underline",(function(){return u})),n.d(r,"link",(function(){return d})),n.d(r,"subsup",(function(){return p})),n.d(r,"textColor",(function(){return h})),n.d(r,"inline_comment_marker",(function(){return f})),n.d(r,"breakout",(function(){return m})),n.d(r,"alignment",(function(){return v})),n.d(r,"indentation",(function(){return g})),n.d(r,"annotation",(function(){return y})),n.d(r,"hardBreak",(function(){return b})),n.d(r,"mention",(function(){return w})),n.d(r,"emoji",(function(){return _})),n.d(r,"inlineExtension",(function(){return k})),n.d(r,"date",(function(){return S})),n.d(r,"placeholder",(function(){return O})),n.d(r,"blockCard",(function(){return x})),n.d(r,"inlineCard",(function(){return C})),n.d(r,"status",(function(){return E})),n.d(r,"text",(function(){return T})),n.d(r,"formatted_text_inline",(function(){return N})),n.d(r,"link_text_inline",(function(){return A})),n.d(r,"code_inline",(function(){return R})),n.d(r,"atomic_inline",(function(){return M})),n.d(r,"inline",(function(){return I})),n.d(r,"paragraph",(function(){return j})),n.d(r,"paragraph_with_no_marks",(function(){return D})),n.d(r,"paragraph_with_alignment",(function(){return P})),n.d(r,"paragraph_with_indentation",(function(){return $})),n.d(r,"bulletList",(function(){return L})),n.d(r,"media",(function(){return z})),n.d(r,"caption",(function(){return B})),n.d(r,"mediaSingle",(function(){return F})),n.d(r,"mediaSingle_full",(function(){return V})),n.d(r,"mediaSingle_caption",(function(){return q})),n.d(r,"codeBlock",(function(){return W})),n.d(r,"codeBlock_with_no_marks",(function(){return K})),n.d(r,"codeBlock_with_marks",(function(){return U})),n.d(r,"listItem",(function(){return H})),n.d(r,"orderedList",(function(){return G})),n.d(r,"heading",(function(){return J})),n.d(r,"heading_with_no_marks",(function(){return Y})),n.d(r,"heading_with_alignment",(function(){return X})),n.d(r,"heading_with_indentation",(function(){return Q})),n.d(r,"panel",(function(){return Z})),n.d(r,"blockquote",(function(){return ee})),n.d(r,"rule",(function(){return te})),n.d(r,"mediaGroup",(function(){return ne})),n.d(r,"decisionItem",(function(){return re})),n.d(r,"decisionList",(function(){return oe})),n.d(r,"taskItem",(function(){return ie})),n.d(r,"taskList",(function(){return se})),n.d(r,"extension",(function(){return ae})),n.d(r,"embedCard",(function(){return ce})),n.d(r,"nestedExpand_content",(function(){return le})),n.d(r,"nestedExpand",(function(){return ue})),n.d(r,"nestedExpand_with_no_marks",(function(){return de})),n.d(r,"table",(function(){return pe})),n.d(r,"tableRow",(function(){return he})),n.d(r,"tableCell_content",(function(){return fe})),n.d(r,"tableCell",(function(){return me})),n.d(r,"tableHeader",(function(){return ve})),n.d(r,"non_nestable_block_content",(function(){return ge})),n.d(r,"expand",(function(){return ye})),n.d(r,"expand_with_no_mark",(function(){return be})),n.d(r,"expand_with_breakout_mark",(function(){return we})),n.d(r,"bodiedExtension",(function(){return _e})),n.d(r,"block_content",(function(){return ke})),n.d(r,"layoutColumn",(function(){return Se})),n.d(r,"layoutSection",(function(){return Oe})),n.d(r,"doc",(function(){return xe}));var o=n("Czhu"),i=n("HbGN"),s={props:{type:{type:"enum",values:["em"]}}},a={props:{type:{type:"enum",values:["code"]}}},c={props:{type:{type:"enum",values:["strike"]}}},l={props:{type:{type:"enum",values:["strong"]}}},u={props:{type:{type:"enum",values:["underline"]}}},d={props:{type:{type:"enum",values:["link"]},attrs:{props:{href:{type:"string"},title:{type:"string",optional:!0},id:{type:"string",optional:!0},collection:{type:"string",optional:!0},occurrenceKey:{type:"string",optional:!0}}}}},p={props:{type:{type:"enum",values:["subsup"]},attrs:{props:{type:{type:"enum",values:["sub","sup"]}}}}},h={props:{type:{type:"enum",values:["textColor"]},attrs:[{props:{color:{type:"string",pattern:"^#[0-9a-f]{6}$"}}},{props:{color:{type:"string",pattern:"^#[0-9a-fA-F]{6}$"}}}]},required:["attrs"]},f={props:{type:{type:"enum",values:["confluenceInlineComment"]},attrs:{props:{reference:{type:"string"}}}}},m={props:{type:{type:"enum",values:["breakout"]},attrs:{props:{mode:{type:"enum",values:["wide","full-width"]}}}}},v={props:{type:{type:"enum",values:["alignment"]},attrs:{props:{align:{type:"enum",values:["center","end"]}}}}},g={props:{type:{type:"enum",values:["indentation"]},attrs:{props:{level:{type:"number",minimum:1,maximum:6}}}}},y={props:{type:{type:"enum",values:["annotation"]},attrs:{props:{id:{type:"string"},annotationType:{type:"enum",values:["inlineComment"]}}}}},b={props:{type:{type:"enum",values:["hardBreak"]},attrs:{props:{text:{type:"enum",values:["\n"],optional:!0}},optional:!0}}},w={props:{type:{type:"enum",values:["mention"]},attrs:{props:{id:{type:"string"},text:{type:"string",optional:!0},userType:{type:"enum",values:["DEFAULT","SPECIAL","APP"],optional:!0},accessLevel:{type:"string",optional:!0}}}}},_={props:{type:{type:"enum",values:["emoji"]},attrs:{props:{id:{type:"string",optional:!0},shortName:{type:"string"},text:{type:"string",optional:!0}}}}},k={props:{type:{type:"enum",values:["inlineExtension"]},attrs:{props:{extensionKey:{type:"string",minLength:1},extensionType:{type:"string",minLength:1},parameters:{type:"object",optional:!0},text:{type:"string",optional:!0},localId:{type:"string",minLength:1,optional:!0}}}}},S={props:{type:{type:"enum",values:["date"]},attrs:{props:{timestamp:{type:"string",minLength:1}}}}},O={props:{type:{type:"enum",values:["placeholder"]},attrs:{props:{text:{type:"string"}}}}},x={props:{type:{type:"enum",values:["blockCard"]},attrs:[{props:{url:{type:"string"}}},{props:{data:{type:"object"}}}]},required:["attrs"]},C={props:{type:{type:"enum",values:["inlineCard"]},attrs:[{props:{url:{type:"string"}}},{props:{data:{type:"object"}}}]},required:["attrs"]},E={props:{type:{type:"enum",values:["status"]},attrs:{props:{text:{type:"string",minLength:1},color:{type:"enum",values:["neutral","purple","blue","red","yellow","green"]},localId:{type:"string",optional:!0},style:{type:"string",optional:!0}}}}},T={props:{type:{type:"enum",values:["text"]},text:{type:"string",minLength:1},marks:{type:"array",items:[],optional:!0}}},N=["text",{props:{marks:{type:"array",items:[["em","strike","strong","underline","link","subsup","textColor","annotation"]],optional:!0}}}],A=["text",{props:{marks:{type:"array",items:["link"],optional:!0}}}],R=["text",{props:{marks:{type:"array",items:[["code","link","annotation"]],optional:!0}}}],M=["hardBreak","mention","emoji","inlineExtension","date","placeholder","inlineCard","status"],I=["hardBreak","mention","emoji","inlineExtension","date","placeholder","inlineCard","status","formatted_text_inline","code_inline"],j={props:{type:{type:"enum",values:["paragraph"]},content:{type:"array",items:["inline"],allowUnsupportedInline:!0,optional:!0},marks:{type:"array",items:[],optional:!0}}},D=["paragraph",{props:{marks:{type:"array",items:[],maxItems:0,optional:!0}}}],P=["paragraph",{props:{marks:{type:"array",items:["alignment"],optional:!0}}}],$=["paragraph",{props:{marks:{type:"array",items:["indentation"],optional:!0}}}],L={props:{type:{type:"enum",values:["bulletList"]},content:{type:"array",items:["listItem"],minItems:1}}},z={props:{type:{type:"enum",values:["media"]},attrs:[{props:{type:{type:"enum",values:["link","file"]},id:{type:"string",minLength:1},collection:{type:"string"},height:{type:"number",optional:!0},width:{type:"number",optional:!0},occurrenceKey:{type:"string",minLength:1,optional:!0},alt:{type:"string",optional:!0}}},{props:{type:{type:"enum",values:["external"]},url:{type:"string"},alt:{type:"string",optional:!0},width:{type:"number",optional:!0},height:{type:"number",optional:!0}}}]},required:["attrs"]},B={props:{type:{type:"enum",values:["caption"]},content:{type:"array",items:[["hardBreak","mention","emoji","date","placeholder","inlineCard","status","formatted_text_inline","code_inline"]],minItems:0}}},F={props:{type:{type:"enum",values:["mediaSingle"]},attrs:{props:{width:{type:"number",minimum:0,maximum:100,optional:!0},layout:{type:"enum",values:["wide","full-width","center","wrap-right","wrap-left","align-end","align-start"]}},optional:!0},marks:{type:"array",items:["link"],optional:!0}}},V=["mediaSingle",{props:{content:{type:"array",items:["media"],isTupleLike:!0,minItems:1,maxItems:1}}}],q=["mediaSingle",{props:{content:{type:"array",items:["media","caption"],isTupleLike:!0,minItems:1,maxItems:2}}}],W={props:{type:{type:"enum",values:["codeBlock"]},content:{type:"array",items:[["text",{props:{marks:{type:"array",items:[],maxItems:0,optional:!0}}}]],optional:!0},marks:{type:"array",items:[],optional:!0},attrs:{props:{language:{type:"string",optional:!0}},optional:!0}}},K=["codeBlock",{props:{marks:{type:"array",items:[],maxItems:0,optional:!0}}}],U=["codeBlock",{props:{marks:{type:"array",items:["breakout"],optional:!0}}}],H={props:{type:{type:"enum",values:["listItem"]},content:{type:"array",items:[["paragraph_with_no_marks","mediaSingle_full","mediaSingle_caption","codeBlock_with_no_marks"],["paragraph_with_no_marks","bulletList","mediaSingle_full","mediaSingle_caption","codeBlock_with_no_marks","orderedList"]],isTupleLike:!0,minItems:1}}},G={props:{type:{type:"enum",values:["orderedList"]},content:{type:"array",items:["listItem"],minItems:1},attrs:{props:{order:{type:"number",minimum:1}},optional:!0}}},J={props:{type:{type:"enum",values:["heading"]},content:{type:"array",items:["inline"],allowUnsupportedInline:!0,optional:!0},marks:{type:"array",items:[],optional:!0},attrs:{props:{level:{type:"number",minimum:1,maximum:6}}}}},Y=["heading",{props:{marks:{type:"array",items:[],maxItems:0,optional:!0}}}],X=["heading",{props:{marks:{type:"array",items:["alignment"],optional:!0}}}],Q=["heading",{props:{marks:{type:"array",items:["indentation"],optional:!0}}}],Z={props:{type:{type:"enum",values:["panel"]},attrs:{props:{panelType:{type:"enum",values:["info","note","tip","warning","error","success","custom"]},panelIcon:{type:"string",optional:!0},panelColor:{type:"string",optional:!0}}},content:{type:"array",items:[["blockCard","paragraph_with_no_marks","bulletList","orderedList","heading_with_no_marks"]],minItems:1}}},ee={props:{type:{type:"enum",values:["blockquote"]},content:{type:"array",items:["paragraph_with_no_marks"],minItems:1}}},te={props:{type:{type:"enum",values:["rule"]}}},ne={props:{type:{type:"enum",values:["mediaGroup"]},content:{type:"array",items:["media"],minItems:1}}},re={props:{type:{type:"enum",values:["decisionItem"]},content:{type:"array",items:["inline"],allowUnsupportedInline:!0,optional:!0},attrs:{props:{localId:{type:"string"},state:{type:"string"}}}}},oe={props:{type:{type:"enum",values:["decisionList"]},content:{type:"array",items:["decisionItem"],minItems:1},attrs:{props:{localId:{type:"string"}}}}},ie={props:{type:{type:"enum",values:["taskItem"]},content:{type:"array",items:["inline"],allowUnsupportedInline:!0,optional:!0},attrs:{props:{localId:{type:"string"},state:{type:"enum",values:["TODO","DONE"]}}}}},se={props:{type:{type:"enum",values:["taskList"]},content:{type:"array",items:["taskItem",["taskItem","taskList"]],isTupleLike:!0,minItems:1},attrs:{props:{localId:{type:"string"}}}}},ae={props:{type:{type:"enum",values:["extension"]},attrs:{props:{extensionKey:{type:"string",minLength:1},extensionType:{type:"string",minLength:1},parameters:{type:"object",optional:!0},text:{type:"string",optional:!0},layout:{type:"enum",values:["wide","full-width","default"],optional:!0},localId:{type:"string",minLength:1,optional:!0}}}}},ce={props:{type:{type:"enum",values:["embedCard"]},attrs:{props:{originalWidth:{type:"number",optional:!0},originalHeight:{type:"number",optional:!0},url:{type:"string"},width:{type:"number",minimum:0,maximum:100,optional:!0},layout:{type:"enum",values:["wide","full-width","center","wrap-right","wrap-left","align-end","align-start"]}}}}},le={type:"array",items:[["paragraph_with_no_marks","mediaSingle_full","mediaSingle_caption","heading_with_no_marks","mediaGroup"]],minItems:1,allowUnsupportedBlock:!0},ue={props:{type:{type:"enum",values:["nestedExpand"]},attrs:{props:{title:{type:"string",optional:!0}}},content:"nestedExpand_content"},required:["content"]},de=["nestedExpand",{props:{marks:{type:"array",items:[],maxItems:0,optional:!0}}}],pe={props:{type:{type:"enum",values:["table"]},attrs:{props:{isNumberColumnEnabled:{type:"boolean",optional:!0},layout:{type:"enum",values:["wide","full-width","default"],optional:!0}},optional:!0},content:{type:"array",items:["tableRow"],minItems:1}}},he={props:{type:{type:"enum",values:["tableRow"]},content:{type:"array",items:[["tableCell","tableHeader"]]}}},fe={type:"array",items:[["blockCard","paragraph_with_no_marks","paragraph_with_alignment","bulletList","mediaSingle_full","mediaSingle_caption","codeBlock_with_no_marks","orderedList","heading_with_no_marks","heading_with_alignment","heading_with_indentation","panel","blockquote","rule","mediaGroup","decisionList","taskList","extension","embedCard","nestedExpand_with_no_marks"]],minItems:1,allowUnsupportedBlock:!0},me={props:{type:{type:"enum",values:["tableCell"]},attrs:{props:{colspan:{type:"number",optional:!0},rowspan:{type:"number",optional:!0},colwidth:{type:"array",items:[{type:"number"}],optional:!0},background:{type:"string",optional:!0}},optional:!0},content:"tableCell_content"},required:["content"]},ve={props:{type:{type:"enum",values:["tableHeader"]},attrs:{props:{colspan:{type:"number",optional:!0},rowspan:{type:"number",optional:!0},colwidth:{type:"array",items:[{type:"number"}],optional:!0},background:{type:"string",optional:!0}},optional:!0},content:"tableCell_content"},required:["content"]},ge=["blockCard","paragraph_with_no_marks","bulletList","mediaSingle_full","mediaSingle_caption","codeBlock_with_no_marks","orderedList","heading_with_no_marks","panel","blockquote","rule","mediaGroup","decisionList","taskList","extension","embedCard","table"],ye={props:{type:{type:"enum",values:["expand"]},attrs:{props:{title:{type:"string",optional:!0}}},content:{type:"array",items:["non_nestable_block_content"],minItems:1,allowUnsupportedBlock:!0},marks:{type:"array",items:[],optional:!0}}},be=["expand",{props:{marks:{type:"array",items:[],maxItems:0,optional:!0}}}],we=["expand",{props:{marks:{type:"array",items:["breakout"],optional:!0}}}],_e={props:{type:{type:"enum",values:["bodiedExtension"]},attrs:{props:{extensionKey:{type:"string",minLength:1},extensionType:{type:"string",minLength:1},parameters:{type:"object",optional:!0},text:{type:"string",optional:!0},layout:{type:"enum",values:["wide","full-width","default"],optional:!0},localId:{type:"string",minLength:1,optional:!0}}},content:{type:"array",items:["non_nestable_block_content"],minItems:1,allowUnsupportedBlock:!0}}},ke=["blockCard","paragraph_with_no_marks","paragraph_with_alignment","bulletList","mediaSingle_full","mediaSingle_caption","codeBlock_with_no_marks","orderedList","heading_with_no_marks","heading_with_alignment","heading_with_indentation","panel","blockquote","rule","mediaGroup","decisionList","taskList","extension","embedCard","table","expand_with_no_mark","bodiedExtension"],Se={props:{type:{type:"enum",values:["layoutColumn"]},attrs:{props:{width:{type:"number",minimum:0,maximum:100}}},content:{type:"array",items:["block_content"],minItems:1}}},Oe={props:{type:{type:"enum",values:["layoutSection"]},content:{type:"array",items:["layoutColumn"],minItems:2,maxItems:3},marks:{type:"array",items:["breakout"],optional:!0}}},xe={props:{version:{type:"enum",values:[1]},type:{type:"enum",values:["doc"]},content:{type:"array",items:[["blockCard","paragraph_with_no_marks","paragraph_with_alignment","paragraph_with_indentation","bulletList","mediaSingle_full","mediaSingle_caption","codeBlock_with_no_marks","codeBlock_with_marks","orderedList","heading_with_no_marks","heading_with_alignment","heading_with_indentation","panel","blockquote","rule","mediaGroup","decisionList","taskList","extension","embedCard","table","expand_with_no_mark","expand_with_breakout_mark","bodiedExtension","layoutSection"]],allowUnsupportedBlock:!0}}};const Ce=e=>null!=e,Ee=e=>"string"==typeof e||e instanceof String,Te=e=>Array.isArray(e)?e:[e];function Ne(e,t=(e=>e)){if(e.props&&e.props.marks){const n=e.props.marks,{items:r}=n,s=Object(i.a)(n,["items"]);return Object(o.a)(Object(o.a)({},e),{},{props:Object(o.a)(Object(o.a)({},e.props),{},{marks:Object(o.a)(Object(o.a)({},s),{},{items:r.length?Array.isArray(r[0])?r.map(t):[t(r)]:[[]]})})})}return e}const Ae=(e,t)=>Object.keys(e).reduce((n,r)=>(n[t(r,e[r],e)?0:1].push(r),n),[[],[]]);function Re(e,t){if(!Ce(e.type))return!!e.optional;if(!Ce(t))return!!e.optional;switch(e.type){case"boolean":return!0===(n=t)||!1===n||"[object Boolean]"===toString.call(n);case"number":return(e=>"number"==typeof e&&!isNaN(e)&&isFinite(e))(t)&&(!Ce(e.minimum)||e.minimum<=t)&&(!Ce(e.maximum)||e.maximum>=t);case"integer":return(e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e)(t)&&(!Ce(e.minimum)||e.minimum<=t)&&(!Ce(e.maximum)||e.maximum>=t);case"string":return Ee(t)&&(!Ce(e.minLength)||e.minLength<=t.length)&&(!e.pattern||new RegExp(e.pattern).test(t));case"object":return(e=>"object"==typeof e&&null!==e&&!Array.isArray(e))(t);case"array":const r=e.items,o=r.length-1;return!!Array.isArray(t)&&t.every((e,t)=>Re(r[Math.min(t,o)],e));case"enum":return Ee(t)&&e.values.indexOf(t)>-1}var n;return!1}const Me=(e,t)=>`${e}: ${t}.`,Ie=e=>{if(e&&e.props&&e.props.content){const{allowUnsupportedBlock:t,allowUnsupportedInline:n}=e.props.content;return{allowUnsupportedBlock:t,allowUnsupportedInline:n}}return{}},je=(e,t,n)=>{const r=Me(e.type,"invalid content");if(t)return t(Object(o.a)({},e),{code:"INVALID_CONTENT",message:r},Ie(n));throw new Error(r)},De=(e,t,n,r)=>{const i=r||Me(t.type,"unsupported mark");if(n)return n(Object(o.a)({},t),{code:e,message:i,meta:t},{allowUnsupportedBlock:!1,allowUnsupportedInline:!1,isMark:!0});throw new Error(i)};function Pe(e,t,n){const i=function(e,t){return Object.keys(r).reduce((n,i)=>{const s=Object(o.a)({},r[i]);return s.props&&(s.props=Object(o.a)({},s.props),s.props.content&&(Ee(s.props.content)&&(s.props.content=r[s.props.content]),Array.isArray(s.props.content)?s.props.content={type:"array",items:(s.props.content||[]).map(e=>e.items)}:s.props.content=Object(o.a)({},s.props.content),s.props.content.items=s.props.content.items.map(e=>Ee(e)?Array.isArray(r[e])?r[e]:[e]:e).map(n=>n.map(e=>Array.isArray(r[e])?r[e]:Ee(e)?e:["text",e]).filter(t=>!e||e.indexOf(Array.isArray(t)?t[0]:t)>-1).map(e=>Array.isArray(e)&&t?[e[0],Ne(e[1])]:e)))),n[i]=s,n},{})}(e,t),{mode:s="strict",allowPrivateAttributes:a=!1}=n||{},c=(e,t,n,r,u=!1)=>{const{type:d}=e;let p=Object(o.a)({},e);const h=(e,n,o)=>{const i=Me(d,n);if(t)return{valid:!1,entity:t(p,{code:e,message:i,meta:o},Ie(r))};throw new Error(i)};if(!d)return h("INVALID_TYPE","ProseMirror Node/Mark should contain a `type`");{const r=function(e,t){if(!t)return{};for(let n=0,r=t.length;n<r;n++){const r=t[n];let o=r,i={};if(Array.isArray(r)&&([o,i]=r),o===e)return i}return!1}(d,n);if(!1===r)return u?{valid:!1}:h("INVALID_TYPE","type not allowed here");const f=i[d];if(!f)return h("INVALID_TYPE",d+": No validation spec found for type!");const m=function(e,t,n,r,i,u,d,p){let h={hasValidated:!1};const f=function(e,t){return Object(o.a)(Object(o.a)(Object(o.a)({},e),t),e.props?{props:Object(o.a)(Object(o.a)({},e.props),t.props||{})}:{})}(e,t);if(!f)return h;const m=function(e,t,n){let r={valid:!0,entity:t};e.required&&(e.required.every(e=>Ce(t[e]))||(r=n("MISSING_PROPERTIES","required prop missing")));return r}(f,n,r);if(!m.valid)return{hasValidated:!0,result:m};if(!f.props){const e=Object.keys(n);return e.length>1?{hasValidated:!0,result:r("REDUNDANT_PROPERTIES","redundant props found: "+Object.keys(n).join(", "),{props:e})}:h}const v=function(e,t,n){let r={valid:!0,entity:t};e.props.text&&Ce(t.text)&&!Re(e.props.text,t.text)&&(r=n("INVALID_TEXT","'text' validation failed"));return r}(f,n,r);if(!v.valid)return{hasValidated:!0,result:v};const g=function(e,t,n){let r={valid:!0,entity:t};if(e.props.content&&t.content){const{minItems:o,maxItems:i}=e.props.content,s=t.content.length;Ce(o)&&o>s?r=n("INVALID_CONTENT_LENGTH",`'content' should have more than ${o} child`,{length:s}):Ce(i)&&i<s&&(r=n("INVALID_CONTENT_LENGTH",`'content' should have less than ${i} child`,{length:s}))}return r}(f,n,r);if(!g.valid)return{hasValidated:!0,result:g};const[,y]=Ae(f.props,(e,t)=>t.optional||Ce(n[e]));if(y.length)return{hasValidated:!0,result:r("MISSING_PROPERTIES","required prop missing",{props:y})};const b=function(e,t,n,r,i){let s={},c={valid:!0,entity:t};const l=e.props&&e.props.attrs;if(t.attrs){if(r&&!l){const e=Me("redundant attributes found",Object.keys(t.attrs).join(", "));return{valid:!1,marksValidationOutput:[{valid:!0,originalMark:t,errorCode:"REDUNDANT_ATTRIBUTES",message:e}]}}let u=function(e,t){let n=[],r={};if(e.props&&e.props.attrs){const o=Te(e.props.attrs);for(let e=0,i=o.length;e<i;++e){const i=o[e];if(i&&i.props&&([,n]=Ae(i.props,(e,n)=>Re(n,t.attrs[e]))),r=i,!n.length)break}}return{invalidAttrs:n,validatorAttrs:r}}(e,t),{invalidAttrs:d}=u;s=u.validatorAttrs;const p=Object.keys(t.attrs).filter(e=>!(a&&e.startsWith("__"))),h=!s||!p.every(e=>!!s.props[e]);if(d.length||h){const e=p.filter(e=>!s.props[e]);let a="INVALID_ATTRIBUTES",l=Me(t.type,"'attrs' validation failed"),u=d;if(d.length&&h?u=u.concat(e):h&&(a="REDUNDANT_ATTRIBUTES",l=Me("redundant attributes found",e.join(", ")),u=e),r){return{valid:!1,marksValidationOutput:[{valid:!0,originalMark:t,errorCode:a,message:l}]}}l=Me(t.type,"'attrs' validation failed"),a="UNSUPPORTED_ATTRIBUTES",n.marks=function(e,t,n,r,i,s){let a={};for(let o in n)a[n[o]]=e.attrs&&e.attrs[n[o]],t.attrs&&delete t.attrs[n[o]];const c=((e,t,n,r,o)=>{if(o)return o({type:e.type},{code:t,message:r,meta:n},{allowUnsupportedBlock:!1,allowUnsupportedInline:!1,isMark:!1,isNodeAttribute:!0});throw new Error(r)})(e,r,a,i,s),l=Object(o.a)({},t);return l.marks?(c&&l.marks.push(c),l.marks):[c]}(t,n,u,a,l,i),c={valid:!0,entity:n}}}return c}(f,n,i,p,d);if(!b.valid)return{hasValidated:!0,result:b};if(p&&b.valid)return{hasValidated:!0,result:b};const w=function(e,t,n,r,o){let i={valid:!0,entity:t};const[a,c]=Ae(t,t=>Ce(e.props[t]));if(c.length)if("loose"===s)r={type:o},a.reduce((e,n)=>{return r=t,(o=e)[i=n]=r[i],o;var r,o,i},r);else if(!(c.indexOf("marks")>-1&&1===c.length))return n("REDUNDANT_PROPERTIES","redundant props found: "+c.join(", "),{props:c});return i}(f,n,r,i,u);if(!w.valid)return{hasValidated:!0,result:w};if(f.props.content){const e=f.props.content;if(n.content){const t=(t,n)=>{if(void 0===t)return t;const r=(e,t,n,r,o=!1)=>{let i=!0;if(e&&e.marks&&t){const s=t.filter(e=>e.valid),a=t.map(e=>e.valid?e.newMark:s.length||r||o||"REDUNDANT_ATTRIBUTES"===e.errorCode||"INVALID_ATTRIBUTES"===e.errorCode?De(e.errorCode,e.originalMark,n,e.message):void 0).filter(Boolean);a.length?e.marks=a:(delete e.marks,i=!1)}return{valid:i,entity:e}};if(!!e.isTupleLike){const{entity:o,marksValidationOutput:i}=c(t,d,Te(e.items[n]||e.items[e.items.length-1]),f),{entity:s}=r(o,i,d,!1,!0);return s}const o=e.items.filter(e=>!Array.isArray(e)||e.some(e=>(Array.isArray(e)?e[0]:e)===t.type));if(o.length){if(o.length>1)throw new Error("Consider using Tuple instead!");const e=Te(o[0]).filter(e=>(Array.isArray(e)?e[0]:e)===t.type);if(0===e.length)return je(t,d,f);let n,s;for(let o=0,a=e.length;o<a;o++)try{const n=[e[o]],{valid:i,entity:a,marksValidationOutput:l}=c(t,d,n,f);if(i){const t=o===e.length-1,{valid:n,entity:i}=r(a,l,d,t);if(n)return i;s=s||a}else s=s||a}catch(i){n=n||i}if(d)return s;throw n}return je(t,d,f)};i.content=n.content.map(t).filter(Boolean)}else if(!e.optional)return{hasValidated:!0,result:r("MISSING_PROPERTIES","missing `content` prop")}}if(n.marks)return{hasValidated:!0,result:l(f,n,d,i,r)};return h}(f,r,e,h,p,d,t,u);if(m.hasValidated&&m.result)return m.result}return{valid:!0,entity:p}};return(e,t,n,r)=>{const o=c(e,t,n,r);return{entity:o.entity,valid:o.valid}};function l(e,n,r,o,i){let a;if(e.props&&e.props.marks){a={valid:!0,entity:o,marksValidationOutput:function(e,n,r,o){return e.marks?e.marks.map(e=>{const i=!t||t.indexOf(e.type)>-1;if("strict"===s&&i){const t=c(e,n,r,o,!0),i=t.entity;return i?{valid:!0,originalMark:e,newMark:i}:t.marksValidationOutput&&t.marksValidationOutput.length?{valid:!1,originalMark:e,errorCode:t.marksValidationOutput[0].errorCode,message:t.marksValidationOutput[0].message}:{valid:!1,originalMark:e,errorCode:"INVALID_TYPE"}}return{valid:!1,originalMark:e,errorCode:"INVALID_CONTENT"}}):[]}(n,r,function(e){const{items:t}=e.props.marks;return t.length?Array.isArray(t[0])?t[0]:t:[]}(e),e)}}else a=function(e,t,n,r){const o=e.marks||[],i=o.map(e=>"unsupportedNodeAttribute"===e.type?e:De("REDUNDANT_MARKS",e,n));return i.length?(t.marks=i,{valid:!0,entity:t}):r("REDUNDANT_MARKS","redundant marks",{marks:Object.keys(o)})}(n,o,r,i);return a}}var $e=n("pZ4U"),Le=n("bcOB");n.d(t,"a",(function(){return Fe}));const ze=(e,t,n,r,o)=>{if(e&&"unsupportedNodeAttribute"===e.type)return e;if(n.isMark)return Ve(t.meta,"mark");if(n.isNodeAttribute){return{type:"unsupportedNodeAttribute",attrs:{type:{nodeType:e&&e.type?e.type:void 0},unsupported:t.meta}}}return e&&r.indexOf(e.type)>-1?void 0:"MISSING_PROPERTIES"===t.code&&"paragraph"===e.type?{type:"paragraph",content:[]}:"INVALID_CONTENT_LENGTH"===t.code?(o&&Be(o,t,e),e):n.allowUnsupportedBlock?Ve(e):n.allowUnsupportedInline?Ve(e,"inline"):(o&&Be(o,t,e),e)};function Be(e,t,n){e&&Object(Le.b)(e,$e.c.UNSUPPORTED_ERROR,n,t.code)}const Fe=(e,t,n)=>{const r=Object.keys(e.nodes),o=Object.keys(e.marks),i=Pe(r,o,{allowPrivateAttributes:!0}),s={type:"doc",content:[]},{entity:a=s}=i(t,((e,t)=>(n,r,o)=>ze(n,r,o,e,t))(o,n));return a};function Ve(e,t="block"){let n;switch(t){case"inline":n="unsupportedInline";break;case"mark":n="unsupportedMark";break;default:n="unsupportedBlock"}return{type:n,attrs:{originalValue:e}}}},Fazm:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));const r=(e,t,n)=>{const{from:r,to:o}=e;if(isNaN(r+o)||o-r<=0||o<0||r<0)return!1;let i=!1;return t.nodesBetween(e.from,e.to,(e,t,r)=>n.nodes.hardBreak!==e.type&&(!(e.isInline&&!e.isText||e.isLeaf&&!e.isText||e.isText&&!r.type.allowsMarkType(n.marks.annotation))||(i=!0,!1))),!i},o=(e,t,n)=>{const{from:r,to:o}=e;let i=new Set;return t.nodesBetween(r,o,e=>!e.marks||(e.marks.forEach(e=>{e.type===n.marks.annotation&&e.attrs&&i.add(e.attrs.id)}),!0)),Array.from(i)}},GoRf:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d}));const r="undefined"!=typeof window&&"performance"in window&&["measure","clearMeasures","clearMarks","getEntriesByName","getEntriesByType"].every(e=>!!performance[e]),o=(e,t)=>`${t}:${e}`,i=(e,t)=>`time-to-${t}:${e}`,s=e=>{if(r){performance.getEntriesByType("mark").filter(t=>t.name.includes(e)).forEach(e=>performance.clearMarks(e.name))}},a=e=>{if(r){performance.getEntriesByType("measure").filter(t=>t.name.includes(e)).forEach(e=>performance.clearMeasures(e.name))}},c=(e,t)=>{if(r){const n=o(e,t),r=performance.getEntriesByName(n);return r.length>0?r[0]:void 0}},l=(e,t)=>{if(r){const n=i(e,t),r=performance.getEntriesByName(n);return r.length>0?r[0]:void 0}},u=(e,t)=>{if(r){const n=o(e,t);performance.mark(n)}},d=(e,t)=>{if(r){const n=i(e,t);if(!l(e,t)){const r=c(e,"pending"),o=c(e,t);r&&o&&performance.measure(n,r.name,o.name)}}}},HL7A:function(e,t,n){"use strict";n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"j",(function(){return g}));var r=n("KsTJ"),o=n("qFXU"),i=n("qPpp"),s=n("akq8"),a=n("qWCz"),c=n("5lAk");const l=24,u=16,d=8,p=48,h=140,f=1,m=8,v={TABLE_CONTAINER:o.l+"-container",TABLE_NODE_WRAPPER:o.l+"-wrapper",TABLE_LEFT_SHADOW:o.l+"-with-left-shadow",TABLE_RIGHT_SHADOW:o.l+"-with-right-shadow",TABLE_STICKY_SHADOW:o.l+"-sticky-shadow",TABLE_STICKY_WRAPPER:o.l+"-sticky-wrapper",TABLE_CELL_NODEVIEW_CONTENT_DOM:o.g},g=r.css`
  .${v.TABLE_CONTAINER} {
    position: relative;
    margin: 0 auto ${u}px;
    box-sizing: border-box;

    /**
     * Fix block top alignment inside table cells.
     */
    .decisionItemView-content-wrap:first-child > div {
      margin-top: 0;
    }
  }
  .${v.TABLE_CONTAINER}[data-number-column='true'] {
    padding-left: ${i.R-1}px;
  }
  /* avoid applying styles to nested tables (possible via extensions) */
  .${v.TABLE_CONTAINER} > table,
  .${v.TABLE_NODE_WRAPPER} > table,
  .${v.TABLE_STICKY_WRAPPER} > table {
    border-collapse: collapse;
    margin: ${l}px ${d}px 0 0;
    border: ${f}px solid
      ${Object(a.a)({light:i.N,dark:i.O})};
    table-layout: fixed;
    font-size: 1em;
    width: 100%;

    &[data-autosize='true'] {
      table-layout: auto;
    }

    & {
      * {
        box-sizing: border-box;
      }
      hr {
        box-sizing: content-box;
      }

      tbody {
        border-bottom: none;
      }
      th td {
        background-color: white;
      }
      th,
      td {
        min-width: ${p}px;
        font-weight: normal;
        vertical-align: top;
        border: 1px solid
          ${Object(a.a)({light:i.N,dark:i.O})};
        border-right-width: 0;
        border-bottom-width: 0;
        padding: ${m}px;
        /* https://stackoverflow.com/questions/7517127/borders-not-shown-in-firefox-with-border-collapse-on-table-position-relative-o */
        ${c.a.gecko||c.a.ie?"background-clip: padding-box;":""}

        > *:first-child {
          margin-top: 0;
        }

        > .ProseMirror-gapcursor.-right:first-child + * {
          margin-top: 0;
        }

        > .ProseMirror-gapcursor:first-child + span + * {
          margin-top: 0;
        }

        th p:not(:first-of-type),
        td p:not(:first-of-type) {
          margin-top: 12px;
        }
      }
      th {
        background-color: ${Object(a.a)({light:i.S,dark:i.T})};
        text-align: left;

        /* only apply this styling to codeblocks in default background headercells */
        &:not([style]) {
          .code-block {
            /*
              Add a background color tint to code blocks inside a table heading since they both
              share the same background colour. This prevents them visually blending together.
            */
            background: ${Object(a.a)({light:s.N20A,dark:s.DN700A})};

            > span {
              /*
                The codeblock inside @atlaskit/code uses inline styles so we disable the default
                background color because editor/renderer provides it's own background colours.
              */
              background: transparent !important;
            }
          }
        }
      }
    }
  }
`,y=(e,t,n=!0)=>{switch(e){case"full-width":return t?Math.min(t-(n?i.d:0),i.q)+"px":i.q+"px";case"wide":return t?Math.min(t-(n?i.d:0),i.X)+"px":i.X+"px";default:return"inherit"}}},HSTp:function(e,t,n){"use strict";var r,o,i;r=n("UidE"),o=n("wxq6"),i=class{constructor(e){this.Events=new o(this),this._length=0,this._lists=function(){var t,n,o;for(o=[],t=1,n=e;1<=n?t<=n:t>=n;1<=n?++t:--t)o.push(new r(()=>this.incr(),()=>this.decr()));return o}.call(this)}incr(){if(0==this._length++)return this.Events.trigger("leftzero")}decr(){if(0==--this._length)return this.Events.trigger("zero")}push(e){return this._lists[e.options.priority].push(e)}queued(e){return null!=e?this._lists[e].length:this._length}shiftAll(e){return this._lists.forEach((function(t){return t.forEachShift(e)}))}getFirst(e=this._lists){var t,n,r;for(t=0,n=e.length;t<n;t++)if((r=e[t]).length>0)return r;return[]}shiftLastFrom(e){return this.getFirst(this._lists.slice(e).reverse()).shift()}},e.exports=i},Ig6J:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ERkP")),o=i(n("4KTy"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return r.default.createElement(o.default,s({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M13.485 11.929l2.122-2.121a1 1 0 0 0-1.415-1.415l-2.12 2.122L9.95 8.393a1 1 0 0 0-1.414 1.415l2.12 2.12-2.12 2.122a1 1 0 0 0 1.414 1.414l2.121-2.12 2.121 2.12a1 1 0 1 0 1.415-1.414l-2.122-2.121zM12 20a8 8 0 1 1 0-16 8 8 0 0 1 0 16z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EditorErrorIcon";var c=a;t.default=c},J64l:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s}));function r(e,t,n){return(t+24)/n*e-24}function o(e,t,n){return(e+24)*n/(t+24)}function i(e,t){return(t+24)*e-24}function s(e,t){return(e+24)/(t+24)}},Jg4X:function(e,t,n){"use strict";var r,o;r=n("s5AU"),o=class{constructor(e){this.status=e,this._jobs={},this.counts=this.status.map((function(){return 0}))}next(e){var t,n;return n=(t=this._jobs[e])+1,null!=t&&n<this.status.length?(this.counts[t]--,this.counts[n]++,this._jobs[e]++):null!=t?(this.counts[t]--,delete this._jobs[e]):void 0}start(e){return 0,this._jobs[e]=0,this.counts[0]++}remove(e){var t;return null!=(t=this._jobs[e])&&(this.counts[t]--,delete this._jobs[e]),null!=t}jobStatus(e){var t;return null!=(t=this.status[this._jobs[e]])?t:null}statusJobs(e){var t,n,o,i;if(null!=e){if((n=this.status.indexOf(e))<0)throw new r("status must be one of "+this.status.join(", "));for(t in i=[],o=this._jobs)o[t]===n&&i.push(t);return i}return Object.keys(this._jobs)}statusCounts(){return this.counts.reduce((e,t,n)=>(e[this.status[n]]=t,e),{})}},e.exports=o},"L21+":function(e,t,n){"use strict";n.r(t),n.d(t,"headingSizes",(function(){return g})),n.d(t,"h900",(function(){return y})),n.d(t,"h800",(function(){return b})),n.d(t,"h700",(function(){return w})),n.d(t,"h600",(function(){return _})),n.d(t,"h500",(function(){return k})),n.d(t,"h400",(function(){return S})),n.d(t,"h300",(function(){return O})),n.d(t,"h200",(function(){return x})),n.d(t,"h100",(function(){return C}));var r,o,i,s,a,c,l,u,d,p=n("D57K"),h=n("KsTJ"),f=n("akq8"),m=n("vVzW"),v=function(e,t){return"\n  font-size: "+e/Object(m.e)()+"em;\n  font-style: inherit;\n  line-height: "+t/e+";\n"},g={h900:{size:35,lineHeight:40},h800:{size:29,lineHeight:32},h700:{size:24,lineHeight:28},h600:{size:20,lineHeight:24},h500:{size:16,lineHeight:20},h400:{size:14,lineHeight:16},h300:{size:12,lineHeight:16},h200:{size:12,lineHeight:16},h100:{size:11,lineHeight:16}},y=function(){return Object(h.css)(r||(r=Object(p.__makeTemplateObject)(["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"])),v(g.h900.size,g.h900.lineHeight),f.heading,6.5*Object(m.g)())},b=function(){return Object(h.css)(o||(o=Object(p.__makeTemplateObject)(["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"])),v(g.h800.size,g.h800.lineHeight),f.heading,5*Object(m.g)())},w=function(){return Object(h.css)(i||(i=Object(p.__makeTemplateObject)(["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"])),v(g.h700.size,g.h700.lineHeight),f.heading,5*Object(m.g)())},_=function(){return Object(h.css)(s||(s=Object(p.__makeTemplateObject)(["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.008em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.008em;\n  margin-top: ","px;\n"])),v(g.h600.size,g.h600.lineHeight),f.heading,3.5*Object(m.g)())},k=function(){return Object(h.css)(a||(a=Object(p.__makeTemplateObject)(["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.006em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.006em;\n  margin-top: ","px;\n"])),v(g.h500.size,g.h500.lineHeight),f.heading,3*Object(m.g)())},S=function(){return Object(h.css)(c||(c=Object(p.__makeTemplateObject)(["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.003em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.003em;\n  margin-top: ","px;\n"])),v(g.h400.size,g.h400.lineHeight),f.heading,2*Object(m.g)())},O=function(){return Object(h.css)(l||(l=Object(p.__makeTemplateObject)(["\n  ","\n  color: ",";\n  font-weight: 600;\n  margin-top: ","px;\n  text-transform: uppercase;\n"],["\n  ","\n  color: ",";\n  font-weight: 600;\n  margin-top: ","px;\n  text-transform: uppercase;\n"])),v(g.h300.size,g.h300.lineHeight),f.heading,2.5*Object(m.g)())},x=function(){return Object(h.css)(u||(u=Object(p.__makeTemplateObject)(["\n  ","\n  color: ",";\n  font-weight: 600;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 600;\n  margin-top: ","px;\n"])),v(g.h200.size,g.h200.lineHeight),f.subtleHeading,2*Object(m.g)())},C=function(){return Object(h.css)(d||(d=Object(p.__makeTemplateObject)(["\n  ","\n  color: ",";\n  font-weight: 700;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 700;\n  margin-top: ","px;\n"])),v(g.h100.size,g.h100.lineHeight),f.subtleHeading,2*Object(m.g)())}},MhaC:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("KsTJ"),o=n("qPpp"),i=n("RFyg");function s(e,t,n=0,r,s){switch(e){case"align-start":case"align-end":case"wrap-right":case"wrap-left":return t>n/2?"calc(50% - 12px)":t+"px";case"wide":return Object(i.d)(n);case"full-width":return Object(i.c)(e,n);default:return s?t+"px":r?function(e){return e>o.q?"100%":e+"px"}(t):function(e){return e>o.p?"100%":e+"px"}(t)}}const a=({containerWidth:e=0,fullWidthMode:t,isResized:n,layout:o,pctWidth:a,width:c})=>r.css`
  tr & {
    max-width: 100%;
  }
  width: ${a?function(e,t,n=0){switch(e){case"wide":return Object(i.d)(n);case"full-width":return Object(i.c)(e,n);default:return t+"px"}}(o,c||0,e):s(o,c||0,e,t,n)};
  max-width: ${function(e,t){switch(e){case"wide":return Object(i.d)(t);case"full-width":return Object(i.c)(e,t);default:return"100%"}}(o,e)};
  float: ${function(e){switch(e){case"wrap-right":return"right";case"wrap-left":return"left";default:return"none"}}(o)};
  margin: ${function(e){switch(e){case"wrap-right":return"12px auto 12px 12px";case"wrap-left":return"12px 12px 12px auto";default:return"24px auto"}}(o)};
  ${function(e){switch(e){case"align-end":return"margin-right: 0";case"align-start":return"margin-left: 0";default:return""}}(o)};

  &:not(.is-resizing) {
    transition: width 100ms ease-in;
  }
`,c=r.default.div`
  position: relative;

  ${({hasFallbackContainer:e,ratio:t})=>r.css`
  ${e?`\n  &::after {\n    content: '';\n    display: block;\n    padding-bottom: ${t}%;\n\n    /* Fixes extra padding problem in Firefox */\n    font-size: 0;\n    line-height: 0;\n  }\n  `:""}
`}

  /* Editor */
  & > figure {
    position: ${({hasFallbackContainer:e})=>e?"absolute":"relative"};
    height: 100%;
    width: 100%;
  }

  & > div {
    position: ${({hasFallbackContainer:e})=>e?"absolute":"relative"};
    height: 100%;
    width: 100%;
  }

  &[data-node-type='embedCard'] > div {
    width: 100%;
  }

  /* Renderer */
  [data-node-type='media'] {
    position: static !important;

    > div {
      position: absolute;
      height: 100%;
    }
  }
`,l=r.default.div`
  ${a};
`;c.displayName="WrapperMediaSingle"},O8ZN:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,o=n("5POW");function i(e,t){if(!e)return null;const n=e.firstChild;if(!n)return null;switch(n.type.name){case"heading":case"paragraph":return i(n,t);case"inlineCard":{const e=n.attrs,o=t.getInlineCardTextFromStore(e);if(o)return{type:r.LINK,value:o};const i=e.url;return{type:r.LINK,value:i||""}}case"text":{if(function(e){const[t]=e.marks.filter(e=>"link"===e.type.name);return t||null}(n)){const e=n.text||"";return{type:r.LINK,value:e}}const e=n.text||"",t=e.indexOf(" "),o=-1!==t?e.substring(0,t):e,i=Number.parseFloat(o);return Number.isNaN(i)?{type:r.TEXT,value:o}:{type:r.NUMBER,value:i}}case"status":{const e=n.attrs.text;return{type:r.STATUS,value:e}}case"date":{const e=Number.parseInt(n.attrs.timestamp,20);return{type:r.DATE,value:e}}case"mention":{const e=n.attrs.text||"";return{type:r.MENTION,value:e.toLowerCase()}}default:return null}}!function(e){e[e.NUMBER=0]="NUMBER",e[e.TEXT=5]="TEXT",e[e.MENTION=10]="MENTION",e[e.DATE=15]="DATE",e[e.STATUS=20]="STATUS",e[e.LINK=25]="LINK"}(r||(r={}));const s=(e,t=o.a.ASC)=>(n,r)=>{const s=i(n,e),c=i(r,e);return null===s||null===c?a(s,c):(t===o.a.DESC?-1:1)*a(s,c)};function a(e,t){return e===t?0:null===e||null===t?null===t?-1:1:e.type!==t.type?e.type>t.type?1:-1:(n=e.value,r=t.value,n===r?0:n>r?1:-1);var n,r}},Ow5E:function(e,t,n){"use strict";t.load=function(e,t,n={}){var r,o,i;for(r in t)i=t[r],n[r]=null!=(o=e[r])?o:i;return n},t.overwrite=function(e,t,n={}){var r,o;for(r in e)o=e[r],void 0!==t[r]&&(n[r]=o);return n}},RFyg:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("qPpp"),o=n("3yjy"),i=n("u55h");const s=o.b,a=i.c,c={padding:r.d,defaultLayoutWidth:r.g,wideScaleRatio:r.bb,fullWidthLayoutWidth:r.q,wideLayoutWidth:r.X},l=(e,t)=>{const n=t-c.padding;switch(e){case"full-width":return Math.min(n,c.fullWidthLayoutWidth)+"px";case"wide":return u(t);default:return"100%"}},u=(e=c.defaultLayoutWidth,t=1/0,n="100%")=>{const r=e-c.padding,o=s(a(e)),i=Math.min(Math.ceil(o*c.wideScaleRatio),r);return o>i?n:Math.min(t,i)+"px"},d=(e,t)=>{const n=l(e,t);if(n.endsWith("%"))switch(e){case"full-width":return r.q;case"wide":return r.X;default:return s(a(t))}return parseInt(n,10)}},Rqxe:function(e,t,n){"use strict";class r extends Error{constructor(e,t){super(e),this.message=e,this.type=t,this.name="AuthError",this.type=t,this.message=e}}function o(e){return new Promise((t,n)=>{let o,i=null;const s=e=>{if(e.source!==i)return;const{data:o}=e;if("object"==typeof o)switch(o.type){case"outbound-auth:success":c(),t();break;case"outbound-auth:failure":c();const e=o.errorType.toLowerCase();["auth_window_closed","invalid_request","unauthorized_client","access_denied","unsupported_response_type","invalid_scope","server_error","temporarily_unavailable"].includes(e)?n(new r(o.message,e)):n(new r(o.message))}},a=()=>{i&&i.closed&&(c(),n(new r("The auth window was closed","auth_window_closed")))},c=()=>{clearInterval(o),window.removeEventListener("message",s),i&&(i.close(),i=null)};window.addEventListener("message",s),i=window.open(e,e),o=window.setInterval(a,500)})}n.d(t,"a",(function(){return o}))},T6cy:function(e,t,n){"use strict";var r=n("ERkP"),o=n.n(r),i=n("L21V"),s=n("KsTJ"),a=n("o0fs"),c=n.n(a),l=n("akq8"),u=n("vVzW"),d=n("a8dO"),p=n("gxg8"),h=n("biJf");const f=s.default.span`
  align-items: center;
  background: ${l.N30};
  border: 1px dashed ${l.N50};
  border-radius: ${Object(u.c)()}px;
  box-sizing: border-box;
  cursor: default;
  display: inline-flex;
  font-size: ${Object(u.e)()}px;
  margin: 0 2px;
  min-height: 24px;
  padding: 0 10px;
  user-select: all;
  vertical-align: middle;
  white-space: nowrap;

  &.ProseMirror-selectednode {
    background: ${l.N50};
    outline: none;
  }
`;t.a=Object(i.h)(({node:e,intl:t})=>{const n=Object(h.a)(p.a.unsupportedInlineContent,"Unsupported",e,t),i=t.formatMessage(p.a.unsupportedContentTooltip),{current:s}=Object(r.useRef)({padding:"4px"});return o.a.createElement(f,null,n,o.a.createElement(d.a,{content:i,hideTooltipOnClick:!1,position:"bottom"},o.a.createElement("span",{style:s},o.a.createElement(c.a,{label:"?",size:"small"}))))})},TZT4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("KsTJ"),o=n("qPpp"),i=n("akq8");const s=r.css`
  & hr {
    border: none;
    background-color: ${i.N30A};
    margin: ${o.t}em 0;
    height: 2px;
    border-radius: 1px;
  }
`},TcjM:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("ERkP"),o=n.n(r),i=n("fuoD");function s(e={}){const t=o.a.useRef(),n=o.a.useRef(),[r,s]=o.a.useState({inView:!1,entry:void 0,target:void 0}),{threshold:a,root:c,rootMargin:l}=e,u=o.a.useCallback(e=>{const{supportsIntersectionObserver:r}=i.a;if(!r)return s({inView:!0,entry:void 0,target:e}),null;n.current=new IntersectionObserver(t=>{if(t&&t.length){const n=t[0],{isIntersecting:r,intersectionRatio:o}=n;if(o>=0){let t=o>=(a||0);void 0!==r&&(t=t&&r),s({inView:t,entry:n,target:e})}}},{threshold:a,root:c,rootMargin:l}),t.current&&n.current.unobserve(t.current),e&&n.current.observe(e),t.current=e},[a,c,l]);return o.a.useEffect(()=>()=>{n.current&&t.current&&n.current.unobserve(t.current)},[]),[u,r.inView,r.target,r.entry]}},TdYm:function(e,t,n){"use strict";var r,o,i;o=n("DIDd"),r={refs:o["refs.lua"],validate_keys:o["validate_keys.lua"],validate_client:o["validate_client.lua"],refresh_expiration:o["refresh_expiration.lua"],process_tick:o["process_tick.lua"],conditions_check:o["conditions_check.lua"],get_time:o["get_time.lua"]},t.allKeys=function(e){return[`b_${e}_settings`,`b_${e}_job_weights`,`b_${e}_job_expirations`,`b_${e}_job_clients`,`b_${e}_client_running`,`b_${e}_client_num_queued`,`b_${e}_client_last_registered`,`b_${e}_client_last_seen`]},i={init:{keys:t.allKeys,headers:["process_tick"],refresh_expiration:!0,code:o["init.lua"]},group_check:{keys:t.allKeys,headers:[],refresh_expiration:!1,code:o["group_check.lua"]},register_client:{keys:t.allKeys,headers:["validate_keys"],refresh_expiration:!1,code:o["register_client.lua"]},blacklist_client:{keys:t.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:o["blacklist_client.lua"]},heartbeat:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:o["heartbeat.lua"]},update_settings:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:o["update_settings.lua"]},running:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:o["running.lua"]},queued:{keys:t.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:o["queued.lua"]},done:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:o["done.lua"]},check:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!1,code:o["check.lua"]},submit:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:o["submit.lua"]},register:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:o["register.lua"]},free:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:o["free.lua"]},current_reservoir:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:o["current_reservoir.lua"]},increment_reservoir:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:o["increment_reservoir.lua"]}},t.names=Object.keys(i),t.keys=function(e,t){return i[e].keys(t)},t.payload=function(e){var t;return t=i[e],Array.prototype.concat(r.refs,t.headers.map((function(e){return r[e]})),t.refresh_expiration?r.refresh_expiration:"",t.code).join("\n")}},Tgh5:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=n("KsTJ").css`
  .fabric-editor-indentation-mark {
    &[data-level='1'] {
      margin-left: 30px;
    }
    &[data-level='2'] {
      margin-left: 60px;
    }
    &[data-level='3'] {
      margin-left: 90px;
    }
    &[data-level='4'] {
      margin-left: 120px;
    }
    &[data-level='5'] {
      margin-left: 150px;
    }
    &[data-level='6'] {
      margin-left: 180px;
    }
  }
`},UBtQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var r=n("KsTJ"),o=n("qPpp");const i={DECISION_CONTAINER:"decisionItemView-content-wrap"},s=r.css`
  .ProseMirror {
    .taskItemView-content-wrap,
    .${i.DECISION_CONTAINER} {
      position: relative;
      min-width: ${o.P}px;
    }

    .${i.DECISION_CONTAINER} {
      margin-top: 0;
    }
  }

  div[data-task-list-local-id] {
    margin: 12px 0 0 0;
  }

  div[data-task-list-local-id]:first-child {
    margin-top: 0;
  }

  div[data-task-list-local-id] div[data-task-list-local-id] {
    margin-top: 0px;
    margin-left: 24px;
  }
`},UNbK:function(e){e.exports=JSON.parse('{"a":"@atlaskit/smart-card","b":"14.4.0"}')},UdmJ:function(e,t,n){"use strict";n.r(t),n.d(t,"AddMarkStep",(function(){return A})),n.d(t,"MapResult",(function(){return s})),n.d(t,"Mapping",(function(){return c})),n.d(t,"RemoveMarkStep",(function(){return R})),n.d(t,"ReplaceAroundStep",(function(){return g})),n.d(t,"ReplaceStep",(function(){return v})),n.d(t,"Step",(function(){return f})),n.d(t,"StepMap",(function(){return a})),n.d(t,"StepResult",(function(){return m})),n.d(t,"Transform",(function(){return u})),n.d(t,"TransformError",(function(){return l})),n.d(t,"canJoin",(function(){return O})),n.d(t,"canSplit",(function(){return S})),n.d(t,"dropPoint",(function(){return T})),n.d(t,"findWrapping",(function(){return _})),n.d(t,"insertPoint",(function(){return E})),n.d(t,"joinPoint",(function(){return C})),n.d(t,"liftTarget",(function(){return w})),n.d(t,"replaceStep",(function(){return M}));var r=n("I9T1"),o=Math.pow(2,16);function i(e){return 65535&e}var s=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},a=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};a.prototype.recover=function(e){var t=0,n=i(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/o}(e)},a.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},a.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},a.prototype._map=function(e,t,n){for(var r=0,i=this.inverted?2:1,a=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var l=this.ranges[c]-(this.inverted?r:0);if(l>e)break;var u=this.ranges[c+i],d=this.ranges[c+a],p=l+u;if(e<=p){var h=l+r+((u?e==l?-1:e==p?1:t:t)<0?0:d);if(n)return h;var f=e==(t<0?l:p)?null:c/3+(e-l)*o;return new s(h,t<0?e!=l:e!=p,f)}r+=d-u}return n?e+r:new s(e+r)},a.prototype.touches=function(e,t){for(var n=0,r=i(t),o=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>e)break;var l=this.ranges[a+o];if(e<=c+l&&a==3*r)return!0;n+=this.ranges[a+s]-l}return!1},a.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+t],l=this.ranges[r+n];e(s,s+c,a,a+l),o+=l-c}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(e){return 0==e?a.empty:new a(e<0?[0,-e,0]:[0,0,e])},a.empty=new a([]);var c=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function l(e){var t=Error.call(this,e);return t.__proto__=l.prototype,t}c.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new c(this.maps,this.mirror,e,t)},c.prototype.copy=function(){return new c(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},c.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},c.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},c.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},c.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},c.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},c.prototype.invert=function(){var e=new c;return e.appendMappingInverted(this),e},c.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},c.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},c.prototype._map=function(e,t,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(e,t);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,e=this.maps[a].recover(i.recover);continue}}i.deleted&&(r=!0),e=i.pos}return n?e:new s(e,r)},l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="TransformError";var u=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new c},d={before:{configurable:!0},docChanged:{configurable:!0}};function p(){throw new Error("Override me")}d.before.get=function(){return this.docs.length?this.docs[0]:this.doc},u.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new l(t.failed);return this},u.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},d.docChanged.get=function(){return this.steps.length>0},u.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(u.prototype,d);var h=Object.create(null),f=function(){};f.prototype.apply=function(e){return p()},f.prototype.getMap=function(){return a.empty},f.prototype.invert=function(e){return p()},f.prototype.map=function(e){return p()},f.prototype.merge=function(e){return null},f.prototype.toJSON=function(){return p()},f.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=h[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},f.jsonID=function(e,t){if(e in h)throw new RangeError("Duplicate use of step JSON ID "+e);return h[e]=t,t.prototype.jsonID=e,t};var m=function(e,t){this.doc=e,this.failed=t};m.ok=function(e){return new m(e,null)},m.fail=function(e){return new m(null,e)},m.fromReplace=function(e,t,n,o){try{return m.ok(e.replace(t,n,o))}catch(i){if(i instanceof r.ReplaceError)return m.fail(i.message);throw i}};var v=function(e){function t(t,n,r,o){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&y(e,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var o=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),o,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,r.Slice.fromJSON(e,n.slice),!!n.structure)},t}(f);f.jsonID("replace",v);var g=function(e){function t(t,n,r,o,i,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(y(e,this.from,this.gapFrom)||y(e,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return m.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?m.fromReplace(e,this.from,this.to,n):m.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(f);function y(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function b(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function w(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!b(r,o,i))break}}function _(e,t,n,r){void 0===r&&(r=e);var o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,c=r;a&&c<o;c++)a=a.matchType(n.child(c).type);if(!a||!a.validEnd)return null;return s}(r,t);return i?o.map(k).concat({type:t,attrs:n}).concat(i.map(k)):null}function k(e){return{type:e,attrs:null}}function S(e,t,n,r){void 0===n&&(n=1);var o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var l=o.node(a),u=o.index(a);if(l.type.spec.isolating)return!1;var d=l.content.cutByIndex(u,l.childCount),p=r&&r[c]||l;if(p!=l&&(d=d.replaceChild(0,p.type.create(p.attrs))),!l.canReplace(u+1,l.childCount)||!p.type.validContent(d))return!1}var h=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(h,h,f?f.type:o.node(i+1).type)}function O(e,t){var n=e.resolve(t),r=n.index();return x(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function x(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function C(e,t,n){void 0===n&&(n=-1);for(var r=e.resolve(t),o=r.depth;;o--){var i=void 0,s=void 0,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&x(i,s)&&r.node(o).canReplace(a,a+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}}function E(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function T(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(l,l,o):r.node(a).contentMatchAt(l).findWrapping(o.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function N(e,t,n){for(var o=[],i=0;i<e.childCount;i++){var s=e.child(i);s.content.size&&(s=s.copy(N(s.content,t,s))),s.isInline&&(s=t(s,n,i)),o.push(s)}return r.Fragment.fromArray(o)}f.jsonID("replaceAround",g),u.prototype.lift=function(e,t){for(var n=e.$from,o=e.$to,i=e.depth,s=n.before(i+1),a=o.after(i+1),c=s,l=a,u=r.Fragment.empty,d=0,p=i,h=!1;p>t;p--)h||n.index(p)>0?(h=!0,u=r.Fragment.from(n.node(p).copy(u)),d++):c--;for(var f=r.Fragment.empty,m=0,v=i,y=!1;v>t;v--)y||o.after(v+1)<o.end(v)?(y=!0,f=r.Fragment.from(o.node(v).copy(f)),m++):l++;return this.step(new g(c,l,s,a,new r.Slice(u.append(f),d,m),u.size-d,!0))},u.prototype.wrap=function(e,t){for(var n=r.Fragment.empty,o=t.length-1;o>=0;o--)n=r.Fragment.from(t[o].type.create(t[o].attrs,n));var i=e.start,s=e.end;return this.step(new g(i,s,i,s,new r.Slice(n,0,0),t.length,!0))},u.prototype.setBlockType=function(e,t,n,o){var i=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,o)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(i.doc,i.mapping.slice(s).map(t),n)){i.clearIncompatible(i.mapping.slice(s).map(t,1),n);var a=i.mapping.slice(s),c=a.map(t,1),l=a.map(t+e.nodeSize,1);return i.step(new g(c,l,c+1,l-1,new r.Slice(r.Fragment.from(n.create(o,null,e.marks)),0,0),1,!0)),!1}})),this},u.prototype.setNodeMarkup=function(e,t,n,o){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var s=t.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,s);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new g(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new r.Slice(r.Fragment.from(s),0,0),1,!0))},u.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var o=this.doc.resolve(e),i=r.Fragment.empty,s=r.Fragment.empty,a=o.depth,c=o.depth-t,l=t-1;a>c;a--,l--){i=r.Fragment.from(o.node(a).copy(i));var u=n&&n[l];s=r.Fragment.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}return this.step(new v(e,e,new r.Slice(i.append(s),t,t),!0))},u.prototype.join=function(e,t){void 0===t&&(t=1);var n=new v(e-t,e+t,r.Slice.empty,!0);return this.step(n)};var A=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),o=e.resolve(this.from),i=o.node(o.sharedDepth(this.to)),s=new r.Slice(N(n.content,(function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),i),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,s)},t.prototype.invert=function(){return new R(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);f.jsonID("addMark",A);var R=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),o=new r.Slice(N(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new A(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);function M(e,t,n,o){if(void 0===n&&(n=t),void 0===o&&(o=r.Slice.empty),t==n&&!o.size)return null;var i=e.resolve(t),s=e.resolve(n);return I(i,s,o)?new v(t,n,o):new j(i,s,o).fit()}function I(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}f.jsonID("removeMark",R),u.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var d=Math.max(c,e),p=Math.min(c+r.nodeSize,t),h=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(h)||(s&&s.to==d&&s.mark.eq(u[f])?s.to=p:o.push(s=new R(d,p,u[f])));a&&a.to==d?a.to=p:i.push(a=new A(d,p,n))}}})),o.forEach((function(e){return r.step(e)})),i.forEach((function(e){return r.step(e)})),this},u.prototype.removeMark=function(e,t,n){var o=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(e,t,(function(o,a){if(o.isInline){s++;var c=null;if(n instanceof r.MarkType){var l=n.isInSet(o.marks);l&&(c=[l])}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length)for(var u=Math.min(a+o.nodeSize,t),d=0;d<c.length;d++){for(var p=c[d],h=void 0,f=0;f<i.length;f++){var m=i[f];m.step==s-1&&p.eq(i[f].style)&&(h=m)}h?(h.to=u,h.step=s):i.push({style:p,from:Math.max(a,e),to:u,step:s})}}})),i.forEach((function(e){return o.step(new R(e.from,e.to,e.style))})),this},u.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var o=this.doc.nodeAt(e),i=[],s=e+1,a=0;a<o.childCount;a++){var c=o.child(a),l=s+c.nodeSize,u=n.matchType(c.type,c.attrs);if(u){n=u;for(var d=0;d<c.marks.length;d++)t.allowsMarkType(c.marks[d].type)||this.step(new R(s,l,c.marks[d]))}else i.push(new v(s,l,r.Slice.empty));s=l}if(!n.validEnd){var p=n.fillBefore(r.Fragment.empty,!0);this.replace(s,s,new r.Slice(p,0,0))}for(var h=i.length-1;h>=0;h--)this.step(i[h]);return this},u.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=r.Slice.empty);var o=M(this.doc,e,t,n);return o&&this.step(o),this},u.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new r.Slice(r.Fragment.from(n),0,0))},u.prototype.delete=function(e,t){return this.replace(e,t,r.Slice.empty)},u.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var j=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var o=0;o<=e.depth;o++){var i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}this.placed=r.Fragment.empty;for(var s=e.depth;s>0;s--)this.placed=r.Fragment.from(e.node(s).copy(this.placed))},D={depth:{configurable:!0}};function P(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(P(e.firstChild.content,t-1,n)))}function $(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy($(e.lastChild.content,t-1,n)))}function L(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function z(e,t,n){if(t<=0)return e;var o=e.content;return t>1&&(o=o.replaceChild(0,z(o.firstChild,t-1,1==o.childCount?n-1:0))),t>0&&(o=e.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(e.type.contentMatch.matchFragment(o).fillBefore(r.Fragment.empty,!0)))),e.copy(o)}function B(e,t,n,r,o){var i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function F(e,t,n,o,i){if(t<n){var s=e.firstChild;e=e.replaceChild(0,s.copy(F(s.content,t+1,n,o,s)))}if(t>o){var a=i.contentMatchAt(0),c=a.fillBefore(e).append(e);e=c.append(a.matchFragment(c).fillBefore(r.Fragment.empty,!0))}return e}function V(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;o==t.start(r)&&n.push(r)}return n}D.depth.get=function(){return this.frontier.length-1},j.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(t<0?this.$to:o.doc.resolve(t));if(!i)return null;for(var s=this.placed,a=o.depth,c=i.depth;a&&c&&1==s.childCount;)s=s.firstChild.content,a--,c--;var l=new r.Slice(s,a,c);return t>-1?new g(o.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||o.pos!=this.$to.pos?new v(o.pos,i.pos,l):void 0},j.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,o=(t?(n=L(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var s=this.frontier[i],a=s.type,c=s.match,l=void 0,u=void 0;if(1==e&&(o?c.matchType(o.type)||(u=c.fillBefore(r.Fragment.from(o),!1)):a.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:i,parent:n,inject:u};if(2==e&&o&&(l=c.findWrapping(o.type)))return{sliceDepth:t,frontierDepth:i,parent:n,wrap:l};if(n&&c.matchType(n.type))break}},j.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,o=e.openEnd,i=L(t,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.Slice(t,n+1,Math.max(o,i.size+n>=t.size-o?n+1:0)),!0)},j.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,o=e.openEnd,i=L(t,n);if(i.childCount<=1&&n>0){var s=t.size-n<=n+i.size;this.unplaced=new r.Slice(P(t,n-1,1),n-1,s?n-1:o)}else this.unplaced=new r.Slice(P(t,n,1),n,o)},j.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,o=e.parent,i=e.inject,s=e.wrap;this.depth>n;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,l=o?o.content:c.content,u=c.openStart-t,d=0,p=[],h=this.frontier[n],f=h.match,m=h.type;if(i){for(var v=0;v<i.childCount;v++)p.push(i.child(v));f=f.matchFragment(i)}for(var g=l.size+t-(c.content.size-c.openEnd);d<l.childCount;){var y=l.child(d),b=f.matchType(y.type);if(!b)break;(++d>1||0==u||y.content.size)&&(f=b,p.push(z(y.mark(m.allowedMarks(y.marks)),1==d?u:0,d==l.childCount?g:-1)))}var w=d==l.childCount;w||(g=-1),this.placed=$(this.placed,n,r.Fragment.from(p)),this.frontier[n].match=f,w&&g<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var _=0,k=l;_<g;_++){var S=k.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),k=S.content}this.unplaced=w?0==t?r.Slice.empty:new r.Slice(P(c.content,t-1,1),t-1,g<0?c.openEnd:t-1):new r.Slice(P(c.content,t,d),c.openStart,c.openEnd)},j.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!B(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},j.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=B(e,t,o,r,i);if(s){for(var a=t-1;a>=0;a--){var c=this.frontier[a],l=c.match,u=B(e,a,c.type,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}},j.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=$(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e},j.prototype.openFrontierNode=function(e,t,n){var o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=$(this.placed,this.depth,r.Fragment.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},j.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(r.Fragment.empty,!0);e.childCount&&(this.placed=$(this.placed,this.frontier.length,e))},Object.defineProperties(j.prototype,D),u.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var o=this.doc.resolve(e),i=this.doc.resolve(t);if(I(o,i,n))return this.step(new v(e,t,n));var s=V(o,this.doc.resolve(t));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var c=o.depth,l=o.pos-1;c>0;c--,l--){var u=o.node(c).type.spec;if(u.defining||u.isolating)break;s.indexOf(c)>-1?a=c:o.before(c)==l&&s.splice(1,0,-c)}for(var d=s.indexOf(a),p=[],h=n.openStart,f=n.content,m=0;;m++){var g=f.firstChild;if(p.push(g),m==n.openStart)break;f=g.content}h>0&&p[h-1].type.spec.defining&&o.node(d).type!=p[h-1].type?h-=1:h>=2&&p[h-1].isTextblock&&p[h-2].type.spec.defining&&o.node(d).type!=p[h-2].type&&(h-=2);for(var y=n.openStart;y>=0;y--){var b=(y+h+1)%(n.openStart+1),w=p[b];if(w)for(var _=0;_<s.length;_++){var k=s[(_+d)%s.length],S=!0;k<0&&(S=!1,k=-k);var O=o.node(k-1),x=o.index(k-1);if(O.canReplaceWith(x,x,w.type,w.marks))return this.replace(o.before(k),S?i.after(k):t,new r.Slice(F(n.content,0,n.openStart,b),b,n.openEnd))}}for(var C=this.steps.length,E=s.length-1;E>=0&&(this.replace(e,t,n),!(this.steps.length>C));E--){var T=s[E];E<0||(e=o.before(T),t=i.after(T))}return this},u.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var o=E(this.doc,e,n.type);null!=o&&(e=t=o)}return this.replaceRange(e,t,new r.Slice(r.Fragment.from(n),0,0))},u.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=V(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)}},UidE:function(e,t,n){"use strict";var r;r=class{constructor(e,t){this.incr=e,this.decr=t,this._first=null,this._last=null,this.length=0}push(e){var t;this.length++,"function"==typeof this.incr&&this.incr(),t={value:e,prev:this._last,next:null},null!=this._last?(this._last.next=t,this._last=t):this._first=this._last=t}shift(){var e;if(null!=this._first)return this.length--,"function"==typeof this.decr&&this.decr(),e=this._first.value,null!=(this._first=this._first.next)?this._first.prev=null:this._last=null,e}first(){if(null!=this._first)return this._first.value}getArray(){var e,t,n;for(e=this._first,n=[];null!=e;)n.push((t=e,e=e.next,t.value));return n}forEachShift(e){var t;for(t=this.shift();null!=t;)e(t),t=this.shift()}debug(){var e,t,n,r,o;for(e=this._first,o=[];null!=e;)o.push((t=e,e=e.next,{value:t.value,prev:null!=(n=t.prev)?n.value:void 0,next:null!=(r=t.next)?r.value:void 0}));return o}},e.exports=r},X7lI:function(e,t,n){"use strict";function r(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,c,"next",e)}function c(e){r(s,o,i,a,c,"throw",e)}a(void 0)}))}}var i,s;i=n("UidE"),s=class{constructor(e,t){this.schedule=this.schedule.bind(this),this.name=e,this.Promise=t,this._running=0,this._queue=new i}isEmpty(){return 0===this._queue.length}_tryToRun(){var e=this;return o((function*(){var t,n,r,i,s,a,c;if(e._running<1&&e._queue.length>0){e._running++;var l=e._queue.shift();return c=l.task,t=l.args,s=l.resolve,i=l.reject,n=yield o((function*(){try{return a=yield c(...t),function(){return s(a)}}catch(e){return r=e,function(){return i(r)}}}))(),e._running--,e._tryToRun(),n()}}))()}schedule(e,...t){var n,r,o;return o=r=null,n=new this.Promise((function(e,t){return o=e,r=t})),this._queue.push({task:e,args:t,resolve:o,reject:r}),this._tryToRun(),n}},e.exports=s},YFqM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ERkP")),o=i(n("4KTy"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return r.default.createElement(o.default,s({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M8 4h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zm1.5 4a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-5zm0 4a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-3z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EditorNoteIcon";var c=a;t.default=c},Z08a:function(e,t){function n(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),n=this._timeouts.shift()}var r=this,o=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),n);return this._options.unref&&o.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var o=this._errors[r],i=o.message,s=(e[i]||0)+1;e[i]=s,s>=n&&(t=o,n=s)}return t}},Z8D1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("KsTJ");const o={DATE_WRAPPER:"date-lozenger-container",DATE_CONTAINER:"dateView-content-wrap"},i=r.css`
  .${o.DATE_WRAPPER} span {
    white-space: unset;
  }
`},Zvw0:function(e,t,n){"use strict";e.exports=n("E1Qm")},a22k:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return w}));var r=n("ERkP"),o=n.n(r),i=n("TcjM"),s=n("fuoD");const a=()=>()=>{},{Consumer:c,Provider:l}=o.a.createContext({subscribe:null});function u(e){const{onResize:t}=e,n=Object(r.useRef)(null);return Object(r.useEffect)(()=>{if(!n||!n.current)return;const{current:e}=n;if(!e.contentDocument||!e.contentDocument.defaultView)return;const r=e.contentDocument.defaultView;return r.addEventListener("resize",t),()=>{r.removeEventListener("resize",t)}},[n,t]),o.a.createElement("object",{ref:n,data:"about:blank",type:"text/html",style:{position:"absolute",height:"0",width:"100%"},"aria-hidden":!0,tabIndex:-1})}function d(e){const{onResize:t}=e,n=Object(r.useRef)(null),i=o.a.useCallback(()=>{if(!n||!n.current)return;const{current:e}=n;if(!e.contentDocument||!e.contentDocument.defaultView)return;e.contentDocument.defaultView.addEventListener("resize",t)},[t]);return o.a.createElement("iframe",{ref:n,src:"about:blank",frameBorder:"0",style:{position:"absolute",height:"0",width:"100%"},onLoad:i,"aria-hidden":!0,tabIndex:-1})}function p(e){return 11===Object(s.b)()?o.a.createElement(d,Object.assign({},e)):o.a.createElement(u,Object.assign({},e))}const h=({children:e})=>o.a.createElement("div",{style:{position:"absolute",height:"0",width:"100%"}},e),f=()=>()=>{},m=o.a.memo(({subscribe:e,setWidth:t})=>{const n=o.a.useRef(null);return Object(r.useEffect)(()=>{if(n&&n.current){const{current:e}=n,r=e.offsetWidth;t(r)}return e(()=>{if(n&&n.current){const{current:e}=n,r=e.offsetWidth;t(r)}})},[n,e,t]),o.a.createElement("div",{ref:n})}),v=o.a.memo(({subscribe:e,setWidth:t})=>{const[n,s,a,c]=Object(i.a)({threshold:0});return Object(r.useEffect)(()=>{if(s&&c&&c.target instanceof HTMLElement){const{boundingClientRect:e}=c,n=e.width;t(n)}return e(()=>{if(s&&a instanceof HTMLElement){const e=a.offsetWidth;t(e)}})},[s,c,t,e,a]),o.a.createElement("div",{style:{position:"absolute",height:"0",width:"100%"},ref:n})});const g=o.a.memo(e=>{const[t]=Object(r.useState)(new Map),n=o.a.useCallback(e=>(t.set(e,null),()=>{t.delete(e)}),[t]),i=o.a.useCallback(()=>{t.forEach((e,t)=>t())},[t]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(h,null,o.a.createElement(p,{onResize:i})),o.a.createElement(l,{value:{subscribe:n}},e.children))}),y=o.a.memo(e=>o.a.createElement(l,{value:{subscribe:a}},e.children)),b=o.a.memo(({setWidth:e,useIntersectionObserver:t})=>{const n=function(e){return e?v:m}(t);return o.a.createElement(c,null,({subscribe:t})=>o.a.createElement(n,{setWidth:e,subscribe:t||f}))}),w=o.a.memo(e=>{const{supportsResizeObserver:t,supportsIntersectionObserver:n}=s.a;return t&&n?o.a.createElement(y,null,e.children):o.a.createElement(g,null,e.children)})},bBdq:function(e,t,n){"use strict";function r(e){let t=[];const n=e.firstChild;return n&&n.forEach(e=>{let n=e.attrs.colwidth||[0];n&&(t=[...t,...n])}),t}function o(e){let t=!1;return e.descendants(e=>{if("tableRow"===e.type.name)return!0;const{colspan:n,rowspan:r}=e.attrs;return(n>1||r>1)&&(t=!0),!1}),t}function i(e){const t=[];return e.forEach(e=>{if("tableRow"===e.type.name){const n=[];e.forEach(e=>n.push(e)),t.push(n)}}),t}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}))},bU5Q:function(e,t,n){"use strict";var r=n("qkXo"),o=n("Czhu");class i{buildInlineAdf(e){return{type:"inlineCard",attrs:{url:e}}}buildBlockAdf(e){return{type:"blockCard",attrs:{url:e}}}buildEmbedAdf(e){return{type:"embedCard",attrs:{url:e,layout:"wide"}}}toAdf(e,t){if((e=>e.match(/^https:\/\/.*?\/jira\/software\/projects\/[^\/]+?\/boards\/.*?\/roadmap\/?$/))(e))return this.buildEmbedAdf(e);switch(t){case"inline":return this.buildInlineAdf(e);case"block":return this.buildBlockAdf(e);case"embed":return this.buildEmbedAdf(e)}}}var s=n("ERVN");class a{constructor(e){this.baseUrl=Object(s.a)(e),this.resolverUrl=Object(s.b)(e),this.transformer=new i,this.requestOpts={method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:this.baseUrl}}}async check(e){try{const t=this.resolverUrl+"/check",n=await fetch(t,Object(o.a)(Object(o.a)({},this.requestOpts),{},{body:JSON.stringify({resourceUrl:e})}));return(await n.json()).isSupported}catch(t){return void console.error(t)}}async fetchPatterns(){try{const e=this.resolverUrl+"/providers",t=await fetch(e,this.requestOpts);return(await t.json()).providers.reduce((e,t)=>{const n=t.patterns.map(e=>e.source);return e.concat(n)},[])}catch(e){return void console.error(e)}}findPattern(e){const t=this.patterns;return!!t&&t.some(t=>e.match(t))}async resolve(e,t){try{if(this.patterns||(this.patterns=await this.fetchPatterns()),this.findPattern(e)||await this.check(e))return this.transformer.toAdf(e,t)}catch(n){console.warn(`Error when trying to check Smart Card url "${e} - ${n.prototype.name} ${n.message}`,n)}return Promise.reject(void 0)}}new a;n("7kse"),n("ycrU");var c=n("ERkP"),l=n.n(c),u=n("u6In");class d extends l.a.PureComponent{static moduleImporter(e){Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e(6),n.e(10),n.e(15),n.e(107),n.e("@atlaskit-internal-smartcard-datacardcontent~0d526c70")]).then(n.bind(null,"X6hL")).then(t=>{d.CardContent=t.CardWithDataContent,e.forceUpdate()})}componentDidMount(){null===d.CardContent&&(this.props.importer||d.moduleImporter)(this)}render(){const{appearance:e,data:t,isSelected:n,onClick:r,onResolve:o,testId:i,showActions:s}=this.props;if(!t)throw new Error("@atlaskit/smart-cards: you are trying to render a card with data, but does not provide any");return d.CardContent?l.a.createElement(d.CardContent,{appearance:e,data:t,isSelected:n,onClick:r,onResolve:o,testId:i,showActions:s}):l.a.createElement("div",{"data-card-with-data":!0})}}d.CardContent=null;var p=n("fN3Q"),h=n.n(p),f=n("ghNS"),m=n("v0vx"),v=n("GoRf");class g extends l.a.PureComponent{constructor(e){super(e),this.dispatchAnalytics=e=>{const{appearance:t,createAnalyticsEvent:n}=this.props;e&&e.attributes&&(e.attributes.display||(e.attributes.display=t)),Object(m.c)(e,n)},this.state={id:h()()}}static moduleImporter(e){Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e(6),n.e(10),n.e(15),n.e(107),n.e("@atlaskit-internal-smartcard-urlcardcontent~4134d62c")]).then(n.bind(null,"mMFN")).then(t=>{g.CardContent=t.LazyCardWithUrlContent,e.forceUpdate()})}componentDidMount(){null===g.CardContent&&(this.props.importer||g.moduleImporter)(this)}componentWillUnmount(){const e=this.state.id;Object(v.a)(e),Object(v.b)(e)}componentDidCatch(e,t){const{appearance:n}=this.props;if("APIError"===e.name)throw e;this.dispatchAnalytics(Object(m.o)(n,e,t))}render(){const{url:e,appearance:t,isSelected:n,isFrameVisible:r,onClick:o,container:i,onResolve:s,testId:a,showActions:c,inheritDimensions:u,platform:d}=this.props;if(!e)throw new Error("@atlaskit/smart-card: url property is missing.");return null!==g.CardContent?l.a.createElement(g.CardContent,{id:this.state.id,url:e,appearance:t,onClick:o,isSelected:n,isFrameVisible:r,dispatchAnalytics:this.dispatchAnalytics,container:i,onResolve:s,testId:a,showActions:c,inheritDimensions:u,platform:d}):l.a.createElement(f.a,{key:"chunk-placeholder",link:e})}}g.CardContent=null;var y=n("7BAE");class b extends l.a.PureComponent{render(){return Object(y.b)(this.props)?l.a.createElement(d,Object.assign({},this.props)):l.a.createElement(g,Object.assign({},this.props))}}const w=Object(u.a)()(b);var _=n("EHE7");n.d(t,"d",(function(){return r.a})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return _.c}))},bcOB:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("Czhu"),o=n("pZ4U");const i=["align","annotationType","extensionKey","extensionType","layout","type","localId","mode","language","timestamp","state","originalWidth","originalHeight","height","width","shortName","level","userType","order","panelType","color","style","isNumberColumnEnabled","colspan","rowspan","colwidth","background"];const s=(e=[])=>{let t=[];return e.forEach(e=>{if(e.attrs){const n=a(e.attrs);t.push(Object(r.a)(Object(r.a)({},e),{},{attrs:n}))}else t.push(Object(r.a)({},e))}),t},a=(e={})=>{let t=Object.assign({},e);return Object.keys(e).filter(e=>!i.includes(e)).forEach(e=>t[e]=""),t},c=(e,t,n,r="")=>{const{type:i,marks:u}=e,{unsupportedMark:d,unsupportedNodeAttribute:p}=t.marks,{unsupportedInline:h,unsupportedBlock:f}=t.nodes,m=r.split(" ").pop()||"";if(u.length&&u.forEach(e=>{if(e.type===d){const{originalValue:t}=e.attrs||{},i=a(t.attrs)||{},{type:s}=t||{},c={type:s||"",ancestry:r,parentType:m,marks:[],attrs:i||{}};l(n,o.c.UNSUPPORTED_MARK,c)}else if(e.type===p){const{unsupported:t}=e.attrs||{},s=a(t)||{},c={type:i.name||"",ancestry:r,parentType:m,marks:[],attrs:s||{}};l(n,o.c.UNSUPPORTED_NODE_ATTRIBUTE,c)}}),i===h||i===f){const{originalValue:t}=e.attrs||{},{marks:c}=t||[],{attrs:u}=t||{},{type:d}=t||{},p={type:d||"",ancestry:r,parentType:m,marks:s(c)||[],attrs:a(u)||{}},f=i===h?o.c.UNSUPPORTED_INLINE:o.c.UNSUPPORTED_BLOCK;l(n,f,p)}else e.content.forEach(o=>c(o,t,n,function(e,t){const{name:n}=e.type;return t?`${t} ${n}`:n}(e,r)))},l=(e,t,n={},r)=>{let i={unsupportedNode:n};r&&(i.errorCode=r);e({action:o.a.UNSUPPORTED_CONTENT_ENCOUNTERED,actionSubject:o.b.DOCUMENT,actionSubjectId:t,attributes:i,eventType:o.d.TRACK})}},biJf:function(e,t,n){"use strict";function r(e,t,n,r){let o=!0,i=r?r.locale:"en",s=e.defaultMessage;if(n&&"en"===i){const{originalValue:e}=n.attrs;e.text||e.attrs&&e.attrs.text?(s=e.text?e.text:e.attrs.text,o=!1):e.type&&(s=`${t} ${e.type}`,o=!1)}return r&&o?r.formatMessage(e):s}n.d(t,"a",(function(){return r}))},cP58:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){asyncGeneratorStep(i,r,o,s,a,"next",e)}function a(e){asyncGeneratorStep(i,r,o,s,a,"throw",e)}s(void 0)}))}}var Events,IORedisConnection,Scripts,parser;parser=__webpack_require__("Ow5E"),Events=__webpack_require__("wxq6"),Scripts=__webpack_require__("TdYm"),IORedisConnection=function(){class IORedisConnection{constructor(options={}){parser.load(options,this.defaults,this),null==this.Redis&&(this.Redis=eval("require")("ioredis")),null==this.Events&&(this.Events=new Events(this)),this.terminated=!1,null!=this.clusterNodes?(this.client=new this.Redis.Cluster(this.clusterNodes,this.clientOptions),this.subscriber=new this.Redis.Cluster(this.clusterNodes,this.clientOptions)):null!=this.client&&null==this.client.duplicate?this.subscriber=new this.Redis.Cluster(this.client.startupNodes,this.client.options):(null==this.client&&(this.client=new this.Redis(this.clientOptions)),this.subscriber=this.client.duplicate()),this.limiters={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then(()=>(this._loadScripts(),{client:this.client,subscriber:this.subscriber}))}_setup(e,t){return e.setMaxListeners(0),new this.Promise((n,r)=>(e.on("error",e=>this.Events.trigger("error",e)),t&&e.on("message",(e,t)=>{var n;return null!=(n=this.limiters[e])?n._store.onMessage(e,t):void 0}),"ready"===e.status?n():e.once("ready",n)))}_loadScripts(){return Scripts.names.forEach(e=>this.client.defineCommand(e,{lua:Scripts.payload(e)}))}__runCommand__(e){var t=this;return _asyncToGenerator((function*(){yield t.ready;var n=_slicedToArray(yield t.client.pipeline([e]).exec(),1),r=_slicedToArray(n[0],2);return r[0],r[1]}))()}__addLimiter__(e){return this.Promise.all([e.channel(),e.channel_client()].map(t=>new this.Promise((n,r)=>this.subscriber.subscribe(t,()=>(this.limiters[t]=e,n())))))}__removeLimiter__(e){var t=this;return[e.channel(),e.channel_client()].forEach(function(){var e=_asyncToGenerator((function*(e){return t.terminated||(yield t.subscriber.unsubscribe(e)),delete t.limiters[e]}));return function(t){return e.apply(this,arguments)}}())}__scriptArgs__(e,t,n,r){var o;return[(o=Scripts.keys(e,t)).length].concat(o,n,r)}__scriptFn__(e){return this.client[e].bind(this.client)}disconnect(e=!0){var t,n,r,o;for(t=0,r=(o=Object.keys(this.limiters)).length;t<r;t++)n=o[t],clearInterval(this.limiters[n]._store.heartbeat);return this.limiters={},this.terminated=!0,e?this.Promise.all([this.client.quit(),this.subscriber.quit()]):(this.client.disconnect(),this.subscriber.disconnect(),this.Promise.resolve())}}return IORedisConnection.prototype.datastore="ioredis",IORedisConnection.prototype.defaults={Redis:null,clientOptions:{},clusterNodes:null,client:null,Promise,Events:null},IORedisConnection}.call(void 0),module.exports=IORedisConnection},"cX+u":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a}));var r=n("KsTJ"),o=n("akq8");const i={focus:"ak-editor-annotation-focus",blur:"ak-editor-annotation-blur",draft:"ak-editor-annotation-draft"},s={focus:r.css`
    background: ${o.Y75};
    border-bottom: 2px solid ${o.Y300};
    cursor: pointer;
  `,blur:r.css`
    background: rgba(255, 240, 179, 0.5); // Y75
    border-bottom: 2px solid rgba(255, 196, 0, 0.82); // Y200
    cursor: pointer;
  `},a=r.css`
  .ProseMirror {
    .${i.focus} {
      ${s.focus};
    }

    .${i.draft} {
      ${s.focus};
      cursor: initial;
    }

    .${i.blur} {
      ${s.blur};
    }
  }
`},"cc+5":function(e,t,n){"use strict";var r=n("39fB");n.d(t,"a",(function(){return o}));const o=(e,t)=>{const n=e.preview,o=((e,t)=>{if(e){if("string"==typeof e)return!0;{const n=e["atlassian:supportedPlatforms"];if(n){const e="web"===t;return e&&n.includes("web")||!e&&n.includes("mobile")}return!0}}return!1})(n,t);if(n&&o){if("string"==typeof n)return{src:n};if("Link"===n["@type"])return{src:Object(r.c)(n)};if(n.url||n.href)return{src:Object(r.c)(n.url||n.href)};if(n.content)return{content:n.content}}}},clDp:function(e,t,n){"use strict";var r=n("ERkP"),o=n.n(r),i=n("fuoD"),s=n("a22k"),a=n("TcjM");const c=o.a.memo(({setWidth:e,offscreen:t})=>{const{supportsResizeObserver:n}=i.a,[r,s,c]=Object(a.a)({threshold:0}),l=o.a.useRef(()=>"undefined"!=typeof window&&n?new ResizeObserver(t=>{if(!Array.isArray(t)||!t.length)return;const{width:n}=t[0].contentRect;e(Math.round(n))}):null);return o.a.useEffect(()=>{const{current:e}=l,n=e();if(null!==n)return c&&(s||t?n.observe(c):n.unobserve(c)),()=>{n.disconnect()}},[c,s,t]),o.a.createElement("div",{style:{display:"block",width:"100%",position:"absolute"},ref:r})});n.d(t,"a",(function(){return l}));const l=o.a.memo(e=>{const{supportsResizeObserver:t,supportsIntersectionObserver:n}=i.a;return t?o.a.createElement(c,{setWidth:e.setWidth,offscreen:e.offscreen}):o.a.createElement(s.a,{setWidth:e.setWidth,useIntersectionObserver:n})})},csOR:function(e,t,n){var r=n("Z08a");t.operation=function(e){var n=t.timeouts(e);return new r(n,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],o=0;o<t.retries;o++)r.push(this.createTimeout(o,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(o,t)),r.sort((function(e,t){return e-t})),r},t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*t.minTimeout*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout)},t.wrap=function(e,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var o in r=[],e)"function"==typeof e[o]&&r.push(o);for(var i=0;i<r.length;i++){var s=r[i],a=e[s];e[s]=function(r){var o=t.operation(n),i=Array.prototype.slice.call(arguments,1),s=i.pop();i.push((function(e){o.retry(e)||(e&&(arguments[0]=o.mainError()),s.apply(this,arguments))})),o.attempt((function(){r.apply(e,i)}))}.bind(e,a),e[s].options=n}}},"e2D/":function(e,t,n){"use strict";var r=n("ERkP"),o=n.n(r),i=n("KsTJ"),s=n("3IV/"),a=n("BMbf"),c=n("bg0W");const l=`\n  cursor: pointer;\n  box-shadow: 0 0 0 2px ${s.B100};\n  outline: none;\n  user-select: none;\n  &, :hover, :focus, :active {\n    text-decoration: none;\n  }\n`,u=i.default.a`
  line-height: 16px;
  padding: 1px 0.24em 2px 0.24em;
  display: inline;
  box-decoration-break: clone;
  border-radius: ${Object(a.c)()}px;
  ${({withoutBackground:e})=>e?"":`\n    background-color: white; \n    ${Object(c.e100)()}\n  `};
  ${({isInteractive:e})=>e?`\n      cursor: pointer;\n      :hover {\n        background-color: ${s.N20};\n        text-decoration: none;\n      }\n      :active {\n        background-color: ${s.B50};\n        text-decoration: none;\n      }\n      :focus {\n        ${l}\n        text-decoration: none;\n      }\n    `:""}
  ${({isSelected:e})=>e?l:"user-select: text"};
  transition: 0.1s all ease-in-out;
`;n.d(t,"a",(function(){return d}));class d extends o.a.Component{constructor(){super(...arguments),this.handleClick=e=>{const{onClick:t}=this.props;t&&(e.preventDefault(),e.stopPropagation(),t(e))},this.handleKeyPress=e=>{if(" "!==e.key&&"Enter"!==e.key)return;const{onClick:t}=this.props;t&&(e.preventDefault(),e.stopPropagation(),t(e))},this.handleMouseDown=e=>{e.preventDefault()}}render(){const{isSelected:e,children:t,onClick:n,link:r,withoutBackground:i,testId:s}=this.props,a=Boolean(n);return o.a.createElement(u,{href:r,withoutBackground:i,isSelected:e,isInteractive:a,tabIndex:a?0:void 0,role:a?"button":void 0,onClick:this.handleClick,onMouseDown:this.handleMouseDown,onKeyPress:this.handleKeyPress,"data-testid":s},t)}}},ehfC:function(e,t,n){"use strict";n.r(t),n.d(t,"AllSelection",(function(){return h})),n.d(t,"EditorState",(function(){return k})),n.d(t,"NodeSelection",(function(){return d})),n.d(t,"Plugin",(function(){return x})),n.d(t,"PluginKey",(function(){return T})),n.d(t,"Selection",(function(){return s})),n.d(t,"SelectionRange",(function(){return c})),n.d(t,"TextSelection",(function(){return l})),n.d(t,"Transaction",(function(){return g}));var r=n("I9T1"),o=n("UdmJ"),i=Object.create(null),s=function(e,t,n){this.ranges=n||[new c(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(e,t){void 0===t&&(t=r.Slice.empty);for(var n=t.content.lastChild,o=null,i=0;i<t.openEnd;i++)o=n,n=n.lastChild;for(var s=e.steps.length,a=this.ranges,c=0;c<a.length;c++){var l=a[c],u=l.$from,d=l.$to,p=e.mapping.slice(s);e.replaceRange(p.map(u.pos),p.map(d.pos),c?r.Slice.empty:t),0==c&&v(e,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}},s.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=e.mapping.slice(n),l=c.map(s.pos),u=c.map(a.pos);o?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),v(e,n,t.isInline?-1:1))}},s.findFrom=function(e,t,n){var r=e.parent.inlineContent?new l(e):m(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?m(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):m(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}},s.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new h(e.node(0))},s.atStart=function(e){return m(e,e,0,0,1)||new h(e)},s.atEnd=function(e){return m(e,e,e.content.size,e.childCount,-1)||new h(e)},s.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},s.jsonID=function(e,t){if(e in i)throw new RangeError("Duplicate use of selection JSON ID "+e);return i[e]=t,t.prototype.jsonID=e,t},s.prototype.getBookmark=function(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function(e,t){this.$from=e,this.$to=t},l=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=n.resolve(r.map(this.anchor));return new t(i.parent.inlineContent?i:o,o)},t.prototype.replace=function(t,n){if(void 0===n&&(n=r.Slice.empty),e.prototype.replace.call(this,t,n),n==r.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&t.ensureMarks(o)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new u(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=e.findFrom(r,o,!0)||e.findFrom(r,-o,!0);if(!s)return e.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i||(n=(e.findFrom(n,-o,!0)||e.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new t(n,r)},Object.defineProperties(t.prototype,n),t}(s);s.jsonID("text",l);var u=function(e,t){this.anchor=e,this.head=t};u.prototype.map=function(e){return new u(e.map(this.anchor),e.map(this.head))},u.prototype.resolve=function(e){return l.between(e.resolve(this.anchor),e.resolve(this.head))};var d=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?e.near(a):new t(a)},t.prototype.content=function(){return new r.Slice(r.Fragment.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new p(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(s);d.prototype.visible=!1,s.jsonID("node",d);var p=function(e){this.anchor=e};p.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new u(r,r):new p(r)},p.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&d.isSelectable(n)?new d(t):s.near(t)};var h=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=r.Slice.empty),n==r.Slice.empty){t.delete(0,t.doc.content.size);var o=e.atStart(t.doc);o.eq(t.selection)||t.setSelection(o)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return f},t}(s);s.jsonID("all",h);var f={map:function(){return this},resolve:function(e){return new h(e)}};function m(e,t,n,r,o,i){if(t.inlineContent)return l.create(e,n);for(var s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){var a=t.child(s);if(a.isAtom){if(!i&&d.isSelectable(a))return d.create(e,n-(o<0?a.nodeSize:0))}else{var c=m(e,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function v(e,t,n){var r=e.steps.length-1;if(!(r<t)){var i,a=e.steps[r];if(a instanceof o.ReplaceStep||a instanceof o.ReplaceAroundStep)e.mapping.maps[r].forEach((function(e,t,n,r){null==i&&(i=r)})),e.setSelection(s.near(e.doc.resolve(i),n))}}var g=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return r.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.Mark.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(o.Transform);function y(e,t){return t&&e?e.bind(t):e}var b=function(e,t,n){this.name=e,this.init=y(t.init,n),this.apply=y(t.apply,n)},w=[new b("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new b("selection",{init:function(e,t){return e.selection||s.atStart(t.doc)},apply:function(e){return e.selection}}),new b("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new b("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],_=function(e,t){var n=this;this.schema=e,this.fields=w.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new b(e.key,e.spec.state,e))}))},k=function(e){this.config=e},S={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};S.schema.get=function(){return this.config.schema},S.plugins.get=function(){return this.config.plugins},k.prototype.apply=function(e){return this.applyTransaction(e).state},k.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},k.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,l=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,c,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}},k.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new k(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<O.length;i++)O[i](this,e,t);return t},S.tr.get=function(){return new g(this)},k.create=function(e){for(var t=new _(e.schema||e.doc.type.schema,e.plugins),n=new k(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},k.prototype.reconfigure=function(e){for(var t=new _(e.schema||this.schema,e.plugins),n=t.fields,r=new k(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r},k.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t},k.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var o=new _(e.schema,e.plugins),i=new k(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=r.Node.fromJSON(e.schema,t.doc);else if("selection"==o.name)i.selection=s.fromJSON(i.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],l=c.spec.state;if(c.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,a))return void(i[o.name]=l.fromJSON.call(c,e,t[a],i))}i[o.name]=o.init(e,i)}})),i},k.addApplyListener=function(e){O.push(e)},k.removeApplyListener=function(e){var t=O.indexOf(e);t>-1&&O.splice(t,1)},Object.defineProperties(k.prototype,S);var O=[];var x=function(e){this.props={},e.props&&function e(t,n,r){for(var o in t){var i=t[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=e(i,n,{})),r[o]=i}return r}(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:E("plugin")};x.prototype.getState=function(e){return e[this.key]};var C=Object.create(null);function E(e){return e in C?e+"$"+ ++C[e]:(C[e]=0,e+"$")}var T=function(e){void 0===e&&(e="key"),this.key=E(e)};T.prototype.get=function(e){return e.config.pluginsByKey[this.key]},T.prototype.getState=function(e){return e[this.key]}},fuoD:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));const r={supportsIntersectionObserver:!1,supportsResizeObserver:!1};function o(){const e=/Edge\/(\d+)/.exec(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);return t?document.documentMode||6:n?+n[1]:e?+e[1]:null}"undefined"!=typeof navigator&&(r.supportsIntersectionObserver="undefined"!=typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,r.supportsResizeObserver="undefined"!=typeof window&&"ResizeObserver"in window&&"ResizeObserverEntry"in window);const i=r},ghNS:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("ERkP"),o=n.n(r),i=n("e2D/");class s extends o.a.PureComponent{render(){return o.a.createElement(i.a,Object.assign({withoutBackground:!0},this.props),this.props.link)}}},gxg8:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("L21V");const o=Object(r.g)({unsupportedInlineContent:{id:"fabric.editor.unsupportedContent",defaultMessage:"Unsupported content",description:"Unsupported content"},unsupportedBlockContent:{id:"fabric.editor.unsupportedContent",defaultMessage:"This editor does not support displaying this content",description:"This editor does not support displaying this content"},unsupportedContentTooltip:{id:"fabric.editor.unsupportedContentTooltip",defaultMessage:"Content is not available in this editor, this will be preserved when you edit and save",description:"Content is not available in this editor, this will be preserved when you edit and save"}})},hegZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ERkP")),o=i(n("4KTy"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return r.default.createElement(o.default,s({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M12.856 5.457l-.937.92a1.002 1.002 0 0 0 0 1.437 1.047 1.047 0 0 0 1.463 0l.984-.966c.967-.95 2.542-1.135 3.602-.288a2.54 2.54 0 0 1 .203 3.81l-2.903 2.852a2.646 2.646 0 0 1-3.696 0l-1.11-1.09L9 13.57l1.108 1.089c1.822 1.788 4.802 1.788 6.622 0l2.905-2.852a4.558 4.558 0 0 0-.357-6.82c-1.893-1.517-4.695-1.226-6.422.47"/><path d="M11.144 19.543l.937-.92a1.002 1.002 0 0 0 0-1.437 1.047 1.047 0 0 0-1.462 0l-.985.966c-.967.95-2.542 1.135-3.602.288a2.54 2.54 0 0 1-.203-3.81l2.903-2.852a2.646 2.646 0 0 1 3.696 0l1.11 1.09L15 11.43l-1.108-1.089c-1.822-1.788-4.802-1.788-6.622 0l-2.905 2.852a4.558 4.558 0 0 0 .357 6.82c1.893 1.517 4.695 1.226 6.422-.47"/></g></svg>'},e))};a.displayName="LinkIcon";var c=a;t.default=c},hj8b:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return h}));for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),u=i&&(c||+i[1]<57)||a&&c,d=0;d<10;d++)r[48+d]=r[96+d]=String(d);for(d=1;d<=24;d++)r[d+111]="F"+d;for(d=65;d<=90;d++)r[d]=String.fromCharCode(d+32),o[d]=String.fromCharCode(d);for(var p in r)o.hasOwnProperty(p)||(o[p]=r[p]);function h(e){var t=!(u&&(e.ctrlKey||e.altKey||e.metaKey)||(s||l)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?o:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}},ibvy:function(e,t,n){"use strict";var r=n("ERkP"),o=n.n(r),i=n("L21V"),s=n("KsTJ"),a=n("o0fs"),c=n.n(a),l=n("akq8"),u=n("vVzW"),d=n("a8dO"),p=n("gxg8"),h=n("biJf");const f=s.default.div`
  align-items: center;
  background: ${l.N30};
  border: 1px dashed ${l.N50};
  border-radius: ${Object(u.c)()}px;
  box-sizing: border-box;
  cursor: default;
  display: flex;
  font-size: ${Object(u.e)()}px;
  margin: 10px 0;
  min-height: 24px;
  padding: 10px;
  text-align: center;
  user-select: all;
  vertical-align: text-bottom;
  min-width: 120px;
  align-items: center;
  justify-content: center;
`;t.a=Object(i.h)(({node:e,intl:t})=>{const n=Object(h.a)(p.a.unsupportedBlockContent,p.a.unsupportedBlockContent.defaultMessage+":",e,t),i=t.formatMessage(p.a.unsupportedContentTooltip),{current:s}=Object(r.useRef)({padding:"4px"});return o.a.createElement(f,null,n,o.a.createElement(d.a,{content:i,hideTooltipOnClick:!1,position:"bottom"},o.a.createElement("span",{style:s},o.a.createElement(c.a,{label:"?",size:"small"}))))})},icXN:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("KsTJ"),o=n("qPpp"),i=n("akq8"),s=n("vVzW");const a=r.css`
  span.code {
    font-size: ${Object(o.fb)(.857)}px;
    font-weight: normal;
    padding: 2px 0px 2px 0px;
    background-color: ${i.N30A};
    box-decoration-break: clone;
    border-radius: 3px;
    border-style: none;
    font-family: ${Object(s.d)()};
    white-space: pre-wrap;
    margin: 0 4px 0 4px;
    box-shadow: -4px 0 0 0 ${i.N30A}, 4px 0 0 0 ${i.N30A};

    &::before,
    &::after {
      vertical-align: text-top;
      display: inline-block;
      content: '';
    }
  }
`},idvw:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return w}));var r=n("KsTJ"),o=n("25UG"),i=n("HCLf"),s=n("qPpp"),a=n("akq8"),c=n("qWCz"),l=n("vVzW");const u={info:a.B50,note:a.P50,tip:a.G50,success:a.G50,warning:a.Y50,error:a.R50},d={info:a.B500,note:a.P500,tip:a.G500,success:a.G500,warning:a.Y500,error:a.R500},p={info:a.B400,note:a.P400,tip:a.G400,success:a.G400,warning:a.Y400,error:a.R400},h={info:a.B400,note:a.P400,tip:a.G400,success:a.G400,warning:a.Y400,error:a.R400},f={info:a.B100,note:a.P100,tip:a.G200,success:a.G200,warning:a.Y100,error:a.R200},m={info:a.B75,note:a.P75,tip:a.G75,success:a.G75,warning:a.Y75,error:a.R75},v="ak-editor-panel",g={prefix:v,content:v+"__content",icon:v+"__icon"},y=(o.a.INFO,e=>t=>{const n=h[e],r=f[e];return`\n    color: ${Object(c.a)({light:n,dark:r})(t)};\n  `}),b=e=>t=>{const n=u[e],r=Object(i.J)(d[e],.64),o=m[e],s=Object(c.a)({light:n,dark:r})(t),a="1px solid "+p[e];return`\n    background-color: ${s};\n    border: ${Object(c.a)({light:"none",dark:a})(t)};\n    color: ${Object(c.a)({light:"inherit",dark:o})(t)};\n  `},w=r.css`
  .${g.prefix} {
    border-radius: ${Object(l.c)()}px;
    margin: ${s.ab} 0 0;
    padding: ${Object(l.g)()}px;
    min-width: ${s.P}px;
    display: flex;
    align-items: baseline;
    word-break: break-word;

    ${b(o.a.INFO)}

    .${g.icon} {
      display: block;
      flex-shrink: 0;
      height: ${3*Object(l.g)()}px;
      width: ${3*Object(l.g)()}px;
      box-sizing: content-box;
      padding-right: ${Object(l.g)()}px;
      ${y(o.a.INFO)}

      > span {
        vertical-align: middle;
        display: inline;
      }
    }

    .ak-editor-panel__content {
      margin: 1px 0 1px;
      flex: 1 0 0;
    }

    &[data-panel-type='${o.a.NOTE}'] {
      ${b(o.a.NOTE)}

      .${g.icon} {
        ${y(o.a.NOTE)}
      }
    }

    &[data-panel-type='${o.a.TIP}'] {
      ${b(o.a.TIP)}

      .${g.icon} {
        ${y(o.a.TIP)}
      }
    }

    &[data-panel-type='${o.a.WARNING}'] {
      ${b(o.a.WARNING)}

      .${g.icon} {
        ${y(o.a.WARNING)}
      }
    }

    &[data-panel-type='${o.a.ERROR}'] {
      ${b(o.a.ERROR)}

      .${g.icon} {
        ${y(o.a.ERROR)}
      }
    }

    &[data-panel-type='${o.a.SUCCESS}'] {
      ${b(o.a.SUCCESS)}

      .${g.icon} {
        ${y(o.a.SUCCESS)}
      }
    }
  }
`},iuk6:function(e,t,n){"use strict";function r(e){return"object"==typeof e?e.render:e}n.d(t,"a",(function(){return r}))},"kvU/":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(){this.providers=new Map,this.subscribers=new Map}static create(e){const t=new r;return Object.keys(e).forEach(n=>{t.setProvider(n,e[n])}),t}destroy(){this.providers.clear(),this.subscribers.clear()}isEmpty(){return!this.providers.size&&!this.subscribers.size}setProvider(e,t){this.providers.get(e)!==t&&(void 0!==t?this.providers.set(e,t):this.providers.delete(e),this.notifyUpdated(e,t))}removeProvider(e){this.providers.delete(e),this.notifyUpdated(e)}subscribe(e,t){const n=this.subscribers.get(e)||[];n.push(t),this.subscribers.set(e,n);const r=this.providers.get(e);r&&t(e,r)}unsubscribe(e,t){const n=this.subscribers.get(e);if(!n)return;const r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length?this.subscribers.delete(e):this.subscribers.set(e,n)}unsubscribeAll(e){this.subscribers.get(e)&&this.subscribers.delete(e)}hasProvider(e){return this.providers.has(e)}notifyUpdated(e,t){const n=this.subscribers.get(e);n&&n.forEach(n=>{n(e,t)})}}},l4NO:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n("ERkP"),o=n.n(r),i=n("B63t"),s=n.n(i),a=n("2SyA");async function c(e,t,n){const[r,o]=Object(a.b)(n,t),i=await e.getExtension(t,r);if(!i)throw new Error(`Extension with key "${r}" and type "${t}" not found!`);if(!i.modules.nodes)throw new Error(`Couldn't find any node for extension type "${t}" and key "${n}"!`);const s=i.modules.nodes[o];if(!s)throw new Error(`Node with key "${n}" not found on manifest for extension type "${t}" and key "${n}"!`);return s}function l(e){return e.error||e.timedOut?(console.error("Error rendering extension",e.error),o.a.createElement("div",null,"Error loading the extension!")):null}function u(e,t,n){return s()({id:"uqQYo",loader:()=>c(e,t,n).then(e=>Object(a.c)(e.render())),loading:l})}},lELC:function(e,t,n){"use strict";n.r(t),n.d(t,"Decoration",(function(){return kt})),n.d(t,"DecorationSet",(function(){return Ct})),n.d(t,"EditorView",(function(){return $t})),n.d(t,"__endComposition",(function(){return pt})),n.d(t,"__parseFromClipboard",(function(){return $e})),n.d(t,"__serializeForClipboard",(function(){return Pe}));var r=n("ehfC"),o=n("I9T1"),i=n("UdmJ"),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var u=s.ie=!!(c||l||a);s.ie_version=c?document.documentMode||6:l?+l[1]:a?+a[1]:null,s.gecko=!u&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var d=!u&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!d,s.chrome_version=d&&+d[1],s.ios=!u&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.safari=/Apple Computer/.test(navigator.vendor),s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var p=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},h=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},f=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},m=function(e,t,n,r){return n&&(g(e,t,n,r,-1)||g(e,t,n,r,1))},v=/^(img|br|input|textarea|hr)$/i;function g(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:y(e))){var i=e.parentNode;if(1!=i.nodeType||b(e)||v.test(e.nodeName)||"false"==e.contentEditable)return!1;t=p(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?y(e):0}}}function y(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function b(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var w=function(e){var t=e.isCollapsed;return t&&s.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function _(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function k(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function S(e,t){return"number"==typeof e?e:e[t]}function O(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.left+e.clientWidth,top:t.top,bottom:t.top+e.clientHeight}}function x(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=n||e.dom;s;s=h(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,c=a?k(i):O(s),l=0,u=0;if(t.top<c.top+S(r,"top")?u=-(c.top-t.top+S(o,"top")):t.bottom>c.bottom-S(r,"bottom")&&(u=t.bottom-c.bottom+S(o,"bottom")),t.left<c.left+S(r,"left")?l=-(c.left-t.left+S(o,"left")):t.right>c.right-S(r,"right")&&(l=t.right-c.right+S(o,"right")),l||u)if(a)i.defaultView.scrollBy(l,u);else{var d=s.scrollLeft,p=s.scrollTop;u&&(s.scrollTop+=u),l&&(s.scrollLeft+=l);var f=s.scrollLeft-d,m=s.scrollTop-p;t={left:t.left-f,top:t.top-m,right:t.right-f,bottom:t.bottom-m}}if(a)break}}function C(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=h(e));return t}function E(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=s&&(o.scrollLeft=s)}}var T=null;function N(e,t){for(var n,r,o=2e8,i=0,s=t.top,a=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=f(c).getClientRects()}for(var d=0;d<u.length;d++){var p=u[d];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var h=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(h<o){n=c,o=h,r=h&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==c.nodeType&&h&&(i=l+(t.left>=(p.left+p.right)/2?1:0));continue}}!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(i=l+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=M(r,1);if(i.top!=i.bottom&&A(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:N(n,r)}function A(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function R(e,t){var n,r,o,i,a=e.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(t.left,t.top);c&&(o=(n=c).offsetNode,i=n.offset)}catch(v){}if(!o&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(t.left,t.top);l&&(o=(r=l).startContainer,i=r.startOffset)}var u,d=a.elementFromPoint(t.left,t.top+1);if(!d||!e.dom.contains(1!=d.nodeType?d.parentNode:d)){var p=e.dom.getBoundingClientRect();if(!A(t,p))return null;if(!(d=function e(t,n,r){var o=t.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),s=i;;){var a=t.childNodes[s];if(1==a.nodeType)for(var c=a.getClientRects(),l=0;l<c.length;l++){var u=c[l];if(A(n,u))return e(a,n,u)}if((s=(s+1)%o)==i)break}return t}(e.dom,t,p)))return null}if(s.safari&&d.draggable&&(o=i=null),d=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(d,t),o){if(s.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var h,f=o.childNodes[i];"IMG"==f.nodeName&&(h=f.getBoundingClientRect()).right<=t.left&&h.bottom>t.top&&i++}o==e.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?u=e.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(u=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n)}(e,o,i,t))}null==u&&(u=function(e,t,n){var r=N(t,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(o,i,s)}(e,d,t));var m=e.docView.nearestDesc(d,!0);return{pos:u,inside:m?m.posAtStart-m.border:-1}}function M(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function I(e,t){var n=e.docView.domFromPos(t),r=n.node,o=n.offset;if(3==r.nodeType&&(s.webkit||s.gecko)){var i=M(f(r,o,o),0);if(s.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var a=M(f(r,o-1,o-1),-1);if(a.top==i.top){var c=M(f(r,o,o+1),-1);if(c.top!=i.top)return j(c,c.left<a.left)}}return i}if(1==r.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var l,u=!0;if(o<r.childNodes.length){var d=r.childNodes[o];1==d.nodeType&&(l=d.getBoundingClientRect())}if(!l&&o){var p=r.childNodes[o-1];1==p.nodeType&&(l=p.getBoundingClientRect(),u=!1)}return function(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}(l||r.getBoundingClientRect(),u)}for(var h=-1;h<2;h+=2)if(h<0&&o){var m=void 0,v=3==r.nodeType?f(r,o-1,o):3==(m=r.childNodes[o-1]).nodeType?f(m):1==m.nodeType&&"BR"!=m.nodeName?m:null;if(v){var g=M(v,1);if(g.top<g.bottom)return j(g,!1)}}else if(h>0&&o<y(r)){var b=void 0,w=3==r.nodeType?f(r,o,o+1):3==(b=r.childNodes[o]).nodeType?f(b):1==b.nodeType?b:null;if(w){var _=M(w,-1);if(_.top<_.bottom)return j(_,!0)}}return j(M(3==r.nodeType?f(r):r,0),!1)}function j(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function D(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}var P=/[\u0590-\u08ac]/;var $=null,L=null,z=!1;function B(e,t,n){return $==t&&L==n?z:($=t,L=n,z="up"==n||"down"==n?function(e,t,n){var r=t.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return D(e,t,(function(){for(var t=e.docView.domFromPos(o.pos).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var i=I(e,o.pos),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=f(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==n?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return P.test(r.parent.textContent)&&a.modify?D(e,t,(function(){var t=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var c=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),c})):"left"==n||"backward"==n?i:s}(e,t,n))}var F=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},V={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};F.prototype.matchesWidget=function(){return!1},F.prototype.matchesMark=function(){return!1},F.prototype.matchesNode=function(){return!1},F.prototype.matchesHack=function(){return!1},V.beforePosition.get=function(){return!1},F.prototype.parseRule=function(){return null},F.prototype.stopEvent=function(){return!1},V.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},V.border.get=function(){return 0},F.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},F.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},V.posBefore.get=function(){return this.parent.posBeforeChild(this)},V.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},V.posAfter.get=function(){return this.posBefore+this.size},V.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},F.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},F.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==e.nodeType?e:e.parentNode):o.nodeDOM==e))return o;n=!1}}},F.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},F.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1},F.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},F.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:p(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],o=t+r.size;if(e<o)return r.domFromPos(e-t-r.border);t=o}},F.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==r&&e<=c){var l=i+a.border;if(e>=l&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,l);e=i;for(var u=s;u>0;u--){var d=this.children[u-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=p(d.dom)+1;break}e-=d.size}-1==r&&(r=0)}if(r>-1&&(c>t||s==this.children.length-1)){t=c;for(var h=s+1;h<this.children.length;h++){var f=this.children[h];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=p(f.dom);break}t+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},F.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},F.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},F.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),i=Math.max(e,t),a=0,c=0;a<this.children.length;a++){var l=this.children[a],u=c+l.size;if(o>c&&i<u)return l.setSelection(e-c-l.border,t-c-l.border,n,r);c=u}var d=this.domFromPos(e),p=this.domFromPos(t),h=n.getSelection();if(r||!m(d.node,d.offset,h.anchorNode,h.anchorOffset)||!m(p.node,p.offset,h.focusNode,h.focusOffset)){var f=!1;if(s.gecko&&e==t){var v=d.node.childNodes[d.offset-1];v&&"BR"==v.nodeName&&(f=!0)}var g=!1;if((h.extend||e==t)&&!f){h.collapse(d.node,d.offset);try{e!=t&&h.extend(p.node,p.offset),g=!0}catch(w){if(!(w instanceof DOMException))throw w}}if(!g){if(e>t){var y=d;d=p,p=y}var b=document.createRange();b.setEnd(p.node,p.offset),b.setStart(d.node,d.offset),h.removeAllRanges(),h.addRange(b)}}},F.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},V.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},F.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var s=n+o.border,a=i-o.border;if(e>=s&&t<=a)return this.dirty=e==n||t==i?2:1,void(e!=s||t!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-s,t-s):o.dirty=3);o.dirty=3}n=i}this.dirty=2},F.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}},Object.defineProperties(F.prototype,V);var q=[],W=function(e){function t(t,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,q,s,null),this.widget=n,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},Object.defineProperties(t.prototype,n),t}(F),K=function(e){function t(t,n,r,o){e.call(this,t,q,n,null),this.textDOM=r,this.text=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(F),U=function(e){function t(t,n,r,o){e.call(this,t,[],r,o),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return a&&a.dom||(a=o.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,r){var o=t.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=ce(i,n,s,r)),e>0&&(i=ce(i,0,e,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},t}(F),H=function(e){function t(t,n,r,o,i,s,a,c,l){e.call(this,t,n.isLeaf?q:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,l)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0}};return t.create=function(e,n,r,i,s,a){var c,l,u=s.nodeViews[n.type.name],d=u&&u(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a}),r),p=d&&d.dom,h=d&&d.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(p=(c=o.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,h=c.contentDOM);h||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var f=p;return p=re(p,r,n),d?l=new X(e,n,r,i,p,h,f,d,s,a+1):n.isText?new J(e,n,r,i,p,f,s):new t(e,n,r,i,p,h,f,s,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?o.Fragment.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&oe(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,i=t,a=r&&e.composing&&this.localCompositionNode(e,t),c=new se(this,a&&a.node);!function(e,t,n,r){var o=t.locals(e),i=0;if(0==o.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);r(a,o,t.forChild(i,a),s),i+=a.nodeSize}return}for(var c=0,l=[],u=null,d=0;;){if(c<o.length&&o[c].to==i){for(var p=o[c++],h=void 0;c<o.length&&o[c].to==i;)(h||(h=[p])).push(o[c++]);if(h){h.sort(ae);for(var f=0;f<h.length;f++)n(h[f],d,!!u)}else n(p,d,!!u)}var m=void 0,v=void 0;if(u)v=-1,m=u,u=null;else{if(!(d<e.childCount))break;v=d,m=e.child(d++)}for(var g=0;g<l.length;g++)l[g].to<=i&&l.splice(g--,1);for(;c<o.length&&o[c].from<=i&&o[c].to>i;)l.push(o[c++]);var y=i+m.nodeSize;if(m.isText){var b=y;c<o.length&&o[c].from<b&&(b=o[c].from);for(var w=0;w<l.length;w++)l[w].to<b&&(b=l[w].to);b<y&&(u=m.cut(b-i),m=m.cut(0,b-i),y=b,v=-1)}var _=l.length?m.isInline&&!m.isLeaf?l.filter((function(e){return!e.inline})):l.slice():q;r(m,_,t.forChild(i,m),v),i=y}}(this.node,this.innerDeco,(function(t,s,a){t.spec.marks?c.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&c.syncToMarks(s==n.node.childCount?o.Mark.none:n.node.child(s).marks,r,e),c.placeWidget(t,e,i)}),(function(t,n,o,s){c.syncToMarks(t.marks,r,e),c.findNodeMatch(t,n,o,s)||c.updateNextNode(t,n,o,e,s)||c.addNode(t,n,o,e,i),i+=t.nodeSize})),c.syncToMarks(q,r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(a&&this.protectLocalComposition(e,a),function e(t,n,r){for(var o=t.firstChild,i=!1,s=0;s<n.length;s++){var a=n[s],c=a.dom;if(c.parentNode==t){for(;c!=o;)o=ie(o),i=!0;o=o.nextSibling}else i=!0,t.insertBefore(c,o);if(a instanceof U){var l=o?o.previousSibling:t.lastChild;e(a.contentDOM,a.children,r),o=l?l.nextSibling:t.firstChild}}for(;o;)o=ie(o),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),s.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,o=n.from,i=n.to;if(!(!(e.state.selection instanceof r.TextSelection)||o<t||i>t+this.node.content.size)){var s=e.root.getSelection(),a=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=y(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=function(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var s=e.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var c=s.text;o<e.childCount;){var l=e.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var u=c.lastIndexOf(t,r-a);if(u>=0&&u+t.length+a>=n)return a+u}}}return-1}(this.node.content,c,o-t,i-t);return l<0?null:{node:a,pos:l,text:c}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new K(this,i,n,o);e.compositionNodes.push(s),this.children=ce(this.children,r,r+o.length,e,s)}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!oe(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=te(this.dom,this.nodeDOM,ee(this.outerDeco,this.node,t),ee(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(t.prototype,n),t}(F);function G(e,t,n,r,o){return re(r,t,e),new H(null,e,t,n,r,r,r,o,0)}var J=function(e){function t(t,n,r,o,i,s,a){e.call(this,t,n,r,o,i,null,s,a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var o=this.node.cut(e,n),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},t}(H),Y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(F),X=function(e){function t(t,n,r,o,i,s,a,c,l,u){e.call(this,t,n,r,o,i,s,a,l,u),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,o)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(H);function Q(e){e&&(this.nodeName=e)}Q.prototype=Object.create(null);var Z=[new Q];function ee(e,t,n){if(0==e.length)return Z;for(var r=n?Z[0]:new Q,o=[r],i=0;i<e.length;i++){var s=e[i].type.attrs,a=r;if(s)for(var c in s.nodeName&&o.push(a=new Q(s.nodeName)),s){var l=s[c];null!=l&&(n&&1==o.length&&o.push(a=r=new Q(t.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return o}function te(e,t,n,r){if(n==Z&&r==Z)return t;for(var o=t,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=e&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName||((c=document.createElement(s.nodeName)).pmIsDeco=!0,c.appendChild(o),a=Z[0]),o=c}ne(o,a||Z[0],s)}return o}function ne(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" "):q,s=n.class?n.class.split(" "):q,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=n.style){if(t.style)for(var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=u.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function re(e,t,n){return te(e,e,Z,ee(t,n,1!=e.nodeType))}function oe(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function ie(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var se=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var n=function(e,t){for(var n=[],r=e.childCount,o=t.length-1;r>0&&o>=0;o--){var i=t[o],s=i.node;if(s){if(s!=e.child(r-1))break;n.push(i),--r}}return{nodes:n.reverse(),offset:r}}(e.node.content,e.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function ae(e,t){return e.type.side-t.type.side}function ce(e,t,n,r,o){for(var i=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,u=a+=c.size;l>=n||u<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function le(e,t){var n=e.selection,o=n.$anchor,i=n.$head,s=t>0?o.max(i):o.min(i),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&r.Selection.findFrom(a,t)}function ue(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function de(e,t,n){var o=e.state.selection;if(!(o instanceof r.TextSelection)){if(o instanceof r.NodeSelection&&o.node.isInline)return ue(e,new r.TextSelection(t>0?o.$to:o.$from));var i=le(e.state,t);return!!i&&ue(e,i)}if(!o.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var a=le(e.state,t);return!!(a&&a instanceof r.NodeSelection)&&ue(e,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,l=o.$head,u=l.textOffset?null:t<0?l.nodeBefore:l.nodeAfter;if(!u||u.isText)return!1;var d=t<0?l.pos-u.nodeSize:l.pos;return!!(u.isAtom||(c=e.docView.descAt(d))&&!c.contentDOM)&&(r.NodeSelection.isSelectable(u)?ue(e,new r.NodeSelection(t<0?e.state.doc.resolve(l.pos-u.nodeSize):l)):!!s.webkit&&ue(e,new r.TextSelection(e.state.doc.resolve(t<0?d:d+u.nodeSize))))}}function pe(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function he(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function fe(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(s.gecko&&1==n.nodeType&&r<pe(n)&&he(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(he(c))o=n,i=--r;else{if(3!=c.nodeType)break;r=(n=c).nodeValue.length}}else{if(ve(n))break;for(var l=n.previousSibling;l&&he(l);)o=n.parentNode,i=p(l),l=l.previousSibling;if(l)r=pe(n=l);else{if((n=n.parentNode)==e.dom)break;r=0}}a?ge(e,t,n,r):o&&ge(e,t,o,i)}}function me(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,s=pe(n);;)if(r<s){if(1!=n.nodeType)break;if(!he(n.childNodes[r]))break;o=n,i=++r}else{if(ve(n))break;for(var a=n.nextSibling;a&&he(a);)o=a.parentNode,i=p(a)+1,a=a.nextSibling;if(a)r=0,s=pe(n=a);else{if((n=n.parentNode)==e.dom)break;r=s=0}}o&&ge(e,t,o,i)}}function ve(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function ge(e,t,n,r){if(w(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection()}function ye(e,t,n){var o=e.state.selection;if(o instanceof r.TextSelection&&!o.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var i=o.$from,a=o.$to;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var c=le(e.state,t);if(c&&c instanceof r.NodeSelection)return ue(e,c)}if(!i.parent.inlineContent){var l=r.Selection.findFrom(t<0?i:a,t);return!l||ue(e,l)}return!1}function be(e,t){if(!(e.state.selection instanceof r.TextSelection))return!0;var n=e.state.selection,o=n.$head,i=n.$anchor,s=n.empty;if(!o.sameParent(i))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!o.textOffset&&(t<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var c=e.state.tr;return t<0?c.delete(o.pos-a.nodeSize,o.pos):c.delete(o.pos,o.pos+a.nodeSize),e.dispatch(c),!0}return!1}function we(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function _e(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||s.mac&&72==n&&"c"==r?be(e,-1)||fe(e):46==n||s.mac&&68==n&&"c"==r?be(e,1)||me(e):13==n||27==n||(37==n?de(e,-1,r)||fe(e):39==n?de(e,1,r)||me(e):38==n?ye(e,-1,r)||fe(e):40==n?function(e){if(s.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;we(e,o,!0),setTimeout((function(){return we(e,o,!1)}),20)}}}(e)||ye(e,1,r)||me(e):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function ke(e,t){var n=e.root.getSelection(),o=e.state.doc;if(!n.focusNode)return null;var i=e.docView.nearestDesc(n.focusNode),s=i&&0==i.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,l,u=o.resolve(a);if(w(n)){for(c=u;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&r.NodeSelection.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(e,t,n){for(var r=0==t,o=t==y(e);r||o;){if(e==n)return!0;var i=p(e);if(!(e=e.parentNode))return!1;r=r&&0==i,o=o&&i==y(e)}}(n.focusNode,n.focusOffset,i.dom))){var d=i.posBefore;l=new r.NodeSelection(a==d?u:o.resolve(d))}}else{var h=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(h<0)return null;c=o.resolve(h)}l||(l=Ae(e,c,u,"pointer"==t||e.state.selection.head<u.pos&&!s?1:-1));return l}function Se(e,t){var n=e.state.selection;if(Te(e,n),e.editable?e.hasFocus():Re(e)&&document.activeElement&&document.activeElement.contains(e.dom)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,p(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var o,i,a=n.anchor,c=n.head;!Oe||n instanceof r.TextSelection||(n.$from.parent.inlineContent||(o=xe(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=xe(e,n.to))),e.docView.setSelection(a,c,e.root,t),Oe&&(o&&Ee(o),i&&Ee(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}se.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},se.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},se.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},se.prototype.syncToMarks=function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=U.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},se.prototype.findNodeMatch=function(e,t,n,r){var o=-1,i=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(i&&i.matchesNode(e,t,n))o=s.indexOf(i);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(e,t,n)&&this.preMatched.indexOf(l)<0){o=a;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},se.prototype.updateNextNode=function(e,t,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof H){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=o)return!1;var c=s.dom;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&oe(t,s.outerDeco)))&&s.update(e,t,n,r))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},se.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,H.create(this.top,e,t,n,r,o)),this.changed=!0},se.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new W(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},se.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof U;)e=e.children[e.children.length-1];if(!e||!(e instanceof J)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new Y(this.top,q,t,null)),this.changed=!0}};var Oe=s.safari||s.chrome&&s.chrome_version<63;function xe(e,t){var n=e.docView.domFromPos(t),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(s.safari&&i&&"false"==i.contentEditable)return Ce(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return Ce(i);if(a)return Ce(a)}}function Ce(e){return e.contentEditable="true",s.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Ee(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Te(e,t){if(t instanceof r.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Ne(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Ne(e)}function Ne(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Ae(e,t,n,o){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||r.TextSelection.between(t,n,o)}function Re(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function Me(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(s.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||s.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Ie(e,t,n,i,a){if(t<0){var c=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,l=ke(e,c);if(l&&!e.state.selection.eq(l)){var u=e.state.tr.setSelection(l);"pointer"==c?u.setMeta("pointer",!0):"key"==c&&u.scrollIntoView(),e.dispatch(u)}}else{var d=e.state.doc.resolve(t),p=d.sharedDepth(n);t=d.before(p+1),n=e.state.doc.resolve(n).after(p+1);var h,f,m=e.state.selection,v=function(e,t,n){var r=e.docView.parseRange(t,n),i=r.node,a=r.fromOffset,c=r.toOffset,l=r.from,u=r.to,d=e.root.getSelection(),p=null,h=d.anchorNode;if(h&&e.dom.contains(1==h.nodeType?h:h.parentNode)&&(p=[{node:h,offset:d.anchorOffset}],w(d)||p.push({node:d.focusNode,offset:d.focusOffset})),s.chrome&&8===e.lastKeyCode)for(var f=c;f>a;f--){var m=i.childNodes[f-1],v=m.pmViewDesc;if("BR"==m.nodeType&&!v){c=f;break}if(!v||v.size)break}var g=e.state.doc,y=e.someProp("domParser")||o.DOMParser.fromSchema(e.state.schema),b=g.resolve(l),_=null,k=y.parse(i,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:Me,context:b});if(p&&null!=p[0].pos){var S=p[0].pos,O=p[1]&&p[1].pos;null==O&&(O=S),_={anchor:S+l,head:O+l}}return{doc:k,sel:_,from:l,to:u}}(e,t,n),g=e.state.doc,y=g.slice(v.from,v.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(h=e.state.selection.to,f="end"):(h=e.state.selection.from,f="start"),e.lastKeyCode=null;var b=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,c=s.b;if("end"==o){var l=Math.max(0,i-Math.min(a,c));r-=a+l-i}if(a<i&&e.size<t.size){c=(i-=r<=i&&r>=a?i-r:0)+(c-a),a=i}else if(c<i){a=(i-=r<=i&&r>=c?i-r:0)+(a-c),c=i}return{start:i,endA:a,endB:c}}(y.content,v.doc.content,v.from,h,f);if(!b){if(!(i&&m instanceof r.TextSelection&&!m.empty&&m.$head.sameParent(m.$anchor))||e.composing||v.sel&&v.sel.anchor!=v.sel.head){if(v.sel){var k=je(e,e.state.doc,v.sel);k&&!k.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(k))}return}b={start:m.from,endA:m.to,endB:m.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof r.TextSelection&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),s.ie&&s.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>v.from&&" "==v.doc.textBetween(b.start-v.from-1,b.start-v.from+1)&&(b.start--,b.endA--,b.endB--);var S,O=v.doc.resolveNoCache(b.start-v.from),x=v.doc.resolveNoCache(b.endB-v.from),C=O.sameParent(x)&&O.parent.inlineContent;if((s.ios&&e.lastIOSEnter>Date.now()-225&&(!C||a.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!C&&O.pos<v.doc.content.size&&(S=r.Selection.findFrom(v.doc.resolve(O.pos+1),1,!0))&&S.head==x.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,_(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>b.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||De(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(De(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||De(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(g,b.start,b.endA,O,x)&&e.someProp("handleKeyDown",(function(t){return t(e,_(8,"Backspace"))})))s.android&&s.chrome&&e.domObserver.suppressSelectionUpdates();else{s.android&&!C&&O.start()!=x.start()&&0==x.parentOffset&&O.depth==x.depth&&v.sel&&v.sel.anchor==v.sel.head&&v.sel.head==b.endA&&(b.endB-=2,x=v.doc.resolveNoCache(b.endB-v.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,_(13,"Enter"))}))}),20));var E,T,N,A,R=b.start,M=b.endA;if(C)if(O.pos==x.pos)s.ie&&s.ie_version<=11&&0==O.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Se(e)}),20)),E=e.state.tr.delete(R,M),T=g.resolve(b.start).marksAcross(g.resolve(b.endA));else if(b.endA==b.endB&&(A=g.resolve(b.start))&&(N=function(e,t){for(var n,r,i,s=e.firstChild.marks,a=t.firstChild.marks,c=s,l=a,u=0;u<a.length;u++)c=a[u].removeFromSet(c);for(var d=0;d<s.length;d++)l=s[d].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",i=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",i=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var p=[],h=0;h<t.childCount;h++)p.push(i(t.child(h)));if(o.Fragment.from(p).eq(e))return{mark:r,type:n}}(O.parent.content.cut(O.parentOffset,x.parentOffset),A.parent.content.cut(A.parentOffset,b.endA-A.start()))))E=e.state.tr,"add"==N.type?E.addMark(R,M,N.mark):E.removeMark(R,M,N.mark);else if(O.parent.child(O.index()).isText&&O.index()==x.index()-(x.textOffset?0:1)){var I=O.parent.textBetween(O.parentOffset,x.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,R,M,I)})))return;E=e.state.tr.insertText(I,R,M)}if(E||(E=e.state.tr.replace(R,M,v.doc.slice(b.start-v.from,b.endB-v.from))),v.sel){var j=je(e,E.doc,v.sel);j&&!(s.chrome&&s.android&&e.composing&&j.empty&&(j.head==R||j.head==E.mapping.map(M)-1)||s.ie&&j.empty&&j.head==R)&&E.setSelection(j)}T&&E.ensureMarks(T),e.dispatch(E.scrollIntoView())}}}function je(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Ae(e,t.resolve(n.anchor),t.resolve(n.head))}function De(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function Pe(e,t){for(var n=[],r=t.content,i=t.openStart,s=t.openEnd;i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=e.someProp("clipboardSerializer")||o.DOMSerializer.fromSchema(e.state.schema),l=Ve(),u=l.createElement("div");u.appendChild(c.serializeFragment(r,{document:l}));for(var d,p=u.firstChild;p&&1==p.nodeType&&(d=Be[p.nodeName.toLowerCase()]);){for(var h=d.length-1;h>=0;h--){for(var f=l.createElement(d[h]);u.firstChild;)f.appendChild(u.firstChild);u.appendChild(f)}p=u.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:u,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function $e(e,t,n,r,i){var s,a,c=i.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||c||!n);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t,c||r)})),c)return new o.Slice(o.Fragment.from(e.state.schema.text(t)),0,0);var u=e.someProp("clipboardTextParser",(function(e){return e(t,i,r)}));u?a=u:(s=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){s.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),s=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Ve().createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=o&&Be[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),i=n.length);r.innerHTML=e;for(var s=0;s<i;s++)r=r.firstChild;return r}(n);var d=s&&s.querySelector("[data-pm-slice]"),p=d&&/^(\d+) (\d+) (.*)/.exec(d.getAttribute("data-pm-slice"));if(!a){var h=e.someProp("clipboardParser")||e.someProp("domParser")||o.DOMParser.fromSchema(e.state.schema);a=h.parseSlice(s,{preserveWhitespace:!(!l&&!p),context:i})}return a=p?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(u){return e}for(var i=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=o.Fragment.from(l.create(n[c+1],i)),s++,a++}return new o.Slice(i,s,a)}(function(e,t,n){t<e.openStart&&(e=new o.Slice(ze(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));n<e.openEnd&&(e=new o.Slice(ze(e.content,1,n,e.openEnd,0,0),e.openStart,n));return e}(a,+p[1],+p[2]),p[3]):o.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),i=void 0,s=[];if(e.forEach((function(e){if(s){var t,n=r.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&i.length&&function e(t,n,r,i,s){if(s<t.length&&s<n.length&&t[s]==n[s]){var a=e(t,n,r,i.lastChild,s+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(s==t.length-1?r.type:t[s+1]))return i.copy(i.content.append(o.Fragment.from(Le(r,t,s+1))))}}(n,i,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),i=t.contentMatchAt(t.childCount).fillBefore(o.Fragment.empty,!0);return t.copy(r.append(i))}(s[s.length-1],i.length));var a=Le(e,n);s.push(a),r=r.matchType(a.type,a.attrs),i=n}}})),s)return{v:o.Fragment.from(s)}},r=t.depth;r>=0;r--){var i=n(r);if(i)return i.v}return e}(a.content,i),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function Le(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,o.Fragment.from(e));return e}function ze(e,t,n,r,i,s){var a=t<0?e.firstChild:e.lastChild,c=a.content;return i<r-1&&(c=ze(c,t,n,r,i+1,s)),i>=n&&(c=t<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(o.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(c))}var Be={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Fe=null;function Ve(){return Fe||(Fe=document.implementation.createHTMLDocument("title"))}var qe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},We=s.ie&&s.ie_version<=11,Ke=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Ke.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Ke.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Ue=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);s.ie&&s.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Ke,We&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Ue.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},Ue.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Ue.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,qe),We&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Ue.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}We&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Ue.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Ue.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Ue.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Ue.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&Re(e)){var e;if(this.suppressingSelectionUpdates)return Se(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&m(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Ue.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Ue.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Ue.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Re(this.view)&&!this.ignoreSelectionChange(t),r=-1,o=-1,i=!1,a=[];if(this.view.editable)for(var c=0;c<e.length;c++){var l=this.registerMutation(e[c],a);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&(i=!0))}if(s.gecko&&a.length>1){var u=a.filter((function(e){return"BR"==e.nodeName}));if(2==u.length){var d=u[0],p=u[1];d.parentNode&&d.parentNode.parentNode==p.parentNode?p.remove():d.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(e){if(He)return;He=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,o,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Se(this.view))}},Ue.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){var r=e.previousSibling,o=e.nextSibling;if(s.ie&&s.ie_version<=11&&e.addedNodes.length)for(var i=0;i<e.addedNodes.length;i++){var a=e.addedNodes[i],c=a.previousSibling,l=a.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(r=c),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(o=l)}for(var u=r&&r.parentNode==e.target?p(r)+1:0,d=n.localPosFromDOM(e.target,u,-1),h=o&&o.parentNode==e.target?p(o):e.target.childNodes.length,f=0;f<e.addedNodes.length;f++)t.push(e.addedNodes[f]);return{from:d,to:n.localPosFromDOM(e.target,h,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var He=!1;var Ge={},Je={};function Ye(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Xe(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Qe(e,t)})}))}function Qe(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Ze(e){return{left:e.clientX,top:e.clientY}}function et(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function tt(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function nt(e,t,n,o,i){return et(e,"handleClickOn",t,n,o)||e.someProp("handleClick",(function(n){return n(e,t,o)}))||(i?function(e,t){if(-1==t)return!1;var n,o,i=e.state.selection;i instanceof r.NodeSelection&&(n=i.node);for(var s=e.state.doc.resolve(t),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r.NodeSelection.isSelectable(c)){o=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=o&&(tt(e,r.NodeSelection.create(e.state.doc,o),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),o=n.nodeAfter;return!!(o&&o.isAtom&&r.NodeSelection.isSelectable(o))&&(tt(e,new r.NodeSelection(n),"pointer"),!0)}(e,n))}function rt(e,t,n,r){return et(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function ot(e,t,n,o){return et(e,"handleTripleClickOn",t,n,o)||e.someProp("handleTripleClick",(function(n){return n(e,t,o)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(tt(e,r.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(t),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)tt(e,r.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!r.NodeSelection.isSelectable(s))continue;tt(e,r.NodeSelection.create(n,a),"pointer")}return!0}}(e,n)}function it(e){return pt(e)}Je.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!ct(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!s.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||_e(e,t)?t.preventDefault():Ye(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,_(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},Je.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Je.keypress=function(e,t){if(!(ct(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||s.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof r.TextSelection&&n.$from.sameParent(n.$to))){var o=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,o)}))||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}}};var st=s.mac?"metaKey":"ctrlKey";Ge.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=it(e),r=Date.now(),o="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[st]&&("singleClick"==e.lastClick.type?o="doubleClick":"doubleClick"==e.lastClick.type&&(o="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:o};var i=e.posAtCoords(Ze(t));i&&("singleClick"==o?e.mouseDown=new at(e,i,t,n):("doubleClick"==o?rt:ot)(e,i.pos,i.inside,t)?t.preventDefault():Ye(e,"pointer"))};var at=function(e,t,n,o){var i,a,c=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=o,this.selectNode=n[st],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),a=t.inside;else{var l=e.state.doc.resolve(t.pos);i=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var u=o?null:n.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d?d.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||e.state.selection instanceof r.NodeSelection&&a==e.state.selection.from)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ye(e,"pointer")};function ct(e,t){return!!e.composing||!!(s.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}at.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},at.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ze(e))),this.allowDefault||!t?Ye(this.view,"pointer"):nt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r.TextSelection)&&(t.pos==this.view.state.selection.from||t.pos==this.view.state.selection.to)?(tt(this.view,r.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Ye(this.view,"pointer")}},at.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Ye(this.view,"pointer")},Ge.touchdown=function(e){it(e),Ye(e,"pointer")},Ge.contextmenu=function(e){return it(e)};var lt=s.android?5e3:-1;function ut(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return pt(e)}),t))}function dt(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function pt(e,t){if(e.domObserver.forceFlush(),dt(e),t||e.docView.dirty){var n=ke(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}Je.compositionstart=Je.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),pt(e,!0),e.markCursor=null;else if(pt(e),s.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}o=a,i=-1}e.composing=!0}ut(e,lt)},Je.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,ut(e,20))};var ht=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function ft(e,t,n,r){var i=$e(e,t,n,e.shiftKey,e.state.selection.$from);if(!e.someProp("handlePaste",(function(t){return t(e,r,i||o.Slice.empty)}))&&i){var s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(i);e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Ge.copy=Je.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=ht?null:t.clipboardData,i=Pe(e,n.content()),s=i.dom,a=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,s),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Je.paste=function(e,t){var n=ht?null:t.clipboardData,r=n&&n.getData("text/html"),o=n&&n.getData("text/plain");n&&(r||o||n.files.length)?(ft(e,o,r,t),t.preventDefault()):function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ft(e,r.value,null,t):ft(e,r.textContent,r.innerHTML,t)}),50)}}(e,t)};var mt=function(e,t){this.slice=e,this.move=t},vt=s.mac?"altKey":"ctrlKey";for(var gt in Ge.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var o=e.state.selection,i=o.empty?null:e.posAtCoords(Ze(t));if(i&&i.pos>=o.from&&i.pos<=(o instanceof r.NodeSelection?o.to-1:o.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);if(!s||!s.node.type.spec.draggable||s==e.docView)return;e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),c=Pe(e,a),l=c.dom,u=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(ht?"Text":"text/html",l.innerHTML),ht||t.dataTransfer.setData("text/plain",u),e.dragging=new mt(a,!t[vt])}},Ge.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)},Je.dragover=Je.dragenter=function(e,t){return t.preventDefault()},Je.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var s=e.posAtCoords(Ze(t));if(s){var a=e.state.doc.resolve(s.pos);if(a){var c=n&&n.slice||$e(e,t.dataTransfer.getData(ht?"Text":"text/plain"),ht?null:t.dataTransfer.getData("text/html"),!1,a);if(e.someProp("handleDrop",(function(r){return r(e,t,c||o.Slice.empty,n&&n.move)})))t.preventDefault();else if(c){t.preventDefault();var l=c?Object(i.dropPoint)(e.state.doc,a.pos,c):a.pos;null==l&&(l=a.pos);var u=e.state.tr;n&&n.move&&u.deleteSelection();var d=u.mapping.map(l),p=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,h=u.doc;if(p?u.replaceRangeWith(d,d,c.content.firstChild):u.replaceRange(d,d,c),!u.doc.eq(h)){var f=u.doc.resolve(d);p&&r.NodeSelection.isSelectable(c.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(c.content.firstChild)?u.setSelection(new r.NodeSelection(f)):u.setSelection(Ae(e,f,u.doc.resolve(u.mapping.map(l)))),e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))}}}}}},Ge.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Se(e)}),20))},Ge.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},Ge.beforeinput=function(e,t){if(s.chrome&&s.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,_(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},Je)Ge[gt]=Je[gt];function yt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var bt=function(e,t){this.spec=t||xt,this.side=this.spec.side||0,this.toDOM=e};bt.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new kt(i-n,i-n,this)},bt.prototype.valid=function(){return!0},bt.prototype.eq=function(e){return this==e||e instanceof bt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&yt(this.spec,e.spec))};var wt=function(e,t){this.spec=t||xt,this.attrs=e};wt.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new kt(o,i,this)},wt.prototype.valid=function(e,t){return t.from<t.to},wt.prototype.eq=function(e){return this==e||e instanceof wt&&yt(this.attrs,e.attrs)&&yt(this.spec,e.spec)},wt.is=function(e){return e.type instanceof wt};var _t=function(e,t){this.spec=t||xt,this.attrs=e};_t.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new kt(o.pos-n,i.pos-n,this)},_t.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset;return o==t.from&&o+e.child(r).nodeSize==t.to},_t.prototype.eq=function(e){return this==e||e instanceof _t&&yt(this.attrs,e.attrs)&&yt(this.spec,e.spec)};var kt=function(e,t,n){this.from=e,this.to=t,this.type=n},St={spec:{configurable:!0},inline:{configurable:!0}};kt.prototype.copy=function(e,t){return new kt(e,t,this.type)},kt.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},kt.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},kt.widget=function(e,t,n){return new kt(e,e,new bt(t,n))},kt.inline=function(e,t,n,r){return new kt(e,t,new wt(n,r))},kt.node=function(e,t,n,r){return new kt(e,t,new _t(n,r))},St.spec.get=function(){return this.type.spec},St.inline.get=function(){return this.type instanceof wt},Object.defineProperties(kt.prototype,St);var Ot=[],xt={},Ct=function(e,t){this.local=e&&e.length?e:Ot,this.children=t&&t.length?t:Ot};Ct.create=function(e,t){return t.length?Mt(t,e,0,xt):Et},Ct.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},Ct.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,n,r+c,o)}},Ct.prototype.map=function(e,t,n){return this==Et||0==e.maps.length?this:this.mapInner(e,t,0,0,n||xt)},Ct.prototype.mapInner=function(e,t,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,o,i,s){for(var a=e.slice(),c=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+i||(t>=a[s]+i?a[s+1]=-1:n>=o&&(l=r-n-(t-e))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,d=0;d<a.length;d+=3)if(-1==a[d+1]){var p=n.map(a[d]+i),h=p-o;if(h<0||h>=r.content.size){u=!0;continue}var f=n.map(e[d+1]+i,-1)-o,m=r.content.findIndex(h),v=m.index,g=m.offset,y=r.maybeChild(v);if(y&&g==h&&g+y.nodeSize==f){var b=a[d+2].mapInner(n,y,p+1,a[d]+i+1,s);b!=Et?(a[d]=h,a[d+1]=f,a[d+2]=b):(a[d+1]=-2,u=!0)}else u=!0}if(u){var w=Mt(function(e,t,n,r,o,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var c=e.local[i].map(r,o,t);c?n.push(c):s.onRemove&&s.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)a(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+i+1);return n}(a,e,t||[],n,o,i,s),r,0,s);t=w.local;for(var _=0;_<a.length;_+=3)a[_+1]<0&&(a.splice(_,3),_-=3);for(var k=0,S=0;k<w.children.length;k+=3){for(var O=w.children[k];S<a.length&&a[S]<O;)S+=3;a.splice(S,0,w.children[k],w.children[k+1],w.children[k+2])}}return new Ct(t&&t.sort(It),a)}(this.children,i,e,t,n,r,o):i?new Ct(i.sort(It)):Et},Ct.prototype.add=function(e,t){return t.length?this==Et?Ct.create(e,t):this.addInner(e,t,0):this},Ct.prototype.addInner=function(e,t,n){var r,o=this,i=0;e.forEach((function(e,s){var a,c=s+n;if(a=At(t,e,c)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(e,a,c+1):r.splice(i,0,s,s+e.nodeSize,Mt(a,e,c+1,xt)),i+=3}}));var s=Nt(i?Rt(t):t,-n);return new Ct(s.length?this.local.concat(s).sort(It):this.local,r||this.children)},Ct.prototype.remove=function(e){return 0==e.length||this==Et?this:this.removeInner(e,0)},Ct.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+t,a=n[o+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=Et?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var d=0,p=void 0;d<e.length;d++)if(p=e[d])for(var h=0;h<r.length;h++)r[h].eq(p,t)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Ct(r,n):Et},Ct.prototype.forChild=function(e,t){if(this==Et)return this;if(t.isLeaf)return Ct.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof wt){var l=Math.max(i,c.from)-i,u=Math.min(s,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var d=new Ct(r.sort(It));return n?new Tt([d,n]):d}return n||Et},Ct.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof Ct)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},Ct.prototype.locals=function(e){return jt(this.localsInner(e))},Ct.prototype.localsInner=function(e){if(this==Et)return Ot;if(e.inlineContent||!this.local.some(wt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof wt||t.push(this.local[n]);return t};var Et=new Ct;Ct.empty=Et,Ct.removeOverlap=jt;var Tt=function(e){this.members=e};function Nt(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new kt(o.from+t,o.to+t,o.type))}return n}function At(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function Rt(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Mt(e,t,n,r){var o=[],i=!1;t.forEach((function(t,s){var a=At(e,t,s+n);if(a){i=!0;var c=Mt(a,t,n+s+1,r);c!=Et&&o.push(s,s+t.nodeSize,c)}}));for(var s=Nt(i?Rt(e):e,-n).sort(It),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Ct(s,o):Et}function It(e,t){return e.from-t.from||e.to-t.to}function jt(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Dt(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Dt(t,o+1,i.copy(r.to,i.to)))}}return t}function Dt(e,t,n){for(;t<e.length&&It(n,e[t])>0;)t++;e.splice(t,0,n)}function Pt(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Et&&t.push(r)})),e.cursorWrapper&&t.push(Ct.create(e.state.doc,[e.cursorWrapper.deco])),Tt.from(t)}Tt.prototype.forChild=function(e,t){if(t.isLeaf)return Ct.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=Et&&(o instanceof Tt?n=n.concat(o.members):n.push(o))}return Tt.from(n)},Tt.prototype.eq=function(e){if(!(e instanceof Tt)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Tt.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?jt(n?t:t.sort(It)):Ot},Tt.from=function(e){switch(e.length){case 0:return Et;case 1:return e[0];default:return new Tt(e)}};var $t=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ft(this),this.markCursor=null,this.cursorWrapper=null,Bt(this),this.nodeViews=Vt(this),this.docView=G(this.state.doc,zt(this),Pt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Ue(e,(function(t,n,r,o){return Ie(e,t,n,r,o)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=Ge[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Qe(e,t)||!e.editable&&t.type in Je||n(e,t)})};for(var n in Ge)t(n);s.safari&&e.dom.addEventListener("input",(function(){return null})),Xe(e)}(this),this.pluginViews=[],this.updatePluginViews()},Lt={props:{configurable:!0},root:{configurable:!0}};function zt(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[kt.node(0,e.state.doc.content.size,t)]}function Bt(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:kt.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Ft(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Vt(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}Lt.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},$t.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Xe(this),this._props=e,this.updateStateInner(e.state,!0)},$t.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},$t.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},$t.prototype.updateStateInner=function(e,t){var n=this,o=this.state,i=!1,a=!1;if(e.storedMarks&&this.composing&&(dt(this),a=!0),this.state=e,t){var c=Vt(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(c,this.nodeViews)&&(this.nodeViews=c,i=!0),Xe(this)}this.editable=Ft(this),Bt(this);var l=Pt(this),u=zt(this),d=t?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(e.doc,u,l);!p&&e.selection.eq(o.selection)||(a=!0);var h,f,v,g,y,b,w,_,k,S,O,T="preserve"==d&&a&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=o-20){t=a,n=c.top;break}}}return{refDOM:t,refTop:n,stack:C(e.dom)}}(this);if(a){this.domObserver.stop();var N=p&&(s.ie||s.chrome)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&(g=o.selection,y=e.selection,b=Math.min(g.$anchor.sharedDepth(g.head),y.$anchor.sharedDepth(y.head)),g.$anchor.start(b)!=y.$anchor.start(b));if(p){var A=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(e.doc,u,l,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=G(e.doc,u,l,this.dom,this)),A&&!this.trackWrites&&(N=!0)}N||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(h=this,f=h.docView.domFromPos(h.state.selection.anchor),v=h.root.getSelection(),m(f.node,f.offset,v.anchorNode,v.anchorOffset)))?Se(this,N):(Te(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var R=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof r.NodeSelection?x(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),R):x(this,this.coordsAtPos(e.selection.head),R))}else T&&(_=(w=T).refDOM,k=w.refTop,S=w.stack,O=_?_.getBoundingClientRect().top:0,E(S,0==O?0:O-k))},$t.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},$t.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},$t.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[e];if(null!=s&&(n=t?t(s):s))return n}},$t.prototype.hasFocus=function(){return this.root.activeElement==this.dom},$t.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(T)return e.focus(T);var t=C(e);e.focus(null==T?{get preventScroll(){return T={preventScroll:!0},!0}}:void 0),T||(T=!1,E(t,0))}(this.dom),Se(this),this.domObserver.start()},Lt.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},$t.prototype.posAtCoords=function(e){return R(this,e)},$t.prototype.coordsAtPos=function(e){return I(this,e)},$t.prototype.domAtPos=function(e){return this.docView.domFromPos(e)},$t.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},$t.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},$t.prototype.endOfTextblock=function(e,t){return B(this,t||this.state,e)},$t.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Pt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},$t.prototype.dispatchEvent=function(e){return function(e,t){Qe(e,t)||!Ge[t.type]||!e.editable&&t.type in Je||Ge[t.type](e,t)}(this,e)},$t.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties($t.prototype,Lt)},lW79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ERkP")),o=i(n("4KTy"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return r.default.createElement(o.default,s({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M14 16h-4s0-.5-1-2-2.5-3-2.5-5S7 4 12 4s5.5 3 5.5 5-1.5 3.5-2.5 5-1 2-1 2zm-4 1h4v1l-1.5 2h-1L10 18v-1z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EditorHintIcon";var c=a;t.default=c},lqNA:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=n("KsTJ").css`
  word-wrap: break-word;
  white-space: pre-wrap;
`},m23B:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("ehfC"),o=n("I9T1"),i=n("0Hbo"),s=function(e,t){return function(n){Array.isArray(e)||(e=[e]);for(var r=0,o=e.length;r<o;r++){var i=M(e[r])(n.selection);if(i){var s=m(i.pos,t)(n);if(s!==n)return s}}return n}},a=function(e){return function(t){if(p(t.selection)){var n=t.selection,i=n.$from,s=n.$to;if(e instanceof o.Fragment&&i.parent.canReplace(i.index(),i.indexAfter(),e)||i.parent.canReplaceWith(i.index(),i.indexAfter(),e.type))return f(t.replaceWith(i.pos,s.pos,e).setSelection(new r.NodeSelection(t.doc.resolve(i.pos))))}return t}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=r.Selection.findFrom(n.doc.resolve(e),t,!0);return o?n.setSelection(o):n}},l=function(e){return e.type&&e.type.spec.selectable},u=function(e,t,n){return function(e){return l(e)&&e.type.isLeaf}(e)?n.setSelection(new r.NodeSelection(n.doc.resolve(t))):c(t)(n)},d=function(e,t,n){return function(r){var o="number"==typeof t,i=r.selection.$from,c=o?r.doc.resolve(t):p(r.selection)?r.doc.resolve(i.pos+1):i,d=c.parent;if(p(r.selection)&&n&&r!==(r=a(e)(r)))return r;if(w(d)&&r!==(r=s(d.type,e)(r))){var h=l(e)?c.before(c.depth):c.pos;return u(e,h,r)}if(b(c,e)){r.insert(c.pos,e);var m=o?c.pos:l(e)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return f(u(e,m,r))}for(var v=c.depth;v>0;v--){var g=c.after(v),y=r.doc.resolve(g);if(b(y,e))return r.insert(g,e),f(u(e,g,r))}return r}},p=function(e){return e instanceof r.NodeSelection},h=function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e},f=function(e){return Object.assign(Object.create(e),e).setTime(Date.now())},m=function(e,t){return function(n){var r=n.doc.nodeAt(e),o=n.doc.resolve(e);if(v(o,t)){var i=(n=n.replaceWith(e,e+r.nodeSize,t)).selection.$from.pos-1;return n=c(Math.max(i,0),-1)(n),n=c(n.selection.$from.start())(n),f(n)}return n}},v=function(e,t){var n=e.node(e.depth);return n&&n.type.validContent(t instanceof o.Fragment?t:o.Fragment.from(t))},g=function(e){return function(t){var n=t.doc.nodeAt(e);return f(t.delete(e,e+n.nodeSize))}},y=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach((function(n){var r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)})),e.cached.tableNodeTypes=t,t},b=function(e,t){var n=e.index();return t instanceof o.Fragment?e.parent.canReplace(n,n,t):t instanceof o.Node&&e.parent.canReplaceWith(n,n,t.type)},w=function(e){return!e||"paragraph"===e.type.name&&2===e.nodeSize},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.createChecked(null,t):e.createAndFill()},k=function(e){return function(t){for(var n=i.TableMap.get(t.$anchorCell.node(-1)),r=t.$anchorCell.start(-1),o=n.cellsInRect(e),s=n.cellsInRect(n.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r)),a=0,c=o.length;a<c;a++)if(-1===s.indexOf(o[a]))return!1;return!0}},S=function(e){return e[0].map((function(t,n){return e.map((function(e){return e[n]}))}))},O=function(e){for(var t=i.TableMap.get(e),n=[],r=0;r<t.height;r++){for(var o=[],s={},a=0;a<t.width;a++){var c=t.map[r*t.width+a],l=e.nodeAt(c),u=t.findCell(c);s[c]||u.top!==r?o.push(null):(s[c]=!0,o.push(l))}n.push(o)}return n},x=function(e,t){for(var n=[],r=i.TableMap.get(e),o=0;o<r.height;o++){for(var s=e.child(o),a=[],c=0;c<r.width;c++)if(t[o][c]){var l=r.map[o*r.width+c],u=t[o][c],d=e.nodeAt(l).type.createChecked(Object.assign({},u.attrs),u.content,u.marks);a.push(d)}n.push(s.type.createChecked(s.attrs,a,s.marks))}return e.type.createChecked(e.attrs,n,e.marks)},C=function(e,t,n,r){var o=t[0]>n[0]?-1:1,i=e.splice(t[0],t.length),s=i.length%2==0?1:0,a=void 0;return a=-1===r&&1===o?n[0]-1:1===r&&-1===o?n[n.length-1]-s+1:-1===o?n[0]:n[n.length-1]-s,e.splice.apply(e,[a,0].concat(i)),e},E=function(e,t,n,r){var o="Target position is invalid, you can't move the "+r+" "+e+" to "+t+", the target can't be split. You could use tryToFit option.";if(1===(e>t?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(t))throw new Error(o)}else if(-1!==n.slice(1).indexOf(t))throw new Error(o);return!0},T=function(e){return function(t){var n=t.$from;return N(n,e)}},N=function(e,t){for(var n=e.depth;n>0;n--){var r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}},A=function(e,t){return function(n){var r=T(e)(n);if(r)return j(r.pos,t)}},R=function(e){return function(t){return!!T(e)(t)}},M=function(e){return function(t){return T((function(t){return h(e,t)}))(t)}},I=function(e){var t=e.$from.nodeBefore,n=r.Selection.findFrom(e.$from,-1);if(n&&t){var o=M(t.type)(n);return o?o.pos:n.$from.pos}},j=function(e,t){var n=t(e),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},D=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');var n=[];return e.descendants((function(e,r){if(n.push({node:e,pos:r}),!t)return!1})),n},P=function(e,t,n){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return D(e,n).filter((function(e){return t(e.node)}))},$=function(e,t,n){return P(e,(function(e){return e.type===t}),n)};var L=function(e){return T((function(e){return e.type.spec.tableRole&&"table"===e.type.spec.tableRole}))(e)},z=function(e){return e instanceof i.CellSelection},B=function(e){if(z(e)){var t=i.TableMap.get(e.$anchorCell.node(-1));return k({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},F=function(e){return function(t){var n=L(t);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=r.width-1){var o=r.cellsInRect({left:t,right:t+1,top:0,bottom:r.height});return e.concat(o.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},V=function(e){return function(t){var n=L(t);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=r.height-1){var o=r.cellsInRect({left:0,right:r.width,top:t,bottom:t+1});return e.concat(o.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},q=function(e){return function(t,n){return function(r){var o=L(r.selection),s="row"===e;if(o){var a=i.TableMap.get(o.node);if(t>=0&&t<(s?a.height:a.width)){var c=s?0:t,l=s?t:0,u=s?a.width:t+1,d=s?t+1:a.height;if(n){var p=X(r.selection.$from);if(!p)return r;var h=a.findCell(p.pos-o.start);s?(l=Math.min(l,h.top),d=Math.max(d,h.bottom)):(c=Math.min(c,h.left),u=Math.max(u,h.right))}var m=a.cellsInRect({left:c,top:l,right:s?u:c+1,bottom:s?l+1:d}),v=d-l==1?m:a.cellsInRect({left:s?c:u-1,top:s?d-1:l,right:u,bottom:d}),g=o.start+m[0],y=o.start+v[v.length-1],b=r.doc.resolve(g),w=r.doc.resolve(y);return f(r.setSelection(new i.CellSelection(w,b)))}}return r}}},W=q("column"),K=q("row"),U=function(e){return function(t){var n=L(t.selection);if(n){var r=i.TableMap.get(n.node);if(e>=0&&e<=r.height){for(var o=n.node,s=y(o.type.schema),a=n.start,c=0;c<e+1;c++)a+=o.child(c).nodeSize;var l=o.child(e),u=[],p=0;if(l.forEach((function(e){1===e.attrs.rowspan&&(p+=e.attrs.colspan,u.push(s[e.type.spec.tableRole].createAndFill(e.attrs,e.marks)))})),p<r.width){for(var h=[],f=function(n){var r=Z(n,(function(t,r){var o=t.node.attrs.rowspan;return o>1&&n+o>e}))(t);h.push.apply(h,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r))},m=e;m>=0;m--)f(m);h.length&&h.forEach((function(e){t=Y(e,{rowspan:e.node.attrs.rowspan+1})(t)}))}return d(s.row.create(l.attrs,u),a)(t)}}return t}},H=function(e){return function(t){var n=L(t.selection);if(n){var r=i.TableMap.get(n.node);if(0===e&&1===r.width)return J(t);if(e>=0&&e<=r.width)return i.removeColumn(t,{map:r,tableStart:n.start,table:n.node},e),f(t)}return t}},G=function(e){return function(t){var n=L(t.selection);if(n){var r=i.TableMap.get(n.node);if(0===e&&1===r.height)return J(t);if(e>=0&&e<=r.height)return i.removeRow(t,{map:r,tableStart:n.start,table:n.node},e),f(t)}return t}},J=function(e){for(var t=e.selection.$from,n=t.depth;n>0;n--){if("table"===t.node(n).type.spec.tableRole)return f(e.delete(t.before(n),t.after(n)))}return e},Y=function(e,t){return function(n){return e?(n.setNodeMarkup(e.pos,null,Object.assign({},e.node.attrs,t)),f(n)):n}},X=function(e){return N(e,(function(e){return e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)}))},Q=function(e){var t=X(e);if(t){var n=function(e){return N(e,(function(e){return e.type.spec.tableRole&&/table/i.test(e.type.spec.tableRole)}))}(e),r=i.TableMap.get(n.node),o=t.pos-n.start;return r.rectBetween(o,o)}},Z=function(e,t){return function(n){var r=[],o=V(e)(n.selection);if(o)for(var i=o.length-1;i>=0;i--)t(o[i],n)&&r.push(o[i]);return r}},ee=function(e){return function(t){for(var n=e,r=e,o=function(e){var o=F(e)(t.selection);o&&o.forEach((function(t){var o=t.node.attrs.colspan+e-1;o>=n&&(n=e),o>r&&(r=o)}))},i=e;i>=0;i--)o(i);var s=function(e){var n=F(e)(t.selection);n&&n.forEach((function(t){var n=t.node.attrs.colspan+e-1;t.node.attrs.colspan>1&&n>r&&(r=n)}))};for(i=e;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var c=F(i)(t.selection);c&&c.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var l=F(n)(t.selection),u=V(0)(t.selection),d=t.doc.resolve(l[l.length-1].pos),p=void 0,h=r;h>=n;h--){var f=F(h)(t.selection);if(f&&f.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===f[0].pos){p=f[0];break}if(p)break}}return{$anchor:d,$head:t.doc.resolve(p.pos),indexes:a}}},te=function(e){return function(t){for(var n=e,r=e,o=function(e){V(e)(t.selection).forEach((function(t){var o=t.node.attrs.rowspan+e-1;o>=n&&(n=e),o>r&&(r=o)}))},i=e;i>=0;i--)o(i);var s=function(e){V(e)(t.selection).forEach((function(t){var n=t.node.attrs.rowspan+e-1;t.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(i=e;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var c=V(i)(t.selection);c&&c.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var l=V(n)(t.selection),u=F(0)(t.selection),d=t.doc.resolve(l[l.length-1].pos),p=void 0,h=r;h>=n;h--){var f=V(h)(t.selection);if(f&&f.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===f[0].pos){p=f[0];break}if(p)break}}return{$anchor:d,$head:t.doc.resolve(p.pos),indexes:a}}};t.isNodeSelection=p,t.canInsert=b,t.convertTableNodeToArrayOfRows=O,t.convertArrayOfRowsToTableNode=x,t.findParentNode=T,t.findParentNodeClosestToPos=N,t.findParentDomRef=A,t.hasParentNode=R,t.findParentNodeOfType=M,t.findParentNodeOfTypeClosestToPos=function(e,t){return N(e,(function(e){return h(t,e)}))},t.hasParentNodeOfType=function(e){return function(t){return R((function(t){return h(e,t)}))(t)}},t.findParentDomRefOfType=function(e,t){return function(n){return A((function(t){return h(e,t)}),t)(n)}},t.findSelectedNodeOfType=function(e){return function(t){if(p(t)){var n=t.node,r=t.$from;if(h(e,n))return{node:n,pos:r.pos,depth:r.depth}}}},t.findPositionOfNodeBefore=I,t.findDomRefAtPos=j,t.flatten=D,t.findChildren=P,t.findTextNodes=function(e,t){return P(e,(function(e){return e.isText}),t)},t.findInlineNodes=function(e,t){return P(e,(function(e){return e.isInline}),t)},t.findBlockNodes=function(e,t){return P(e,(function(e){return e.isBlock}),t)},t.findChildrenByAttr=function(e,t,n){return P(e,(function(e){return!!t(e.attrs)}),n)},t.findChildrenByType=$,t.findChildrenByMark=function(e,t,n){return P(e,(function(e){return t.isInSet(e.marks)}),n)},t.contains=function(e,t){return!!$(e,t).length},t.findTable=L,t.isCellSelection=z,t.getSelectionRect=function(e){if(z(e)){var t=e.$anchorCell.start(-1);return i.TableMap.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},t.isColumnSelected=function(e){return function(t){if(z(t)){var n=i.TableMap.get(t.$anchorCell.node(-1));return k({left:e,right:e+1,top:0,bottom:n.height})(t)}return!1}},t.isRowSelected=function(e){return function(t){if(z(t)){var n=i.TableMap.get(t.$anchorCell.node(-1));return k({left:0,right:n.width,top:e,bottom:e+1})(t)}return!1}},t.isTableSelected=B,t.getCellsInColumn=F,t.getCellsInRow=V,t.getCellsInTable=function(e){var t=L(e);if(t){var n=i.TableMap.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(e){var n=t.node.nodeAt(e),r=e+t.start;return{pos:r,start:r+1,node:n}}))}},t.selectColumn=W,t.selectRow=K,t.selectTable=function(e){var t=L(e.selection);if(t){var n=i.TableMap.get(t.node).map;if(n&&n.length){var r=t.start+n[0],o=t.start+n[n.length-1],s=e.doc.resolve(r),a=e.doc.resolve(o);return f(e.setSelection(new i.CellSelection(a,s)))}}return e},t.emptyCell=function(e,t){return function(n){if(e){var r=y(t).cell.createAndFill().content;if(!e.node.content.eq(r))return n.replaceWith(e.pos+1,e.pos+e.node.nodeSize,r),f(n)}return n}},t.addColumnAt=function(e){return function(t){var n=L(t.selection);if(n){var r=i.TableMap.get(n.node);if(e>=0&&e<=r.width)return f(i.addColumn(t,{map:r,tableStart:n.start,table:n.node},e))}return t}},t.moveRow=function(e,t,n){return function(r){var o=Object.assign({tryToFit:!1,direction:0},n),i=L(r.selection);if(!i)return r;var s=te(e)(r).indexes,a=te(t)(r).indexes;if(s.indexOf(t)>-1)return r;!o.tryToFit&&a.length>1&&E(e,t,a,"row");var c=function(e,t,n,r){var o=O(e.node);return o=C(o,t,n,r),x(e.node,o)}(i,s,a,o.direction);return f(r).replaceWith(i.pos,i.pos+i.node.nodeSize,c)}},t.moveColumn=function(e,t,n){return function(r){var o=Object.assign({tryToFit:!1,direction:0},n),i=L(r.selection);if(!i)return r;var s=ee(e)(r).indexes,a=ee(t)(r).indexes;if(s.indexOf(t)>-1)return r;!o.tryToFit&&a.length>1&&E(e,t,a,"column");var c=function(e,t,n,r){var o=S(O(e.node));return o=C(o,t,n,r),o=S(o),x(e.node,o)}(i,s,a,o.direction);return f(r).replaceWith(i.pos,i.pos+i.node.nodeSize,c)}},t.addRowAt=function(e,t){return function(n){var r=L(n.selection);if(r){var o=i.TableMap.get(r.node),s=e-1;if(t&&s>=0)return f(U(s)(n));if(e>=0&&e<=o.height)return f(i.addRow(n,{map:o,tableStart:r.start,table:r.node},e))}return n}},t.cloneRowAt=U,t.removeColumnAt=H,t.removeRowAt=G,t.removeTable=J,t.removeSelectedColumns=function(e){var t=e.selection;if(B(t))return J(e);if(z(t)){var n=L(t);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.left&&o.right==r.width)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=s.right-1;i.removeColumn(e,s,a),a!==s.left;a--)s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=i.TableMap.get(s.table);return f(e)}}return e},t.removeSelectedRows=function(e){var t=e.selection;if(B(t))return J(e);if(z(t)){var n=L(t);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.top&&o.bottom==r.height)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=s.bottom-1;i.removeRow(e,s,a),a!==s.top;a--)s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=i.TableMap.get(s.table);return f(e)}}return e},t.removeColumnClosestToPos=function(e){return function(t){var n=Q(e);return n?H(n.left)(c(e.pos)(t)):t}},t.removeRowClosestToPos=function(e){return function(t){var n=Q(e);return n?G(n.top)(c(e.pos)(t)):t}},t.forEachCellInColumn=function(e,t,n){return function(o){var i=F(e)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=t(i[s],o);if(n){var a=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(a))}return f(o)}return o}},t.forEachCellInRow=function(e,t,n){return function(o){var i=V(e)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=t(i[s],o);if(n){var a=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(a))}}return o}},t.setCellAttrs=Y,t.createTable=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=y(e),s=i.cell,a=i.header_cell,c=i.row,l=i.table,u=[],d=[],p=0;p<n;p++)u.push(_(s,o)),r&&d.push(_(a,o));for(var h=[],f=0;f<t;f++)h.push(c.createChecked(null,r&&0===f?d:u));return l.createChecked(null,h)},t.findCellClosestToPos=X,t.findCellRectClosestToPos=Q,t.getSelectionRangeInColumn=ee,t.getSelectionRangeInRow=te,t.removeParentNodeOfType=function(e){return function(t){var n=M(e)(t.selection);return n?g(n.pos)(t):t}},t.replaceParentNodeOfType=s,t.removeSelectedNode=function(e){if(p(e.selection)){var t=e.selection.$from.pos,n=e.selection.$to.pos;return f(e.delete(t,n))}return e},t.replaceSelectedNode=a,t.setTextSelection=c,t.safeInsert=d,t.setParentNodeMarkup=function(e,t,n,r){return function(o){var i=M(e)(o.selection);return i?f(o.setNodeMarkup(i.pos,t,Object.assign({},i.node.attrs,n),r)):o}},t.selectParentNodeOfType=function(e){return function(t){if(!p(t.selection)){var n=M(e)(t.selection);if(n)return f(t.setSelection(r.NodeSelection.create(t.doc,n.pos)))}return t}},t.removeNodeBefore=function(e){var t=I(e.selection);return"number"==typeof t?g(t)(e):e}},mSFF:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return h}));var r=n("ERkP"),o=n.n(r),i=n("O94r"),s=n.n(i),a=n("J64l"),c=n("MhaC");const l=250,u=200,d=["wrap-left","wrap-right","align-end","align-start"],p=(e,t,n)=>d.indexOf(e)>-1&&n&&t&&t>.5*n;function h({layout:e,width:t,height:n,containerWidth:r=t,isLoading:i=!1,pctWidth:l,className:u,children:d,nodeType:h="mediaSingle",fullWidthMode:f,lineLength:m,blockLink:v,hasFallbackContainer:g=!0}){const y=o.a.Children.toArray(d);if(!l&&p(e,t,m)&&(l=50),l){const e=Math.ceil(Object(a.d)(l/100,m||r));n=n/t*e,t=e}const[b,w]=y;return o.a.createElement(c.b,{width:t,layout:e,containerWidth:r,pctWidth:l,fullWidthMode:f,"data-layout":e,"data-width":l,"data-node-type":h,"data-block-link":v,className:s()("rich-media-item mediaSingleView-content-wrap","image-"+e,u,{"is-loading":i,"rich-media-wrapped":"wrap-left"===e||"wrap-right"===e})},o.a.createElement(c.c,{hasFallbackContainer:g,ratio:(n/t*100).toFixed(3)},b),w)}},maP0:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("39fB");const o=e=>{const t=e.image;if(t){if("string"==typeof t)return t;if("Link"===t["@type"])return Object(r.c)(t);if("Image"===t["@type"]&&t.url)return Object(r.c)(t.url)}}},o0fs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ERkP")),o=i(n("4KTy"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return r.default.createElement(o.default,s({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><g fill-rule="evenodd"><circle fill="currentColor" cx="12" cy="12" r="10"/><circle fill="inherit" cx="12" cy="18" r="1"/><path d="M15.89 9.05a3.975 3.975 0 0 0-2.957-2.942C10.321 5.514 8.017 7.446 8 9.95l.005.147a.992.992 0 0 0 .982.904c.552 0 1-.447 1.002-.998a2.004 2.004 0 0 1 4.007-.002c0 1.102-.898 2-2.003 2H12a1 1 0 0 0-1 .987v2.014a1.001 1.001 0 0 0 2.004 0v-.782c0-.217.145-.399.35-.472A3.99 3.99 0 0 0 15.89 9.05" fill="inherit"/></g></svg>'},e))};a.displayName="QuestionCircleIcon";var c=a;t.default=c},"p+Ga":function(e,t,n){"use strict";var r=n("D57K"),o=n("ERkP"),i=n.n(o),s=n("8svN");t.a=function(e){return void 0===e&&(e={}),function(t){var n=Object(o.forwardRef)((function(n,a){var c=function(e,t){void 0===e&&(e={});var n=Object(s.a)().createAnalyticsEvent;return{patchedEventProps:Object(o.useMemo)((function(){return Object.keys(e).reduce((function(o,i){var s,a=e[i];if(!["object","function"].includes(typeof a))return o;var c=t[i],l=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var i="function"==typeof a?a(n,t):n(a);c&&"function"==typeof c&&c.apply(void 0,Object(r.__spread)(e,[i]))};return l?Object(r.__assign)(Object(r.__assign)({},o),((s={})[i]=l,s)):o}),{})}),[e,t,n])}}(e,n).patchedEventProps,l=Object(s.a)().createAnalyticsEvent;return i.a.createElement(t,Object(r.__assign)({},n,c,{createAnalyticsEvent:l,ref:a}))}));return n.displayName="WithAnalyticsEvents("+(t.displayName||t.name)+")",n}}},pZ4U:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l}));var r=n("TBbV");const o=e=>{switch(e){case"full-page":return r.a.FIXED_WIDTH;case"full-width":return r.a.FULL_WIDTH;case"comment":return r.a.COMMENT;case"chromeless":return r.a.CHROMELESS;case"mobile":return r.a.MOBILE}};var i,s,a,c;!function(e){e.TRACK="track"}(i||(i={})),function(e){e.UNSUPPORTED_CONTENT_ENCOUNTERED="unsupportedContentEncountered"}(s||(s={})),function(e){e.DOCUMENT="document"}(a||(a={})),function(e){e.UNSUPPORTED_BLOCK="unsupportedBlock",e.UNSUPPORTED_INLINE="unsupportedInline",e.UNSUPPORTED_MARK="unsupportedMark",e.UNSUPPORTED_ERROR="unsupportedUnhandled",e.UNSUPPORTED_NODE_ATTRIBUTE="unsupportedNodeAttribute"}(c||(c={}));const l="EDITOR_ANALYTICS_EVENT"},plZ8:function(e,t,n){"use strict";n("maP0");var r=n("cc+5");n.d(t,"a",(function(){return r.a}))},przm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ERkP")),o=i(n("4KTy"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return r.default.createElement(o.default,s({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M12 20a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm1.364-10.964l-2.152 4.11-1.543-1.39a1 1 0 1 0-1.338 1.487l2.5 2.25a1 1 0 0 0 1.555-.279l2.75-5.25a1 1 0 0 0-1.772-.928z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EditorSuccessIcon";var c=a;t.default=c},q83S:function(e,t,n){var r=n("treY");e.exports=function(e,t){return new Promise((function(n,o){var i=t||{};"randomize"in i||(i.randomize=!0);var s=r.operation(i);function a(e){o(e||new Error("Aborted"))}function c(e,t){e.bail?a(e):s.retry(e)?i.onRetry&&i.onRetry(e,t):o(s.mainError())}s.attempt((function(t){var r;try{r=e(a,t)}catch(o){return void c(o,t)}Promise.resolve(r).then(n).catch((function(e){c(e,t)}))}))}))}},qPpp:function(e,t,n){"use strict";n.d(t,"o",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"L",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"E",(function(){return f})),n.d(t,"z",(function(){return m})),n.d(t,"A",(function(){return v})),n.d(t,"F",(function(){return g})),n.d(t,"C",(function(){return y})),n.d(t,"G",(function(){return b})),n.d(t,"D",(function(){return w})),n.d(t,"B",(function(){return _})),n.d(t,"W",(function(){return k})),n.d(t,"I",(function(){return S})),n.d(t,"K",(function(){return O})),n.d(t,"J",(function(){return x})),n.d(t,"r",(function(){return C})),n.d(t,"w",(function(){return E})),n.d(t,"n",(function(){return T})),n.d(t,"l",(function(){return N})),n.d(t,"m",(function(){return A})),n.d(t,"U",(function(){return R})),n.d(t,"N",(function(){return M})),n.d(t,"O",(function(){return I})),n.d(t,"S",(function(){return j})),n.d(t,"T",(function(){return D})),n.d(t,"p",(function(){return P})),n.d(t,"g",(function(){return $})),n.d(t,"X",(function(){return L})),n.d(t,"q",(function(){return z})),n.d(t,"R",(function(){return B})),n.d(t,"d",(function(){return F})),n.d(t,"s",(function(){return V})),n.d(t,"x",(function(){return q})),n.d(t,"P",(function(){return W})),n.d(t,"Q",(function(){return K})),n.d(t,"v",(function(){return U})),n.d(t,"u",(function(){return H})),n.d(t,"M",(function(){return G})),n.d(t,"eb",(function(){return J})),n.d(t,"bb",(function(){return Y})),n.d(t,"Z",(function(){return X})),n.d(t,"Y",(function(){return Q})),n.d(t,"t",(function(){return Z})),n.d(t,"V",(function(){return ee})),n.d(t,"ab",(function(){return te})),n.d(t,"b",(function(){return ne})),n.d(t,"a",(function(){return re})),n.d(t,"H",(function(){return oe})),n.d(t,"cb",(function(){return ie})),n.d(t,"fb",(function(){return se})),n.d(t,"db",(function(){return ae})),n.d(t,"y",(function(){return ce}));var r=n("3IV/"),o=n("BMbf");const i=16,s=Object(o.d)(),a=(r.N500,r.B100,r.N40),c=(r.N500,r.N0,r.N40),l=(r.N900,r.N700,r.B50,r.B400,r.N20,"12px"),u=r.R50,d=(r.R50,"rgba(255, 189, 173, 0.5)"),p=r.R300,h=r.R400,f=r.B300,m=r.B50,v=r.B75,g=1,y=`${g}px solid ${f}`,b=`0 0 0 ${g}px ${f}`,w=(r.B400,2),_=.3,k=1,S=2,O=11,x=O+1,C=9999,E=o.i.blanket(),T=o.i.layer(),N=T+10,A=T+5,R=(r.N100,11),M=r.N50,I=r.DN70,j=r.N20,D=r.DN50,P=(r.N20,r.B75,r.B100,r.B300,r.R50,r.R300,r.R75,680),$=760,L=960,z=1800,B=42,F=96,V=32,q=720,W=48,K=128,U=12,H=4,G="cubic-bezier(0.15, 1, 0.3, 1)",J=1024,Y=1.33,X=99*k,Q=1.5*Object(o.h)(),Z=1.714,ee=(r.N30,2),te="1.143rem",ne=680,re=480,oe="ak-editor-selected-node",ie=({theme:e})=>e&&e.baseFontSize?e.baseFontSize:Object(o.f)(),se=e=>({theme:t})=>ie({theme:t})*e,ae=(e=!1)=>e?P:$,ce=768},qkXo:function(e,t,n){"use strict";var r=n("EHE7"),o=n("ERkP");function i(e){const{store:t,prefetchStore:n,connections:i}=Object(r.d)(),{dispatch:s,getState:a}=t,{client:c}=i;return Object(o.useCallback)(async()=>{const t=n[e],r=a()[e];if(!t&&!r){n[e]=!0;try{const t=await c.prefetchData(e);t&&s({type:"resolved",url:e,payload:t})}catch(o){}}},[n,e,a,c,s])}var s=n("/J5f");var a=n("Rqxe");const c=(e,{url:t,hasExpired:n},r,o)=>({type:e,url:t,hasExpired:n,payload:r,error:o});var l=n("zIJM"),u=n("GoRf"),d=n("ycrU"),p=n("6p1r");var h=n("v0vx");function f(e,t,n){const i=function(e){const{store:t}=Object(r.d)(),[n,i]=Object(o.useState)(Object(s.h)(t,e));return Object(o.useEffect)(()=>{const n=t.subscribe(()=>{i(Object(s.h)(t,e))});return()=>n()},[e,t]),n}(t),f=(e=>{const t=Object(o.useMemo)(()=>({authEvent:(t,n,r)=>e(Object(h.l)(t,n,r)),authAlternateAccountEvent:(t,n,r)=>e(Object(h.k)(t,n,r)),cardClickedEvent:(t,n,r)=>e(Object(h.m)(t,n,r)),actionClickedEvent:(t,n,r)=>e(Object(h.j)(t,n,r)),closedAuthEvent:(t,n,r)=>e(Object(h.n)(t,n,r)),renderSuccessEvent:(t,n,r)=>e(Object(h.p)(t,n,r)),renderFailedEvent:(t,n,r)=>e(Object(h.o)(t,n,r))}),[e]),n=Object(o.useMemo)(()=>({resolvedEvent:(t,n,r,o)=>e(Object(h.g)(t,n,r,o)),unresolvedEvent:(t,n,r,o,i)=>e(Object(h.q)(t,n,r,o,i)),invokeSucceededEvent:(t,n,r,o)=>e(Object(h.f)(t,n,r,o)),invokeFailedEvent:(t,n,r,o,i)=>e(Object(h.e)(t,n,r,o,i)),connectSucceededEvent:(t,n)=>e(Object(h.b)(t,n)),connectFailedEvent:(t,n,r)=>e(Object(h.a)(t,n,r)),instrument:(t,n,r,o,i,s)=>e(Object(h.d)(t,n,r,o,i,s))}),[e]),r=Object(o.useMemo)(()=>({appAccountConnected:(t,n)=>e(Object(h.i)(t,n))}),[e]),i=Object(o.useMemo)(()=>({authPopupEvent:(t,n)=>e(Object(h.h)(t,n))}),[e]);return Object(o.useMemo)(()=>({ui:t,operational:n,track:r,screen:i}),[t,n,r,i])})(n),m=((e,t,n)=>{const{store:i,connections:h,config:f}=Object(r.d)(),{getState:m,dispatch:v}=i,{details:g,lastUpdatedAt:y,status:b}=m()[t]||{status:"pending",lastUpdatedAt:Date.now(),details:void 0},w="disabled"!==f.authFlow,_=!(!g||!g.data),k=Date.now()-y>=f.maxAge,S=Object(o.useCallback)((e,t)=>{if("fatal"===t.kind){if(!_&&"resolved"!==b)throw t;_&&v(c(l.d,{url:e},g))}else"auth"===t.kind?v(c(l.d,{url:e},Object(p.b)())):"fallback"===t.kind?v(c(l.b,{url:e},void 0,t)):v(c(l.a,{url:e},void 0,t))},[_,b,v,g]),O=Object(o.useCallback)((e,t)=>{const n=new URL(e).hostname,r=t?Object(s.g)(t):"fatal";"unauthorized"!==r||w?"fatal"!==r?v(c(l.d,{url:e,hasExpired:k&&!_},t)):S(e,new d.a("fatal",n,l.f)):S(e,new d.a("fallback",n,l.g))},[v,S,_,k,w]),x=Object(o.useCallback)(async(e=t,n=!1)=>{if(n||k||!_)return h.client.fetchData(e).then(t=>O(e,t)).catch(t=>S(e,t))},[t,_,k,h.client,O,S]),C=Object(o.useCallback)(()=>(g||v(c(l.c,{url:t})),x()),[t,x,g,v]),E=Object(o.useCallback)(()=>{const e=Object(s.c)(g);e?Object(s.a)(e,m()).map(e=>x(e,!0)):x(t,!0)},[t,g,m,x]),T=Object(o.useCallback)(e=>{const t=Object(s.c)(g),r=Object(s.d)(g),o=Object(s.f)(g);"unauthorized"===b&&n.ui.authEvent(e,t,r),"forbidden"===b&&n.ui.authAlternateAccountEvent(e,t,r),o.length>0&&(n.screen.authPopupEvent(t,r),Object(a.a)(o[0].url).then(()=>{n.track.appAccountConnected(t,r),n.operational.connectSucceededEvent(t,r),E()},o=>{n.operational.connectFailedEvent(t,r,o.type),"auth_window_closed"===o.type&&n.ui.closedAuthEvent(e,t,r),E()}))},[n.ui,n.screen,n.track,n.operational,E,g,b]),N=Object(o.useCallback)(async(t,r)=>{const{key:o,action:i}=t,s=t.source||r,a=`${e}-${i.type}`;u.e(a,"pending");try{let r;return n.ui.actionClickedEvent(o,i.type,s),r="client"===t.type?await t.action.promise():await h.client.postData(t),u.e(a,"resolved"),n.operational.invokeSucceededEvent(e,o,i.type,s),r}catch(c){throw u.e(a,"errored"),n.operational.invokeFailedEvent(e,o,i.type,s,c.message),c}},[e,n.ui,n.operational,h.client]);return Object(o.useMemo)(()=>({register:C,reload:E,authorize:T,invoke:N}),[C,E,T,N])})(e,t,f),v=(()=>{const e=Object(r.d)();if(e)return e.config})(),[,g]=Object(o.useState)();return Object(o.useEffect)(()=>{m.register().catch(e=>g(()=>{throw e}))},[t]),{state:i,actions:m,config:v,analytics:f}}n.d(t,"a",(function(){return r.b})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return i}))},s5AU:function(e,t,n){"use strict";var r;r=class extends Error{},e.exports=r},sPpT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ERkP")),o=i(n("4KTy"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return r.default.createElement(o.default,s({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M12 20a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-8.5a1 1 0 0 0-1 1V15a1 1 0 0 0 2 0v-2.5a1 1 0 0 0-1-1zm0-1.125a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EditorInfoIcon";var c=a;t.default=c},t1jd:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("KsTJ"),o=n("L21+");const i=r.css`
  & h1 {
    ${o.h700};
    margin-bottom: 0;
    margin-top: 1.667em;
  }

  & h2 {
    ${o.h600};
    margin-top: 1.8em;
    margin-bottom: 0;
  }

  & h3 {
    ${o.h500};
    margin-top: 2em;
    margin-bottom: 0;
  }

  & h4 {
    ${o.h400};
    margin-top: 1.357em;
  }

  & h5 {
    ${o.h300};
    margin-top: 1.667em;
    text-transform: none;
  }

  & h6 {
    ${o.h100};
    margin-top: 1.455em;
    text-transform: none;
  }
`},tPYt:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){asyncGeneratorStep(i,r,o,s,a,"next",e)}function a(e){asyncGeneratorStep(i,r,o,s,a,"throw",e)}s(void 0)}))}}var Events,RedisConnection,Scripts,parser;parser=__webpack_require__("Ow5E"),Events=__webpack_require__("wxq6"),Scripts=__webpack_require__("TdYm"),RedisConnection=function(){class RedisConnection{constructor(options={}){parser.load(options,this.defaults,this),null==this.Redis&&(this.Redis=eval("require")("redis")),null==this.Events&&(this.Events=new Events(this)),this.terminated=!1,null==this.client&&(this.client=this.Redis.createClient(this.clientOptions)),this.subscriber=this.client.duplicate(),this.limiters={},this.shas={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then(()=>this._loadScripts()).then(()=>({client:this.client,subscriber:this.subscriber}))}_setup(e,t){return e.setMaxListeners(0),new this.Promise((n,r)=>(e.on("error",e=>this.Events.trigger("error",e)),t&&e.on("message",(e,t)=>{var n;return null!=(n=this.limiters[e])?n._store.onMessage(e,t):void 0}),e.ready?n():e.once("ready",n)))}_loadScript(e){return new this.Promise((t,n)=>{var r;return r=Scripts.payload(e),this.client.multi([["script","load",r]]).exec((r,o)=>null!=r?n(r):(this.shas[e]=o[0],t(o[0])))})}_loadScripts(){return this.Promise.all(Scripts.names.map(e=>this._loadScript(e)))}__runCommand__(e){var t=this;return _asyncToGenerator((function*(){return yield t.ready,new t.Promise((n,r)=>t.client.multi([e]).exec_atomic((function(e,t){return null!=e?r(e):n(t[0])})))}))()}__addLimiter__(e){return this.Promise.all([e.channel(),e.channel_client()].map(t=>new this.Promise((n,r)=>{var o;return o=r=>{if(r===t)return this.subscriber.removeListener("subscribe",o),this.limiters[t]=e,n()},this.subscriber.on("subscribe",o),this.subscriber.subscribe(t)})))}__removeLimiter__(e){var t=this;return this.Promise.all([e.channel(),e.channel_client()].map(function(){var e=_asyncToGenerator((function*(e){return t.terminated||(yield new t.Promise((n,r)=>t.subscriber.unsubscribe(e,(function(t,o){return null!=t?r(t):o===e?n():void 0})))),delete t.limiters[e]}));return function(t){return e.apply(this,arguments)}}()))}__scriptArgs__(e,t,n,r){var o;return o=Scripts.keys(e,t),[this.shas[e],o.length].concat(o,n,r)}__scriptFn__(e){return this.client.evalsha.bind(this.client)}disconnect(e=!0){var t,n,r,o;for(t=0,r=(o=Object.keys(this.limiters)).length;t<r;t++)n=o[t],clearInterval(this.limiters[n]._store.heartbeat);return this.limiters={},this.terminated=!0,this.client.end(e),this.subscriber.end(e),this.Promise.resolve()}}return RedisConnection.prototype.datastore="redis",RedisConnection.prototype.defaults={Redis:null,clientOptions:{},client:null,Promise,Events:null},RedisConnection}.call(void 0),module.exports=RedisConnection},tYPF:function(e,t,n){"use strict";var r,o,i;i=n("Ow5E"),o=n("wxq6"),r=function(){class e{constructor(e={}){this.options=e,i.load(this.options,this.defaults,this),this.Events=new o(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}_resetPromise(){return this._promise=new this.Promise((e,t)=>this._resolve=e)}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger("batch",this._arr),this._arr=[],this._resetPromise()}add(e){var t;return this._arr.push(e),t=this._promise,this._arr.length===this.maxSize?this._flush():null!=this.maxTime&&1===this._arr.length&&(this._timeout=setTimeout(()=>this._flush(),this.maxTime)),t}}return e.prototype.defaults={maxTime:null,maxSize:null,Promise},e}.call(void 0),e.exports=r},tdsH:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("F/E8");const o=new Map;function i(e){Object(r.a)()&&(performance.mark(e+"::start"),o.set(e,performance.now()))}function s(e,t){if(!Object(r.a)())return;performance.mark(e+"::end");const n=t?o.get(e):void 0;try{performance.measure(e,e+"::start",e+"::end")}catch(i){}finally{if(t){const r=performance.getEntriesByName(e).pop();r?t(r.duration,r.startTime):n&&t(performance.now()-n,n)}a(e)}}function a(e){Object(r.a)()&&(o.delete(e),performance.clearMarks(e+"::start"),performance.clearMarks(e+"::end"),performance.clearMeasures(e))}},treY:function(e,t,n){e.exports=n("csOR")},tv4J:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ERkP")),o=i(n("4KTy"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=function(e){return r.default.createElement(o.default,s({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M12 5a7 7 0 1 1 0 14 7 7 0 0 1 0-14zm0 12.5c3.033 0 5.5-2.467 5.5-5.5S15.033 6.5 12 6.5A5.506 5.506 0 0 0 6.5 12c0 3.033 2.467 5.5 5.5 5.5zm-1.5-6a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm3 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm.27 1.583a.626.626 0 0 1 .932.834A3.63 3.63 0 0 1 12 15.125a3.63 3.63 0 0 1-2.698-1.204.625.625 0 0 1 .93-.835c.901 1.003 2.639 1.003 3.538-.003z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};a.displayName="EditorEmojiIcon";var c=a;t.default=c},u55h:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var r=n("ERkP"),o=n.n(r),i=n("U6Bd"),s=n("KsTJ"),a=n("clDp");function c(e=0){return e>=1266&&e<2146?"M":e>=2146?"L":"S"}function l(e=0){return{width:e,breakpoint:c(e)}}const u=o.a.createContext(l()),{Provider:d,Consumer:p}=u,h=o.a.memo(s.default.div`
  position: relative;
  width: 100%;
`);class f extends o.a.Component{constructor(e){super(e),this.state={width:0},this.setWidth=Object(i.a)(e=>{Math.abs(this.state.width-e)<30||this.setState({width:e})}),this.state.width=document.body.offsetWidth}render(){return o.a.createElement(h,{className:this.props.className},o.a.createElement(a.a,{setWidth:this.setWidth,offscreen:!0}),o.a.createElement(d,{value:l(this.state.width)},this.props.children))}}},uCVf:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("KsTJ"),o=n("qPpp"),i=n("akq8"),s=n("DFGU");const a=r.css`
  &
    .${s.b.RIGHT_SHADOW}::before,
    .${s.b.RIGHT_SHADOW}::after,
    .${s.b.LEFT_SHADOW}::before,
    .${s.b.LEFT_SHADOW}::after {
    display: none;
    position: absolute;
    pointer-events: none;
    z-index: ${o.I};
    width: ${8}px;
    content: '';
    /* Scrollbar is outside the content in IE, inset in other browsers. */
    height: calc(100%);
  }

  & .${s.b.RIGHT_SHADOW}, .${s.b.LEFT_SHADOW} {
    position: relative;
  }

  & .${s.b.LEFT_SHADOW}::before {
    background: linear-gradient(to left, rgba(99, 114, 130, 0) 0, ${i.N40A} 100%);
    top: 0px;
    left: 0;
    display: block;
  }

  & .${s.b.RIGHT_SHADOW}::after {
    background: linear-gradient(
      to right,
      rgba(99, 114, 130, 0) 0,
      ${i.N40A} 100%
    );
    left: calc(100% - ${8}px);
    top: 0px;
    display: block;
  }
`},uTum:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=n("KsTJ").css`
  /**
   * We need to remove margin-top from first item
   * inside doc, tableCell, tableHeader, blockquote, etc.
   */
  *:not(.fabric-editor-block-mark) >,
  /* For nested block marks */
  *:not(.fabric-editor-block-mark) > div.fabric-editor-block-mark:first-child {
    p,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      &:first-child {
        margin-top: 0;
      }
    }
  }
`},v0vx:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"g",(function(){return c})),n.d(t,"q",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"i",(function(){return f})),n.d(t,"l",(function(){return m})),n.d(t,"k",(function(){return v})),n.d(t,"m",(function(){return g})),n.d(t,"j",(function(){return y})),n.d(t,"n",(function(){return b})),n.d(t,"h",(function(){return w})),n.d(t,"p",(function(){return _})),n.d(t,"o",(function(){return k})),n.d(t,"d",(function(){return S}));var r=n("Czhu"),o=n("UNbK"),i=n("GoRf");const s={componentName:"smart-cards",packageName:o.a,packageVersion:o.b},a=(e,t)=>{t&&t(e).fire("media")},c=(e,t,n,o)=>({action:"resolved",actionSubject:"smartLink",eventType:"operational",attributes:Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({id:e},s),t?{definitionId:t}:{}),n?{extensionKey:n}:{}),o?{resourceType:o}:{})}),l=(e,t,n,o,i,a)=>({action:"unresolved",actionSubject:"smartLink",eventType:"operational",attributes:Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({id:e},s),n?{definitionId:n}:{}),o?{extensionKey:o}:{}),i?{resourceType:i}:{}),{},{reason:t,error:a?{message:a.message,kind:a.kind,type:a.type}:void 0})}),u=(e,t,n,o)=>{const a=Object(i.d)(e,"resolved")||{duration:void 0};return{action:"resolved",actionSubject:"smartLinkAction",eventType:"operational",attributes:Object(r.a)(Object(r.a)({},s),{},{id:e,actionType:n,display:o,definitionId:t,duration:a.duration})}},d=(e,t,n,o,a)=>{const c=Object(i.d)(e,"errored")||{duration:void 0};return{action:"unresolved",actionSubject:"smartLinkAction",eventType:"operational",attributes:Object(r.a)(Object(r.a)({},s),{},{id:e,actionType:n,display:o,definitionId:t,duration:c.duration,reason:a})}},p=(e,t)=>({action:"connectSucceeded",actionSubject:"smartLink",eventType:"operational",attributes:Object(r.a)(Object(r.a)(Object(r.a)({},s),e?{definitionId:e}:{}),t?{extensionKey:t}:{})}),h=(e,t,n)=>({action:"connectFailed",actionSubject:"smartLink",actionSubjectId:n,eventType:"operational",attributes:Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},s),n?{reason:n}:{}),e?{definitionId:e}:{}),t?{extensionKey:t}:{})}),f=(e,t)=>({action:"connected",actionSubject:"applicationAccount",eventType:"track",attributes:Object(r.a)(Object(r.a)(Object(r.a)({},s),e?{definitionId:e}:{}),t?{extensionKey:t}:{})}),m=(e,t,n)=>({action:"clicked",actionSubject:"button",actionSubjectId:"connectAccount",eventType:"ui",attributes:Object(r.a)(Object(r.a)({},s),{},{definitionId:t||"",extensionKey:n||"",display:e})}),v=(e,t,n)=>({action:"clicked",actionSubject:"smartLink",actionSubjectId:"tryAnotherAccount",eventType:"ui",attributes:Object(r.a)(Object(r.a)({},s),{},{definitionId:t||"",extensionKey:n||"",display:e})}),g=(e,t,n)=>({action:"clicked",actionSubject:"smartLink",eventType:"ui",attributes:Object(r.a)(Object(r.a)({},s),{},{definitionId:t||"",extensionKey:n||"",display:e})}),y=(e,t,n)=>({action:"clicked",actionSubject:"smartLinkAction",eventType:"ui",attributes:Object(r.a)(Object(r.a)({},s),{},{display:n,definitionId:e,actionType:t})}),b=(e,t,n)=>({action:"closed",actionSubject:"consentModal",eventType:"ui",attributes:Object(r.a)(Object(r.a)({},s),{},{definitionId:t||"",extensionKey:n||"",display:e})}),w=(e,t)=>({actionSubject:"consentModal",eventType:"screen",attributes:Object(r.a)(Object(r.a)({},s),{},{definitionId:e||"",extensionKey:t||""})}),_=(e,t,n)=>({action:"renderSuccess",actionSubject:"smartLink",eventType:"ui",attributes:Object(r.a)(Object(r.a)({},s),{},{definitionId:t||"",extensionKey:n||"",display:e})}),k=(e,t,n)=>({actionSubject:"smartLink",action:"renderFailed",eventType:"ui",attributes:{error:t,errorInfo:n,display:e}}),S=(e,t,n,o,s,a)=>{const u=Object(i.d)(e,t)||{duration:void 0};if("resolved"===t){const t=c(e,n,o,s);return Object(r.a)(Object(r.a)({},t),{},{attributes:Object(r.a)(Object(r.a)({},t.attributes),{},{duration:u.duration})})}{const i=l(e,t,n,o,s,a);return Object(r.a)(Object(r.a)({},i),{},{attributes:Object(r.a)(Object(r.a)({},i.attributes),{},{duration:u.duration})})}}},wdxN:function(e,t,n){"use strict";var r=n("6Laz");const o=n("/GYj"),i=new Set(Object.keys(o).filter(e=>o[e]&&"inline"===o[e].group));var s=n("iXHT"),a=n("25UG"),c=n("ArAF");n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return b}));const l=["link","em","strong","textColor","strike","subsup","underline","code","confluenceInlineComment","annotation"],u=e=>[...e].sort((e,t)=>l.indexOf(e.type.name)-l.indexOf(t.type.name)),d=(e,t)=>!(!e||!t)&&e.eq(t),p=(e,t=r.a,n="final")=>{const o=b(e,t,n);return"doc"===o.type?(o.content=h(o.content),o):null},h=(e=[])=>e.map(e=>i.has(e.type)?{type:"paragraph",content:[e]}:e),f=/^#[0-9a-fA-F]{6}$/,m=/^\//,v=(e,t=r.a,n="final")=>{const o=[];let i=!1;for(let r=0;r<e.content.length;r++){const s=e.content[r],a=!(s.content&&s.content.length);r>0&&(i?o.push({type:"text",text:" "}):o.push({type:"hardBreak"})),a?o.push(b(s,t,n)):o.push(...v(s,t,n)),i=a}return o},g=e=>{const{attrs:t={},content:n,text:r,type:o}=e;if(!n||!n.length){const e={type:"text",text:r||t.text||`[${o}]`},{textUrl:n}=t;return n&&Object(s.a)(n)&&(e.marks=[{type:"link",attrs:{href:n}}]),e}return{type:"unknownBlock",content:v(e)}},y=(e,t="final")=>e&&e.length>0?e.reduce((e,n)=>{const r=w(n,t);return r&&e.push(r),e},[]):e,b=(e,t=r.a,n="final")=>{const{attrs:o,marks:i,text:l,type:u}=e;let{content:d}=e;const p={attrs:o,marks:i,text:l,type:u};if(d&&(p.content=d=((e,t=r.a,n="final")=>e.map(e=>b(e,t,n)))(d,t,n)),!t.nodes[u])return g(p);if(u)switch(u){case"doc":{const{version:t}=e;if(t&&d&&d.length)return{type:u,content:d};break}case"codeBlock":return d&&(d=d.reduce((e,t)=>("text"===t.type&&e.push({type:t.type,text:t.text}),e),[])),o&&o.language?{type:u,attrs:o,content:d,marks:i}:{type:u,content:d,marks:i};case"date":if(o&&o.timestamp)return{type:u,attrs:o};break;case"status":if(o&&o.text&&o.color)return{type:u,attrs:o};break;case"emoji":if(o&&o.shortName)return{type:u,attrs:o};break;case"inlineExtension":case"extension":if(o&&o.extensionType&&o.extensionKey)return{type:u,attrs:o};break;case"inlineCard":case"blockCard":if(o&&(o.url&&Object(s.a)(o.url)||o.data&&o.data.url&&Object(s.a)(o.data.url)))return{type:u,attrs:o};break;case"embedCard":if(o&&(o.url&&Object(s.a)(o.url)||o.data&&o.data.url&&Object(s.a)(o.data.url))&&o.layout)return{type:u,attrs:o};break;case"bodiedExtension":if(o&&o.extensionType&&o.extensionKey&&d)return{type:u,attrs:o,content:d};break;case"hardBreak":return{type:u};case"caption":if(d&&"stage0"===n)return{type:u,content:d};break;case"media":{let e="",t="",n=[],r="";if(o){const{id:i,collection:s,type:a,url:c}=o;e=i,t=a,n=s,r=c}if("external"===t&&r){const e={type:t,url:r,width:o.width,height:o.height};return o.alt&&(e.alt=o.alt),{type:u,attrs:e}}if(e&&t){const r={type:t,id:e,collection:n};return o.width&&(r.width=o.width),o.height&&(r.height=o.height),o.alt&&(r.alt=o.alt),{type:u,attrs:r}}break}case"mediaGroup":if(Array.isArray(d)&&!d.some(e=>"media"!==e.type))return{type:u,content:d};break;case"mediaSingle":{const e=Array.isArray(d)&&1===d.length&&"media"===d[0].type,t=Array.isArray(d)&&2===d.length&&"media"===d[0].type&&"caption"===d[1].type;if(e||t)return{type:u,attrs:o,content:d,marks:y(i,n)};break}case"mention":{let e,t,n="";if(o){const{text:r,displayName:i,id:s,accessLevel:a}=o;n=r||i,e=s,t=a}if(n||(n=l||"@unknown"),n&&e){const r={type:u,attrs:{id:e,text:n,accessLevel:""}};return t&&(r.attrs.accessLevel=t),r}break}case"paragraph":return i?{type:u,content:d||[],marks:i}:{type:u,content:d||[]};case"rule":return{type:u};case"text":{let{marks:e}=p;if(l)return e?{type:u,text:l,marks:y(e,n)}:{type:u,text:l};break}case"heading":if(o){const{level:e}=o,t=(e,t,n)=>e>=t&&e<=n;if(e&&t(e,1,6))return i?{type:u,content:d,marks:i,attrs:{level:e}}:{type:u,content:d,attrs:{level:e}}}break;case"bulletList":if(d)return{type:u,content:d};break;case"orderedList":if(d)return{type:u,content:d,attrs:{order:o&&o.order}};break;case"listItem":if(d)return{type:u,content:h(d)};break;case"blockquote":if(d)return{type:u,content:d};break;case"panel":if(o&&d){const{panelType:e,panelIcon:t,panelColor:r}=o;if(Object.values(a.a).includes(e)){return{type:u,attrs:"stage0"===n?{panelType:e,panelIcon:t,panelColor:r}:{panelType:e},content:d}}}break;case"layoutSection":if(d)return{type:u,marks:i,content:d};break;case"layoutColumn":if(o&&d&&o.width>0&&o.width<=100)return{type:u,content:d,attrs:o};break;case"decisionList":return{type:u,content:d,attrs:{localId:o&&o.localId||Object(c.a)()}};case"decisionItem":return{type:u,content:d,attrs:{localId:o&&o.localId||Object(c.a)(),state:o&&o.state||"DECIDED"}};case"taskList":return{type:u,content:d,attrs:{localId:o&&o.localId||Object(c.a)()}};case"taskItem":return{type:u,content:d,attrs:{localId:o&&o.localId||Object(c.a)(),state:o&&o.state||"TODO"}};case"table":if(Array.isArray(d)&&d.length>0&&!d.some(e=>"tableRow"!==e.type))return{type:u,content:d,attrs:o};break;case"tableRow":if(Array.isArray(d)&&d.length>0&&!d.some(e=>"tableCell"!==e.type&&"tableHeader"!==e.type))return{type:u,content:d};break;case"tableCell":case"tableHeader":if(d){const e={};return o&&(o.colspan&&o.colspan>1&&(e.colspan=o.colspan),o.rowspan&&o.rowspan>1&&(e.rowspan=o.rowspan),o.background&&(e.background=o.background),o.colwidth&&Array.isArray(o.colwidth)&&(e.colwidth=o.colwidth)),{type:u,content:h(d),attrs:o?e:void 0}}break;case"image":if(o&&o.src)return{type:u,attrs:o};break;case"placeholder":if(o&&void 0!==o.text)return{type:u,attrs:o};break;case"expand":case"nestedExpand":return{type:u,attrs:o,content:d,marks:i}}return g(p)},w=(e,t="final")=>{const{attrs:n,type:r}=e;if(r)switch(r){case"code":case"em":return{type:r};case"link":if(n){const{href:e,url:t,__confluenceMetadata:o}=n;let i=e||t;i&&-1===i.indexOf(":")&&!m.test(i)&&(i="http://"+i);const a={href:i};if(o&&(a.__confluenceMetadata=o),i&&Object(s.a)(i))return{type:r,attrs:a}}break;case"strike":case"strong":return{type:r};case"subsup":if(n&&n.type){const e=n.type;if((e=>"sub"===e||"sup"===e)(e))return{type:r,attrs:{type:e}}}break;case"textColor":if(n&&f.test(n.color))return{type:r,attrs:n};break;case"underline":return{type:r};case"annotation":return{type:r,attrs:n}}if("stage0"===t)switch(r){case"confluenceInlineComment":return{type:r,attrs:n}}return null}},wxq6:function(e,t,n){"use strict";function r(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,c,"next",e)}function c(e){r(s,o,i,a,c,"throw",e)}a(void 0)}))}}var i;i=class{constructor(e){if(this.instance=e,this._events={},null!=this.instance.on||null!=this.instance.once||null!=this.instance.removeAllListeners)throw new Error("An Emitter already exists for this object");this.instance.on=(e,t)=>this._addListener(e,"many",t),this.instance.once=(e,t)=>this._addListener(e,"once",t),this.instance.removeAllListeners=(e=null)=>null!=e?delete this._events[e]:this._events={}}_addListener(e,t,n){var r;return null==(r=this._events)[e]&&(r[e]=[]),this._events[e].push({cb:n,status:t}),this.instance}listenerCount(e){return null!=this._events[e]?this._events[e].length:0}trigger(e,...t){var n=this;return o((function*(){var r,i;try{if("debug"!==e&&n.trigger("debug","Event triggered: "+e,t),null==n._events[e])return;return n._events[e]=n._events[e].filter((function(e){return"none"!==e.status})),i=n._events[e].map(function(){var e=o((function*(e){var r,o;if("none"!==e.status){"once"===e.status&&(e.status="none");try{return"function"==typeof(null!=(o="function"==typeof e.cb?e.cb(...t):void 0)?o.then:void 0)?yield o:o}catch(i){return r=i,n.trigger("error",r),null}}}));return function(t){return e.apply(this,arguments)}}()),(yield Promise.all(i)).find((function(e){return null!=e}))}catch(s){return r=s,n.trigger("error",r),null}}))()}},e.exports=i},xN7r:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("KsTJ"),o=n("qPpp");const i=r.css`
  [data-layout-section] {
    display: flex;
    flex-direction: row;
    & > * {
      flex: 1;
      min-width: 0;
    }

    @media screen and (max-width: ${o.eb}px) {
      flex-direction: column;
    }
  }
`},ycrU:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r extends Error{constructor(e,t,n,r){super(`${e}: ${n}`),this.kind=e,this.hostname=t,this.message=n,this.type=r,this.name="APIError",this.type=r,this.kind=e,this.message=n,this.hostname=t}}},zIJM:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return d}));const r="pending",o="resolving",i="resolved",s="errored",a="fallback",c=1200,l=6e4,u="Provider.authFlow is not set to OAuth2.",d="Fatal error resolving URL"}}]);
//# sourceMappingURL=13.4BxqDBVFeT.js.map